(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6649],{58254:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var i=a(56626);let r=(0,i.Z)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},40006:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var i=a(56626);let r=(0,i.Z)("PencilRuler",[["path",{d:"m15 5 4 4",key:"1mk7zo"}],["path",{d:"M13 7 8.7 2.7a2.41 2.41 0 0 0-3.4 0L2.7 5.3a2.41 2.41 0 0 0 0 3.4L7 13",key:"orapub"}],["path",{d:"m8 6 2-2",key:"115y1s"}],["path",{d:"m2 22 5.5-1.5L21.17 6.83a2.82 2.82 0 0 0-4-4L3.5 16.5Z",key:"hes763"}],["path",{d:"m18 16 2-2",key:"ee94s4"}],["path",{d:"m17 11 4.3 4.3c.94.94.94 2.46 0 3.4l-2.6 2.6c-.94.94-2.46.94-3.4 0L11 17",key:"cfq27r"}]])},12830:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var i=a(56626);let r=(0,i.Z)("RefreshCcwDot",[["path",{d:"M3 2v6h6",key:"18ldww"}],["path",{d:"M21 12A9 9 0 0 0 6 5.3L3 8",key:"1pbrqz"}],["path",{d:"M21 22v-6h-6",key:"usdfbe"}],["path",{d:"M3 12a9 9 0 0 0 15 6.7l3-2.7",key:"1hosoe"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]])},49437:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var i=a(56626);let r=(0,i.Z)("Router",[["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",key:"w68u3i"}],["path",{d:"M6.01 18H6",key:"19vcac"}],["path",{d:"M10.01 18H10",key:"uamcmx"}],["path",{d:"M15 10v4",key:"qjz1xs"}],["path",{d:"M17.84 7.17a4 4 0 0 0-5.66 0",key:"1rif40"}],["path",{d:"M20.66 4.34a8 8 0 0 0-11.31 0",key:"6a5xfq"}]])},36701:function(e,t,a){"use strict";a.d(t,{H:function(){return d},e:function(){return c}});var i=a(30195),r=a(12830),n=a(58254),s=a(49437),o=a(40006);let c={"automatic-crud":{id:"automatic-crud",name:"Automatic CRUD",description:"Generic API to create, read, update and delete.",icon:r.Z,extraFields:e=>({object:i.z.union([i.z.literal("without object"),...e.data.items.map(e=>i.z.literal(e.name))]).after("name")}),extraValidation:e=>{if(!Object.keys(e).includes("object"))return{error:"object cant be empty"}}},"automatic-crud-storage":{id:"automatic-crud-storage",name:"Automatic CRUD (custom storage)",description:"Generic API to create, read, update and delete with custom control.",icon:n.Z,extraFields:e=>({object:i.z.union([i.z.literal("without object"),...e.data.items.map(e=>i.z.literal(e.name))]).after("name")}),extraValidation:e=>{if(!Object.keys(e).includes("object"))return{error:"object cant be empty"}}},"iot-router":{id:"iot-router",name:"IOT Router",description:"To control and obtain data with IoT devices.",icon:s.Z},"custom-api":{id:"custom-api",name:"Custom API",description:"Create your API from scratch or import one from another project",icon:o.Z}},d={blank:{id:"blank",name:"Blank"},default:{id:"default",name:"Default"},admin:{name:"Admin panel",id:"admin",extraFields:e=>{var t;return{object:i.z.union([...e&&e.data?null===(t=e.data)||void 0===t?void 0:t.items.filter(e=>e.features&&e.features.AutoAPI).map(e=>i.z.literal(e.name)):[]]).after("route")}},extraValidation:e=>{if(!Object.keys(e).includes("object"))return{error:"object cant be empty"}}},landing:{id:"landing",name:"Landing"},iot:{id:"iot",name:"IoT Panel"},ecomerce:{id:"ecomerce",name:"E-commerce"},about:{id:"about",name:"About"},newsfeed:{id:"newsfeed",name:"News feed"}}},54283:function(e,t,a){"use strict";a.d(t,{$:function(){return c},J:function(){return o}});var i=a(94801),r=a(55858),n=a(53596);let s=(0,n.j)();class o{get(e,t){var a;return null!==(a=this.data[e])&&void 0!==a?a:t}getObjectSchema(){return this.objectSchema}getModelName(){return this.modelName}getLocation(){let e=this.objectSchema.is("location").getFields();if(!e.length)throw"Model error: "+this.getModelName()+" doesn't have location information";let t=e[0],a=this.objectSchema.getFieldKeyDefinition(t,"latKey"),i=this.objectSchema.getFieldKeyDefinition(t,"lonKey");if(this.data[t])return{lat:this.data[t][a],lon:this.data[t][i]}}getId(){return this.data[this.idField]}getNotificationsTopic(e){return"notifications/".concat(this.getModelName(),"/").concat(e,"/").concat(this.getId())}getNotificationsPayload(){return this.serialize()}setId(e,t){return new this.constructor({...t||this.data,[this.idField]:e},this.session,this.modelName)}isVisible(){return!this.isDeleted()}isDeleted(){return!!this.data._deleted}list(e,t,a,i){if(!e)return this.read();{let{parsed:t,searchWithoutTags:a}=function(e){let t;let a=/(\w+):("[^"]+"|\S+)/g,i={},r=e;for(;null!==(t=a.exec(e));){let e=t[1].toLowerCase(),a=t[2].replace(/"/g,"").toLowerCase();i[e]=a,r=r.replace(t[0],"")}return{parsed:i,searchWithoutTags:r=r.trim()}}(e);for(let[e,a]of Object.entries(t))if(!this.data.hasOwnProperty(e)||this.data[e]!=a)return;let i=this.objectSchema.is("search").getFields();for(var r=0;r<i.length;r++)if((this.data[i[r]]+"").toLowerCase().includes(a.toLowerCase()))return this.read()}}async listTransformed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,n=this.list(e,a,i,r);if(n)return await this.getObjectSchema().apply("list",n,t)}create(e){let t=this.getData(e);return s.debug({transformed:t},"Creating object: ".concat(JSON.stringify(t))),new this.constructor(t,this.session,this.modelName).validate()}async createTransformed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=await this.getObjectSchema().apply("create",{...this.data},e);return this.create(t)}read(e){return{...this.data}}async readTransformed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=await this.getObjectSchema().apply("read",this.read(t),e);return a}update(e,t){return e.setId(this.getId(),{...t||e.data})}async updateTransformed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=await this.getObjectSchema().apply("update",{...e.data},t,{...this.data});return this.update(e,a)}delete(e){return new this.constructor({_deleted:!0,...e||this.data},this.session,this.modelName)}async deleteTransformed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=await this.getObjectSchema().apply("delete",{...this.data},e);return this.delete(t)}validate(){return this.schema.parse(this.data),this}serialize(){return JSON.stringify(this.data)}static getApiOptions(){throw Error("Derived class must implement getApiOptions")}static _newInstance(e,t){throw Error("Derived class must implement _newInstance.")}static unserialize(e,t){return this._newInstance(JSON.parse(e),t)}static load(e,t){return this._newInstance(e,t)}static sort(e,t,a){return e.sort((e,i)=>e[t]>i[t]?"asc"===a?1:-1:e[t]<i[t]?"asc"===a?-1:1:0)}getData(e){return{...this.getObjectSchema().applyGenerators(null!=e?e:this.data)}}constructor(e,t,a,n){var s,o;this.data=e,this.session=null!=a?a:(0,i.ed)(),this.schema=t,this.objectSchema=r.U.load(this.schema),this.modelName=null!==(s=null==n?void 0:n.toLowerCase())&&void 0!==s?s:"unknown";let c=this.objectSchema.is("id");c.getFields().length>1&&(c=c.isNot("fallbackId")),this.idField=null!==(o=c.getFirst("id"))&&void 0!==o?o:"id"}}class c extends o{static _newInstance(e,t){throw Error("Derived class must implement _newInstance.")}static createDerived(e,t,a,i){class r extends c{static _newInstance(e,t){return new r(e,t)}static getApiOptions(){return{name:a,prefix:i}}constructor(a,i){super(a,t,i,e.substring(0,e.length-5).toLowerCase())}}return r.schemaInstance=t,Object.defineProperty(r,"name",{value:e,writable:!1}),r}constructor(e,t,a,i){super(e,t,a,i)}}},52725:function(e,t,a){"use strict";a.d(t,{L:function(){return o}});var i=a(30195),r=a(75370),n=a(54283);let s=r.V_.object({name:i.z.string().search().id(),route:i.z.string().search(),permissions:i.z.array(i.z.string()).label("Permissions").generate(()=>[]),web:i.z.boolean().defaultValue(!0),electron:i.z.boolean().defaultValue(!1),protected:i.z.boolean().defaultValue(!1).label("Require user")});class o extends n.J{getDefaultFilePath(){return"/packages/app/bundles/custom/pages/"+this.data.name+".tsx"}static _newInstance(e,t){return new o(e,t)}constructor(e,t){super(e,s,t,"Page")}}},80330:function(e,t,a){"use strict";a.d(t,{M:function(){return d}});var i=a(52322),r=a(8939),n=a(66306),s=a(2784),o=a(91838);let c="  _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _fow-500 _fos-16px _col-791969588 ",d=e=>{let{slides:t,lastButtonCaption:a,onFinish:d,id:l="pages"}=e,[u,h]=(0,s.useState)(0),m=t.length,p=u>1?u-1:0,f=u<m-1?u+1:null,b=t.filter((e,t)=>t<=u).map(e=>e.name).join(" / ");return(0,i.jsxs)(r.FA,{id:"admin-dataview-create-dlg",w:800,mah:700,p:"$3",f:1,children:[(0,i.jsxs)(r.sL,{id:"admin-eo",mt:"$4",justifyContent:"space-between",width:"100%",children:[(0,i.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 ",children:(0,i.jsx)("span",{className:c,children:b})}),(0,i.jsx)("div",{className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 _ai-flex-end ",children:(0,i.jsxs)("span",{className:c,children:["[",u+1,"/",m,"]"]})})]}),(0,i.jsx)(o.I,{children:(0,i.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 ",children:(0,i.jsx)("span",{className:"  _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _fow-600 _fos-34px _col-549765294 ",children:t[u].title})})}),(0,i.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mt-1316330269 ",children:t[u].component}),(0,i.jsxs)("div",{className:"  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _gap-40px _jc-center _mb-1316330238 _fg-1 _ai-flex-end ",children:[0!==u?(0,i.jsx)(n.zx,{w:250,onPress:e=>{e.stopPropagation(),u>0&&h(p)},children:"Back"}):(0,i.jsx)(i.Fragment,{}),(0,i.jsx)(o.I,{children:(0,i.jsx)(n.zx,{id:"admin-"+l+"-add-btn",w:250,onPress:async e=>{e.stopPropagation(),f?h(f):d&&await d()},children:m===u+1?a:"Next"})})]})]})};a(88538)},1888:function(e,t,a){"use strict";a.d(t,{F7:function(){return s},eq:function(){return o}});var i=a(46149),r=a(6429),n=a(48115);let s=e=>i.l.SSR?e:void 0;function o(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return s(async s=>{var o,c,d,l,u,h;let m={itemsPerPage:parseInt(s.query.itemsPerPage)?parseInt(s.query.itemsPerPage):"",page:parseInt(s.query.page,10)?parseInt(s.query.page,10):"",search:null!==(o=s.query.search)&&void 0!==o?o:"",orderBy:null!==(c=s.query.orderBy)&&void 0!==c?c:"",orderDirection:null!==(d=s.query.orderDirection)&&void 0!==d?d:"",view:null!==(l=s.query.view)&&void 0!==l?l:"",item:null!==(u=s.query.item)&&void 0!==u?u:"",editFile:null!==(h=s.query.editFile)&&void 0!==h?h:"",..."function"==typeof a?await a(s):a},p="function"==typeof e?e(s):e;return(0,r.NA)(s,t,{sourceUrl:p,initialItems:await n.bl.get({url:(0,r.VM)(p,s),...m}),itemData:s.query.item?await n.bl.get((0,r.VM)(p+"/"+s.query.item,s)):"",extraData:{..."function"==typeof i?await i(s):i},pageState:{...m}})})}},88538:function(){}}]);