(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7695],{56083:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/events",function(){return i(54113)}])},54113:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return b}});var a=i(52322),n=i(93976),r=i(40214),s=i(13997),o=i(50897),c=i(79562),l=i(1888),d=i(19034),u=i.n(d),h=i(83103),m=i(13043),p=i(1201);let f={},g="/adminapi/v1/events";var v={events:{component:e=>{let{pageState:t,initialItems:i,pageSession:l}=e;return(0,p.G)(()=>'At this moment the user is browsing the events list page. The events list page allows to monitor system events. The list is updated automatically if any events occurs.\n            An event can be a user created, invalid login attempt, successful login, file edit, file create, file update, and also system object modification events, like "product created", or "product updated".\n            Events can be used to monitor the system, auditing pruposes, or to trigger API actions when a specific event happens.\n            Events contain a path, in the form of: x/y/z, where each part of the path describes a part of the event identify.\n            For example, a file creation event will be files/create/file. A directory creation would be files/create/directory.\n            Auth events can be auth/login/success and auth/login/error.\n            Events contain data, specific for the event type.\n            '+((null==i?void 0:i.isLoaded)?"Currently the system returned the following information: "+JSON.stringify(i.data):"")),(0,a.jsx)(r.D,{title:"Events",pageSession:l,children:(0,a.jsx)(s.V,{integratedChat:!0,hideAdd:!0,openMode:"view",sourceUrl:g,initialItems:i,numColumnsForm:1,name:"event",disableViewSelector:!1,defaultView:"list",rowIcon:h.l,columns:o.Z.columns(o.Z.column("path","path",!0,void 0,!0,"250px"),o.Z.column("user","user",!0,void 0,!0,"200px"),o.Z.column("from","from",!0,e=>(0,a.jsx)(c.A,{text:e.from,color:"$gray5"}),!0),o.Z.column("created","created",!0,e=>u()(e.created).format("HH:mm:ss DD-MM-YYYY"),!0,"200px"),o.Z.column("inspect","payload",!1,e=>(0,a.jsx)(m.Z,{onChange:()=>{},editable:!1,data:e.payload,collapsible:!0,compact:!1,defaultCollapsed:!1}))),model:n.Yq,pageState:t,icons:f})})},getServerSideProps:(0,l.eq)(g,["admin"],{orderBy:"created",orderDirection:"desc"})}},y=i(97729),w=i.n(y);function b(e){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w(),{children:(0,a.jsx)("title",{children:"Protofy - Events"})}),(0,a.jsx)(v.events.component,{...e})]})}},54283:function(e,t,i){"use strict";i.d(t,{$:function(){return c},J:function(){return o}});var a=i(94801),n=i(55858),r=i(53596);let s=(0,r.j)();class o{get(e,t){var i;return null!==(i=this.data[e])&&void 0!==i?i:t}getObjectSchema(){return this.objectSchema}getModelName(){return this.modelName}getLocation(){let e=this.objectSchema.is("location").getFields();if(!e.length)throw"Model error: "+this.getModelName()+" doesn't have location information";let t=e[0],i=this.objectSchema.getFieldKeyDefinition(t,"latKey"),a=this.objectSchema.getFieldKeyDefinition(t,"lonKey");if(this.data[t])return{lat:this.data[t][i],lon:this.data[t][a]}}getId(){return this.data[this.idField]}getNotificationsTopic(e){return"notifications/".concat(this.getModelName(),"/").concat(e,"/").concat(this.getId())}getNotificationsPayload(){return this.serialize()}setId(e,t){return new this.constructor({...t||this.data,[this.idField]:e},this.session,this.modelName)}isVisible(){return!this.isDeleted()}isDeleted(){return!!this.data._deleted}list(e,t,i,a){if(a){let{itemsPerPage:e,page:t,orderBy:i,orderDirection:n,search:r,token:s,...o}=a,c=Object.keys(o).every(e=>this.data&&this.data[e]==o[e]);if(!c)return}if(!e)return this.read();{let{parsed:t,searchWithoutTags:i}=function(e){let t;let i=/(\w+):("[^"]+"|\S+)/g,a={},n=e;for(;null!==(t=i.exec(e));){let e=t[1].toLowerCase(),i=t[2].replace(/"/g,"").toLowerCase();a[e]=i,n=n.replace(t[0],"")}return{parsed:a,searchWithoutTags:n=n.trim()}}(e);for(let[e,i]of Object.entries(t))if(!this.data.hasOwnProperty(e)||this.data[e]!=i)return;let a=this.objectSchema.is("search").getFields();for(var n=0;n<a.length;n++)if((this.data[a[n]]+"").toLowerCase().includes(i.toLowerCase()))return this.read()}}async listTransformed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,r=this.list(e,i,a,n);if(r)return await this.getObjectSchema().apply("list",r,t)}create(e){let t=this.getData(e);return s.debug({transformed:t},"Creating object: ".concat(JSON.stringify(t))),new this.constructor(t,this.session,this.modelName).validate()}async createTransformed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=await this.getObjectSchema().apply("create",{...this.data},e);return this.create(t)}read(e){return{...this.data}}async readTransformed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,i=await this.getObjectSchema().apply("read",this.read(t),e);return i}update(e,t){return e.setId(this.getId(),{...t||e.data})}async updateTransformed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=await this.getObjectSchema().apply("update",{...e.data},t,{...this.data});return this.update(e,i)}delete(e){return new this.constructor({_deleted:!0,...e||this.data},this.session,this.modelName)}async deleteTransformed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=await this.getObjectSchema().apply("delete",{...this.data},e);return this.delete(t)}validate(){return this.schema.parse(this.data),this}serialize(){return JSON.stringify(this.data)}static getApiOptions(){throw Error("Derived class must implement getApiOptions")}static _newInstance(e,t){throw Error("Derived class must implement _newInstance.")}static unserialize(e,t){return this._newInstance(JSON.parse(e),t)}static load(e,t){return this._newInstance(e,t)}static sort(e,t,i){return e.sort((e,a)=>e[t]>a[t]?"asc"===i?1:-1:e[t]<a[t]?"asc"===i?-1:1:0)}getData(e){return{...this.getObjectSchema().applyGenerators(null!=e?e:this.data)}}constructor(e,t,i,r){var s,o;this.data=e,this.session=null!=i?i:(0,a.ed)(),this.schema=t,this.objectSchema=n.U.load(this.schema),this.modelName=null!==(s=null==r?void 0:r.toLowerCase())&&void 0!==s?s:"unknown";let c=this.objectSchema.is("id");c.getFields().length>1&&(c=c.isNot("fallbackId")),this.idField=null!==(o=c.getFirst("id"))&&void 0!==o?o:"id"}}class c extends o{static _newInstance(e,t){throw Error("Derived class must implement _newInstance.")}static createDerived(e,t,i,a){class n extends c{static _newInstance(e,t){return new n(e,t)}static getApiOptions(){return{name:i,prefix:a}}constructor(i,a){super(i,t,a,e.substring(0,e.length-5).toLowerCase())}}return n.schemaInstance=t,Object.defineProperty(n,"name",{value:e,writable:!1}),n}constructor(e,t,i,a){super(e,t,i,a)}}},43657:function(e,t,i){"use strict";i.d(t,{jb:function(){return a}});let a=(e,t)=>t},93976:function(e,t,i){"use strict";i.d(t,{Yq:function(){return u}});var a=i(30195),n=i(43657),r=i(75370),s=i(19034),o=i.n(s),c=i(54283);let l=a.z.object((0,n.jb)("schema",{path:a.z.string().search(),from:a.z.string().search(),user:a.z.string().generate(e=>"me").search(),payload:a.z.record(a.z.string(),a.z.any()).search(),created:a.z.string().generate(e=>o()().toISOString()).search()})),d=a.z.object({...r.Pp.shape,...l.shape});class u extends c.J{list(e,t,i,a){if(a){let{itemsPerPage:e,page:t,orderBy:i,orderDirection:n,search:r,token:s,...o}=a,c=Object.keys(o).every(e=>this.data&&this.data[e]==o[e]);if(!c)return}return e?JSON.stringify(this.data).toLowerCase().includes(e.toLowerCase())?this.read():void 0:this.read()}static _newInstance(e,t){return new u(e,t)}constructor(e,t){super(e,d,t,"Event")}}},1888:function(e,t,i){"use strict";i.d(t,{F7:function(){return s},eq:function(){return o}});var a=i(46149),n=i(6429),r=i(48115);let s=e=>a.l.SSR?e:void 0;function o(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return s(async s=>{var o,c,l,d,u,h;let m={itemsPerPage:parseInt(s.query.itemsPerPage)?parseInt(s.query.itemsPerPage):"",page:parseInt(s.query.page,10)?parseInt(s.query.page,10):"",search:null!==(o=s.query.search)&&void 0!==o?o:"",orderBy:null!==(c=s.query.orderBy)&&void 0!==c?c:"",orderDirection:null!==(l=s.query.orderDirection)&&void 0!==l?l:"",view:null!==(d=s.query.view)&&void 0!==d?d:"",item:null!==(u=s.query.item)&&void 0!==u?u:"",editFile:null!==(h=s.query.editFile)&&void 0!==h?h:"",..."function"==typeof i?await i(s):i},p="function"==typeof e?e(s):e;return(0,n.NA)(s,t,{sourceUrl:p,initialItems:await r.bl.get({url:(0,n.VM)(p,s),...m}),itemData:s.query.item?await r.bl.get((0,n.VM)(p+"/"+s.query.item,s)):"",extraData:{..."function"==typeof a?await a(s):a},pageState:{...m}})})}}},function(e){e.O(0,[8641,8081,4733,1335,8873,2859,6313,3950,3661,3057,9613,7369,2905,1004,6076,2029,7594,9774,2888,179],function(){return e(e.s=56083)}),_N_E=e.O()}]);