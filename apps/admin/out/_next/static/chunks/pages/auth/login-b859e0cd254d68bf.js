(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9344],{64386:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/login",function(){return r(49504)}])},49504:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return F}});var t=r(52322),n=r(2784),i=r(8939),a=r(84291),o=r(66306),l=r(60545),d=r(43115),c=r(47057),_=r(24293),u=r(16196),p=r(10836),x=r(11561),f=r(98838),h=r(6289),m=r(6429),b=r(94801),g=r(7123),j=r(20273),v=r(53726),w=r(65884),y=r(39097),N=r.n(y),E=r(5632),P=r(9393),$=r(94038);function z(e){return(0,t.jsx)(d.T,{children:(0,t.jsx)(w.H,{title:"Protofy",description:"Made with love from Barcelona",footer:null,children:(0,t.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 _ox-hidden _oy-hidden ",children:(0,t.jsxs)(c.Z,{containerProps:{f:1},sectionProps:{index:0,p:0},children:[(0,t.jsx)(_.Z,{}),(0,t.jsx)(u.Z,{t:"20vh"}),(0,t.jsx)(p.Z,{children:(0,t.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mt--10vh ",children:(0,t.jsx)(x.Z,{children:(0,t.jsx)(f.Z,{children:(0,t.jsx)(S,{})})})})})]})})})})}function S(){let[e,s]=(0,n.useState)(""),[r,d]=(0,n.useState)(""),[c,_]=(0,n.useState)(!1),u=(0,n.useRef)(null),[p,x]=(0,n.useState)((0,h.E)("pending")),[f,w]=(0,m.kP)(),[y,z]=(0,m.Tt)(),S=(0,E.useRouter)();(0,n.useEffect)(()=>{var e;null===(e=u.current)||void 0===e||e.focus()},[]),(0,n.useEffect)(()=>{p.isLoaded&&p.data&&(w((0,b.ed)(p.data.session.user,p.data.session.token)),z(p.data.context))},[p]),(0,n.useEffect)(()=>{if(f.loggedIn){var e;S.push(null!==(e=S.query.return)&&void 0!==e?e:"/")}},[f]);let k=async s=>{s.preventDefault(),g.g.login(e,r,x)};return(0,t.jsx)("div",{className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ai-center _jc-center _pt-1481558214 _pr-1481558214 _pb-1481558214 _pl-1481558214 ",children:(0,t.jsxs)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _fs-0 _miw-300px _maw-320px _jc-441309761 _pt-1481558214 _pr-1481558214 _pb-1481558214 _pl-1481558214 _gap-1316330145 ",children:[(0,t.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mb-1316330145 ",children:(0,t.jsx)(j.K,{o:.9,children:(0,t.jsx)("img",{src:"/logo.png",style:{width:"100px",height:"100px"}})})}),!!p.isError&&(0,t.jsx)(v.q,{children:(0,t.jsx)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-233016140 _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto font_body ",children:(0,P.e)(p.error)})}),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 ",children:(0,t.jsx)("form",{onSubmit:k,children:(0,t.jsxs)(i.FA,{space:"$2",mt:"$5",children:[(0,t.jsx)(a.II,{id:"sign-in-email-input",ref:u,autoComplete:"email",placeholder:"Email",value:e,onChange:e=>s(e.nativeEvent.text),required:!0}),(0,t.jsx)(a.II,{id:"sign-in-password-input",autoComplete:"password",secureTextEntry:!0,placeholder:"Password",value:r,onChange:e=>d(e.nativeEvent.text),required:!0}),(0,t.jsx)(o.zx,{id:"sign-in-btn",type:"submit",loading:p.isLoading,disabled:p.isLoading||!r.length||!e.length,mt:"$5",children:f.loggedIn||p.isLoading?(0,t.jsx)(l.$,{}):"Sign in"})]})})})}),(0,t.jsx)(i.FA,{space:"$2",children:(0,t.jsx)($.Q2,{name:"alt2",children:(0,t.jsxs)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-233016078 _ls-167743997 _fos-229441158 _lh-222976511 _ussel-auto _ta-center font_body ",children:["Don't have an account?"," ",(0,t.jsx)(N(),{id:"sign-up-link",href:"/auth/register"+(S.query.return?"?return="+S.query.return:""),style:{fontWeight:"800"},children:"Sign up."})]})})})]})})}r(41211);var k=r(97729),Z=r.n(k);function F(e){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Z(),{children:(0,t.jsx)("title",{children:"Protofy - Sign In"})}),(0,t.jsx)(z,{...e})]})}},24293:function(e,s,r){"use strict";var t=r(52322),n=r(8939),i=r(2784);let a=i.forwardRef((e,s)=>{let{height:r=521,o:i=.08,direction:a="up",...o}=e;return(0,t.jsx)(n.FA,{ref:s,className:"bg-grid mask-gradient-"+a,fullscreen:!0,top:"auto",height:r,left:-1e3,right:-1e3,flex:1,pe:"none",o:i,...o})});s.Z=a},11561:function(e,s,r){"use strict";var t=r(52322),n=r(8939),i=r(2784);let a=i.forwardRef((e,s)=>(0,t.jsxs)(n.FA,{ref:s,pos:"relative",elevation:"$4",py:"$4",pt:"$6",pb:"$10",zIndex:1,...e,children:[(0,t.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-absolute _mih-0px _miw-0px _fs-0 _t-0px _l-0px _r-0px _b-0px _bg-549765480 _zi--1 _o-0d0t2546 _btw-1px _btc-2122800589 _bts-solid "}),e.children]}));s.Z=a,r(55288)},98838:function(e,s,r){"use strict";var t=r(52322),n=r(2784),i=r(65919),a=r(8939);let o=n.forwardRef((e,s)=>(0,t.jsx)(i._k,{ref:s,children:(0,t.jsx)(a.sL,{flex:1,overflow:"hidden",maxWidth:"100%",space:"$8",flexWrap:"nowrap",px:"$2",mb:-8,$sm:{flexDirection:"column"},$gtSm:{px:"$6"},...e,children:e.children})}));s.Z=o},20273:function(e,s,r){"use strict";r.d(s,{K:function(){return a}});var t=r(52322),n=r(2784),i=r(8939);let a=n.forwardRef((e,s)=>{let{children:r,...n}=e;return(0,t.jsx)(i.FA,{ref:s,tag:"span",className:"unselectable",alignSelf:"center",marginVertical:-10,pressStyle:{opacity:1,scaleY:-1},hoverStyle:{opacity:.8},...n,children:r})})},47057:function(e,s,r){"use strict";var t=r(52322),n=r(2784),i=r(8939),a=r(91838);let o=n.forwardRef((e,s)=>(0,t.jsx)(i.FA,{ref:s,flex:1,...e,children:(0,t.jsx)(a.I,{children:e.children})}));s.Z=o},16196:function(e,s,r){"use strict";var t=r(52322),n=r(2784),i=r(8939);let a=n.forwardRef((e,s)=>(0,t.jsx)(i.FA,{ref:s,o:.75,pos:"absolute",t:0,l:0,r:0,h:2e3,className:"hero-blur",...e}));s.Z=a},7123:function(e,s,r){"use strict";r.d(s,{g:function(){return d}});var t=r(48115),n=r(30195);n.z.object({username:n.z.string().email(),password:n.z.string()});let i=n.z.object({username:n.z.string().email(),password:n.z.string().min(6),rePassword:n.z.any()}),a=i.refine(e=>e.password===e.rePassword,{message:"Passwords do not match",path:["password"]}),o=n.z.object({type:n.z.string().min(1)});n.z.object({...i.omit({rePassword:!0}).shape,...o.shape});var l=r(6289);let d={login:async(e,s,r)=>t.bl.post("/adminapi/v1/auth/login",{username:e,password:s},r),register:async(e,s,r,n)=>{try{a.parse({username:e,password:s,rePassword:r})}catch(e){n((0,l.E)("error",null,e.flatten()));return}return t.bl.post("/adminapi/v1/auth/register",{username:e,password:s,rePassword:r},n)}}},55288:function(){},41211:function(){}},function(e){e.O(0,[2700,1004,9774,2888,179],function(){return e(e.s=64386)}),_N_E=e.O()}]);