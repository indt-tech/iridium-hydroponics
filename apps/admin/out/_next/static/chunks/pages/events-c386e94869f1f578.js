(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7695,4935],{56083:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/events",function(){return r(12218)}])},12218:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return j}});var s=r(52322),a=r(93976),i=r(40214),n=r(13997),o=r(50897),l=r(79562),d=r(31711);let c=e=>{let{trigger:t,children:r,...a}=e;return(0,s.jsxs)(d.u,{...a,children:[(0,s.jsx)(d.u.Trigger,{children:t}),(0,s.jsxs)(d.u.Content,{enterStyle:{x:0,y:-5,opacity:0,scale:.9},exitStyle:{x:0,y:-5,opacity:0,scale:.9},scale:1,x:0,y:0,opacity:1,animation:["quick",{opacity:{overshootClamping:!0}}],children:[(0,s.jsx)(d.u.Arrow,{}),(0,s.jsx)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-233016078 _ls-167743997 _fos-229441158 _lh-222976480 _ussel-auto font_body ",children:r})]})]})};r(76409);var _=r(1888),p=r(19034),m=r.n(p),u=r(83103),x=r(13043),h=r(1201);let f={},b="/adminapi/v1/events";var v={events:{component:e=>{var t;let{pageState:r,initialItems:d,pageSession:_}=e;return(0,h.G)(()=>'At this moment the user is browsing the events list page. The events list page allows to monitor system events. The list is updated automatically if any events occurs.\n            An event can be a user created, invalid login attempt, successful login, file edit, file create, file update, and also system object modification events, like "product created", or "product updated".\n            Events can be used to monitor the system, auditing pruposes, or to trigger API actions when a specific event happens.\n            Events contain a path, in the form of: x/y/z, where each part of the path describes a part of the event identify.\n            For example, a file creation event will be files/create/file. A directory creation would be files/create/directory.\n            Auth events can be auth/login/success and auth/login/error.\n            Events contain data, specific for the event type.\n            '+((null==d?void 0:d.isLoaded)?"Currently the system returned the following information: "+JSON.stringify(d.data):"")),(0,s.jsx)(i.D,{title:"Events",pageSession:_,children:(0,s.jsx)(n.V,{integratedChat:!0,hideAdd:!0,openMode:"view",sourceUrl:b,initialItems:d,numColumnsForm:1,name:"event",disableViewSelector:!1,defaultView:"list",rowIcon:u.l,columns:o.Z.columns(o.Z.column("path","path",!0,void 0,!0,"250px"),o.Z.column("user","user",!0,void 0,!0,"200px"),o.Z.column("from","from",!0,e=>(0,s.jsx)(l.A,{text:e.from,color:"$gray5"}),!0),o.Z.column("created","created",!0,e=>m()(e.created).format("YYYY-MM-DD HH:mm:ss"),!0,"200px"),o.Z.column("payload","payload",!1,e=>Object.keys(null!==(t=null==e?void 0:e.payload)&&void 0!==t?t:[]).length?Object.keys(e.payload).map((t,r)=>(0,s.jsx)(c,{trigger:(0,s.jsx)(l.A,{ml:r?"$2":"$0",text:t,color:"$color5"},t),children:JSON.stringify(e.payload[t])})):(0,s.jsx)(l.A,{text:"empty",color:"$gray5"}),!0,"200px"),o.Z.column("inspect","payload",!1,e=>(0,s.jsx)(x.Z,{onChange:()=>{},editable:!1,data:e.payload,collapsible:!0,compact:!1,defaultCollapsed:!0}))),model:a.Yq,pageState:r,icons:f})})},getServerSideProps:(0,_.eq)(b,["admin"],{orderBy:"created",orderDirection:"desc"})}},g=r(97729),w=r.n(g);function j(e){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w(),{children:(0,s.jsx)("title",{children:"Protofy - Events"})}),(0,s.jsx)(v.events.component,{...e})]})}},54283:function(e,t,r){"use strict";r.d(t,{$:function(){return l},J:function(){return o}});var s=r(94801),a=r(55858),i=r(53596);let n=(0,i.j)();class o{get(e,t){var r;return null!==(r=this.data[e])&&void 0!==r?r:t}getObjectSchema(){return this.objectSchema}getModelName(){return this.modelName}getLocation(){let e=this.objectSchema.is("location").getFields();if(!e.length)throw"Model error: "+this.getModelName()+" doesn't have location information";let t=e[0],r=this.objectSchema.getFieldKeyDefinition(t,"latKey"),s=this.objectSchema.getFieldKeyDefinition(t,"lonKey");if(this.data[t])return{lat:this.data[t][r],lon:this.data[t][s]}}getId(){return this.data[this.idField]}getNotificationsTopic(e){return"notifications/".concat(this.getModelName(),"/").concat(e,"/").concat(this.getId())}getNotificationsPayload(){return this.serialize()}setId(e,t){return new this.constructor({...t||this.data,[this.idField]:e},this.session,this.modelName)}isVisible(){return!this.isDeleted()}isDeleted(){return!!this.data._deleted}list(e,t,r){if(!e)return this.read();{let{parsed:t,searchWithoutTags:r}=function(e){let t;let r=/(\w+):("[^"]+"|\S+)/g,s={},a=e;for(;null!==(t=r.exec(e));){let e=t[1].toLowerCase(),r=t[2].replace(/"/g,"").toLowerCase();s[e]=r,a=a.replace(t[0],"")}return{parsed:s,searchWithoutTags:a=a.trim()}}(e);for(let[e,r]of Object.entries(t))if(!this.data.hasOwnProperty(e)||this.data[e]!=r){n.debug({data:this.data[e]},"discarded: ".concat(JSON.stringify(this.data[e])));return}let a=this.objectSchema.is("search").getFields();for(var s=0;s<a.length;s++)if((this.data[a[s]]+"").toLowerCase().includes(r.toLowerCase()))return this.read()}}async listTransformed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,a=this.list(e,r,s);if(a)return await this.getObjectSchema().apply("list",a,t)}create(e){let t=this.getData(e);return n.debug({transformed:t},"Creating object: ".concat(JSON.stringify(t))),new this.constructor(t,this.session,this.modelName).validate()}async createTransformed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=await this.getObjectSchema().apply("create",{...this.data},e);return this.create(t)}read(e){return{...this.data}}async readTransformed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=await this.getObjectSchema().apply("read",this.read(t),e);return r}update(e,t){return e.setId(this.getId(),{...t||e.data})}async updateTransformed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=await this.getObjectSchema().apply("update",{...e.data},t,{...this.data});return this.update(e,r)}delete(e){return new this.constructor({_deleted:!0,...e||this.data},this.session,this.modelName)}async deleteTransformed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=await this.getObjectSchema().apply("delete",{...this.data},e);return this.delete(t)}validate(){return this.schema.parse(this.data),this}serialize(){return JSON.stringify(this.data)}static getApiOptions(){throw Error("Derived class must implement getApiOptions")}static _newInstance(e,t){throw Error("Derived class must implement _newInstance.")}static unserialize(e,t){return this._newInstance(JSON.parse(e),t)}static load(e,t){return this._newInstance(e,t)}static sort(e,t,r){return e.sort((e,s)=>e[t]>s[t]?"asc"===r?1:-1:e[t]<s[t]?"asc"===r?-1:1:0)}getData(e){return{...this.getObjectSchema().applyGenerators(null!=e?e:this.data)}}constructor(e,t,r,i){var n,o;this.data=e,this.session=null!=r?r:(0,s.ed)(),this.schema=t,this.objectSchema=a.U.load(this.schema),this.modelName=null!==(n=null==i?void 0:i.toLowerCase())&&void 0!==n?n:"unknown";let l=this.objectSchema.is("id");l.getFields().length>1&&(l=l.isNot("fallbackId")),this.idField=null!==(o=l.getFirst("id"))&&void 0!==o?o:"id"}}class l extends o{static _newInstance(e,t){throw Error("Derived class must implement _newInstance.")}static createDerived(e,t,r,s){class a extends l{static _newInstance(e,t){return new a(e,t)}static getApiOptions(){return{name:r,prefix:s}}constructor(r,s){super(r,t,s,e.substring(0,e.length-5).toLowerCase())}}return a.schemaInstance=t,Object.defineProperty(a,"name",{value:e,writable:!1}),a}constructor(e,t,r,s){super(e,t,r,s)}}},55858:function(e,t,r){"use strict";r.d(t,{U:function(){return a}});var s=r(34406);class a{getFields(){return Object.keys(this.shape)}getFieldKeyDefinition(e,t){return this.shape[e]?this.shape[e]._def[t]:void 0}applyGenerators(e){let t={...e};return Object.keys(this.shape).forEach(r=>{if(this.shape[r]._def.generate){let s=this.shape[r]._def.generate;(!e[r]||s.force)&&(t[r]="function"==typeof s.generator?s.generator(e):s.generator)}}),t}async apply(e,t,r,a){let i={...t},n=this.is("events"),o=Object.keys(n.shape);for(var l=0;l<o.length;l++){let t=o[l],c=n.shape[t],_=void 0!==s&&s.versions&&s.versions.node,p=c._def.events.filter(t=>t.eventName==e&&(!t.eventContext||"client"==t.eventContext&&!_||"server"==t.eventContext&&_));for(var d=0;d<p.length;d++){let e=p[d];r[e.eventHandler]&&(i=await r[e.eventHandler](t,e,i,a))}}return i}getLayout(e){let t=[[]],r=0;return Object.keys(this.shape).forEach(s=>{let a=this.shape[s];t[r].length==e&&(t.push([]),r++),t[r].push({...a,name:s})}),t}getFirst(e){return Object.keys(this.shape).find(t=>{if(this.shape[t]._def[e])return t})}isDisplay(e){let t={};return Object.keys(this.shape).forEach(r=>{(!this.shape[r]._def.display||this.shape[r]._def.display.includes("*")||this.shape[r]._def.display.includes(e))&&(t[r]=this.shape[r])}),new a(t)}is(e){let t={};return Object.keys(this.shape).forEach(r=>{this.shape[r]._def[e]&&(t[r]=this.shape[r])}),new a(t)}isNot(e){let t={};return Object.keys(this.shape).forEach(r=>{this.shape[r]._def[e]||(t[r]=this.shape[r])}),new a(t)}isAfter(e){let t={};return Object.keys(this.shape).forEach(r=>{var s;(null===(s=this.shape[r]._def)||void 0===s?void 0:s.after)&&this.shape[r]._def.after==e&&(t[r]=this.shape[r])}),new a(t)}isBefore(e){let t={};return Object.keys(this.shape).forEach(r=>{var s;(null===(s=this.shape[r]._def)||void 0===s?void 0:s.before)&&this.shape[r]._def.before==e&&(t[r]=this.shape[r])}),new a(t)}merge(e){let t={};return Object.keys(this.shape).forEach(r=>{let s=e.isBefore(r);(t={...t,...s.shape})[r]=this.shape[r];let a=e.isAfter(r);t={...t,...a.shape}}),new a(t)}static load(e){return new a(e.shape)}constructor(e){this.shape=e}}},43657:function(e,t,r){"use strict";r.d(t,{jb:function(){return s}});let s=(e,t)=>t},93976:function(e,t,r){"use strict";r.d(t,{Yq:function(){return _}});var s=r(30195),a=r(43657),i=r(75370),n=r(19034),o=r.n(n),l=r(54283);let d=s.z.object((0,a.jb)("schema",{path:s.z.string().search(),from:s.z.string().search(),user:s.z.string().generate(e=>"me").search(),payload:s.z.record(s.z.string(),s.z.any()).search(),created:s.z.string().generate(e=>o()().toISOString()).search()})),c=s.z.object({...i.Pp.shape,...d.shape});class _ extends l.J{list(e){return e?JSON.stringify(this.data).toLowerCase().includes(e.toLowerCase())?this.read():void 0:this.read()}static _newInstance(e,t){return new _(e,t)}constructor(e,t){super(e,c,t,"Event")}}},10347:function(e,t,r){"use strict";r.d(t,{t:function(){return i}});var s=r(52322),a=r(2784);let i=(0,a.createContext)({active:0,setActive:e=>{}}),n=a.forwardRef((e,t)=>{let{initialState:r=0,children:n}=e,[o,l]=(0,a.useState)(r);return(0,s.jsx)(i.Provider,{value:{active:o,setActive:l},children:n})});t.Z=n},91681:function(e,t,r){"use strict";var s=r(52322),a=r(2784),i=r(10347),n=r(17277);let o=a.forwardRef((e,t)=>{let{activeId:r,onSetActive:o=e=>{},...l}=e,{active:d,setActive:c}=(0,a.useContext)(i.t);return(0,s.jsx)(n.Z,{onPress:()=>{o(r),c(r)},theme:r===d?"active":null,chromeless:r!==d,...l})});t.Z=o},61667:function(e,t,r){"use strict";var s=r(52322),a=r(2784),i=r(10347),n=r(93559);let o=a.forwardRef((e,t)=>{let{activeId:r,fast:o=!1,children:l,...d}=e,{active:c}=(0,a.useContext)(i.t),_=c==r;return o?(0,a.useMemo)(()=>(0,s.jsx)(n.Stack,{ref:t,position:"absolute",top:_?0:-1e4,...d,children:l}),[_]):_?(0,s.jsx)(n.Stack,{...d,ref:t,children:l}):null});t.Z=o},50897:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var s=r(52322);r(2784);var a=r(25237),i=r.n(a);let n=i()(()=>Promise.all([r.e(7788),r.e(2881)]).then(r.bind(r,90704)).then(e=>e.default),{loadableGenerated:{webpack:()=>[90704]},ssr:!1}),o=i()(()=>r.e(4210).then(r.bind(r,4210)).then(e=>e.default),{loadableGenerated:{webpack:()=>[4210]},ssr:!1}),l={component:e=>{let{pagination:t,conditionalRowStyles:r,rowsPerPage:a,columns:i,rows:l,onRowPress:d,handlePerRowsChange:c,handlePageChange:_,totalRows:p,currentPage:m,handleSort:u}=e;return(0,s.jsx)(o,{print:!1,export:!1,filter:!1,columns:i,data:l,children:(0,s.jsx)(n,{conditionalRowStyles:r,responsive:!0,striped:!0,pointerOnHover:!0,columns:i,data:l,defaultSortField:"created",defaultSortAsc:!1,onRowClicked:d,onChangeRowsPerPage:c,onChangePage:_,paginationTotalRows:p,paginationDefaultPage:m,pagination:t,paginationServer:!0,sortServer:!0,paginationPerPage:a,onSort:u,paginationRowsPerPageOptions:[10,15,20,25,50,100,500,1e3]})})},column:function(e,t,r,s,a){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return{name:e,selector:t,sortable:r,cell:s,grow:a,minWidth:i}},columns:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t}}},13997:function(e,t,r){"use strict";r.d(t,{V:function(){return ep},p:function(){return e_}});var s=r(52322),a=r(8939),i=r(89929),n=r(66306),o=r(48115),l=r(2784),d=r(39684),c=r(26887);let _=(e,t,r,s)=>{let[a,i]=(0,l.useState)(e);(0,c.a)(e=>t(e),i,a);let{message:n}=(0,d.mU)(r);return console.log("subscribed to topic for changes: ",r),(0,l.useEffect)(()=>{if(n&&n.message){let e="string"==typeof n.message?n.message:JSON.stringify(n.message),[,,r]=(JSON.parse(e),n.topic.split("/"));t(i)}},[n]),[a,i]};var p=r(93559),m=r(99553),u=r(24066),x=r(6289),h=r(40914),f=r(94484);let b=e=>{let{index:t,data:r,width:a}=e,i=r.element.data,n=r.model.load(i),o=(0,f.d5)();return r.getCard?r.getCard(i,a):(0,s.jsx)(h.q,{height:r.itemHeight,cursor:"pointer",topBarOutSideScrollArea:!1,backgroundColor:"$color1",elevation:"$0",hoverStyle:{o:.8,backgroundColor:"$"+o.tint+"1",elevation:"$1"},borderWidth:1,pointerEvents:"none",pointerEventsControls:"none",onPress:()=>r.onSelectItem(n),...r.getPicture?{image:r.getPicture(i,a),hasPicture:!0}:{},children:r.getBody?r.getBody(i,a):(0,s.jsx)(p.Stack,{mb:"$4",width:a,children:(0,s.jsx)(u.G,{initialData:r.element,name:n.getId(),spinnerSize:75,loadingText:(0,s.jsxs)("div",{className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ai-center _jc-center ",children:["Loading data...",(0,s.jsx)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-bold _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto font_body "})]}),objectId:n.getId(),sourceUrl:r.sourceUrl+"/"+n.getId(),mode:"preview",model:r.model,extraFields:r.extraFields,icons:r.icons,customFields:r.customFields,columnWidth:a-r.contentMargin,onDelete:r.onDelete,deleteable:r.deleteable,extraMenuActions:r.extraMenuActions})},i.key)})},v=e=>{let{overScanBy:t=5,gridElementCard:r,itemMinWidth:a=400,itemHeight:i,rightGap:n=30,contentMargin:o=50,onSelectItem:d=e=>{},extraMenuActions:c,spacing:_=20,getPicture:u,getBody:h,getCard:f,model:v,items:g,sourceUrl:w,customFields:j,onDelete:y,deleteable:N,extraFields:S,icons:P,children:I,...k}=e,C=(0,l.useRef)(null),O=g.map((e,t)=>({id:"item_"+t,element:(0,x.E)("loaded",e),model:v,sourceUrl:w,customFields:j,extraFields:S,icons:P,itemMinWidth:a,getPicture:u,getBody:h,getCard:f,spacing:_,contentMargin:o,onSelectItem:d,onDelete:y,deleteable:N,itemHeight:i,extraMenuActions:c}));return(0,s.jsxs)(p.Stack,{f:1,ref:C,...k,children:[(0,s.jsx)(m.rj,{overScanBy:t,rightGap:n,containerRef:C,spacing:_,data:O,card:null!=r?r:b,itemMinWidth:a},O.length),I]})};r(18190);var g=r(43260);let w=e=>{let{index:t,data:r,width:a}=e,i=r.element,n=r.model.load(i),o=r.onDelete;return(0,s.jsx)(p.Stack,{width:a,children:(0,s.jsx)(g.I,{compact:!0,innerContainerProps:{mb:"$3",mt:"$5",mx:"$3"},onDelete:o,json:i,name:n.getId(),isTemplate:!1})},i.key)},j=e=>{var t,r;let{itemMinWidth:a=400,rightGap:i=30,contentMargin:n=40,spacing:o=20,...d}=e,c=(0,l.useRef)(null),{items:_,model:u}=(0,l.useContext)(e_),x=null==_?void 0:null===(r=_.data)||void 0===r?void 0:null===(t=r.items)||void 0===t?void 0:t.map((e,t)=>({id:"item_"+t,element:e,model:u,onDelete:d.onDelete}));return(0,s.jsx)(p.Stack,{ml:"$5",ref:c,f:1,...d,children:(0,s.jsx)(m.rj,{rightGap:i,containerRef:c,spacing:o,data:x,card:w,itemMinWidth:a},x.length)})};var y=r(41473),N=r(2715),S=r(16399),P=r(91838),I=r(10836),k=r(34406);let C=e=>{let{...t}=e,{resolvedTheme:i}=(0,S.P)(),n=(0,l.useRef)(null),o=(0,l.useContext)(e_),{tint:d}=(0,f.d5)(),[c,_]=(0,l.useState)({location:{lat:"",lon:""}}),m=o.items.data.items.map(e=>{let t=o.model.load(e);return{modelItem:t,location:t.getLocation()}}).filter(e=>e.location),h=(0,l.useMemo)(()=>m.map((e,t)=>(0,s.jsx)(N.Jx,{color:"var(--"+d+"10)",longitude:e.location.lon,latitude:e.location.lat,anchor:"bottom",onClick:t=>{t.originalEvent.stopPropagation(),_(e)}},"marker-".concat(t))),[o.items.data.items,d]);return(0,s.jsx)(p.Stack,{ref:n,f:1,...t,children:k.env.NEXT_PUBLIC_MAPBOX_TOKEN&&"PUT_HERE_YOUR_API_KEY"!==k.env.NEXT_PUBLIC_MAPBOX_TOKEN?(0,s.jsxs)(N.ZP,{mapboxAccessToken:k.env.NEXT_PUBLIC_MAPBOX_TOKEN,mapLib:r.e(2538).then(r.t.bind(r,30517,23)),initialViewState:{latitude:41.3947846,longitude:2.1939663,zoom:12},style:{},mapStyle:"dark"==i?"mapbox://styles/mapbox/dark-v9":"mapbox://styles/mapbox/light-v9",children:[(0,s.jsx)(N.$j,{position:"top-right"}),(0,s.jsx)(N.ot,{position:"top-right"}),(0,s.jsx)(N.Pv,{position:"top-right"}),(0,s.jsx)(P.I,{children:h}),c&&c.modelItem&&(0,s.jsx)(N.GI,{style:{minWidth:"320px"},anchor:"top",longitude:Number(c.location.lon),latitude:Number(c.location.lat),onClose:()=>_({location:{lat:"",lon:""}}),closeButton:!1,children:(0,s.jsx)("div",{className:"  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 _ai-center ",children:(0,s.jsx)(u.G,{initialData:(0,x.E)("loaded",c.modelItem.read()),name:c.modelItem.getId(),spinnerSize:15,loadingText:(0,s.jsxs)("div",{className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ai-center _jc-center ",children:["Loading data...",(0,s.jsx)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-bold _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto font_body "})]}),objectId:c.modelItem.getId(),sourceUrl:o.sourceUrl+"/"+c.modelItem.getId(),mode:"preview",model:o.model,extraFields:o.extraFields,icons:o.icons,customFields:o.customFields,columnWidth:270,onDelete:o.onDelete,deleteable:o.deleteable,extraMenuActions:o.extraMenuActions})})})]}):(0,s.jsx)(a.FA,{flex:1,alignItems:"center",justifyContent:"center",space:"$4",mt:"$-10",children:(0,s.jsxs)(I.Z,{children:[(0,s.jsx)(y.u,{size:"$7"}),(0,s.jsxs)("h2",{className:"  is_H2 _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-1316330269 _mr-0px _mb-0px _ml-0px _tt-230633015 _ff-299667014 _fow-233016295 _ls-167744214 _fos-229441375 _lh-222976728 _ussel-auto font_heading ",children:[(0,s.jsx)("span",{className:"  _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px ",children:"Missing "}),(0,s.jsx)(P.I,{children:(0,s.jsx)("span",{className:"  _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _col-137137640 ",children:"API Key"})})]}),(0,s.jsx)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-1316330269 _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-233016233 _ls-167744152 _fos-229441313 _lh-222976666 _ussel-auto _ta-center font_body ",children:"Map rendering is unavailable without a Mapbox access token."}),(0,s.jsx)(P.I,{children:(0,s.jsxs)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-233016233 _ls-167744152 _fos-229441313 _lh-222976666 _ussel-auto _ta-center font_body ",children:["Please visit ",(0,s.jsx)("a",{style:{fontWeight:"bold",color:"var(--color10)"},href:"https://www.mapbox.com",target:"_blank",rel:"noopener noreferrer",children:"Mapbox"})," to create your token and enable map features."]})})]})})})};r(51185);var O=r(96666),$=r(10347),A=r(51813),E=r(65126),D=r(91681),F=r(53726),Z=r(68604),T=r(81815),L=r(99062),z=r(57909),M=r(57441),R=r(40641),q=r(62624),U=r(42738),W=r(30195),B=r(53763),V=r(9393),J=r(57643),G=r(82695),H=r(94038),X=r(26879),K=r(50897),Y=r(1963),Q=r(61773),ee=r(96455);let et=e=>{var t,r,a;let{sourceUrl:i,onDelete:n=()=>{},deleteable:o=()=>{},extraMenuActions:d=[],enableAddToInitialData:c}=e,{items:_,model:p,selected:m,setSelected:u,state:x,push:h,replace:f,mergePush:b,tableColumns:v,rowIcon:g,onSelectItem:w}=(0,l.useContext)(e_),j=[{when:e=>m.some(t=>t.id===p.load(e).getId()),style:{backgroundColor:"var(--color4)"},"&:hover":{backgroundColor:"var(--color4)"}}],y=p.load({}),N=y.getObjectSchema().isDisplay("table"),S=["ZodString","ZodNumber","ZodBoolean"],I=null!=v?v:K.Z.columns(...Object.keys(N.shape).filter(e=>{var t;return S.includes(null===(t=N.shape[e]._def)||void 0===t?void 0:t.typeName)}).map(e=>{var t;return K.Z.column(null!==(a=null===(t=N.shape[e]._def)||void 0===t?void 0:t.label)&&void 0!==a?a:e,e,!0)}));return(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _pt-1481558276 _fw-wrap ",children:(0,s.jsx)(P.I,{children:(0,s.jsx)(K.Z.component,{pagination:!1,conditionalRowStyles:j,rowsPerPage:x.itemsPerPage?x.itemsPerPage:25,handleSort:(e,t)=>b({orderBy:e.selector,orderDirection:t}),handlePerRowsChange:e=>h("itemsPerPage",e),handlePageChange:e=>h("page",parseInt(e,10)-1),currentPage:(isNaN(parseInt(x.page,10))?0:parseInt(x.page,10))+1,totalRows:null==_?void 0:null===(t=_.data)||void 0===t?void 0:t.total,columns:[K.Z.column((0,s.jsx)(H.Q2,{reset:!0,children:(0,s.jsxs)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 ",children:[(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mt-1481558214 _ml-1481558152 _o-0d0t846 ",children:(0,s.jsx)(X.XZ,{focusStyle:{outlineWidth:0},checked:m.length>1,onPress:e=>{if(m.length)u([]);else{var t,r;console.log("selection all: ",null==_?void 0:null===(t=_.data)||void 0===t?void 0:t.items),u(null==_?void 0:null===(r=_.data)||void 0===r?void 0:r.items)}},children:(0,s.jsx)(X.XZ.Indicator,{children:(0,s.jsx)(Y.G,{})})})}),m.length>1&&(0,s.jsx)(ee.o,{enableAddToInitialData:c,type:"bulk",mt:"1px",ml:"-5px",element:m,sourceUrl:i,deleteable:o,onDelete:n,extraMenuActions:d})]})}),"",!1,e=>(0,s.jsx)(H.Q2,{reset:!0,children:(0,s.jsxs)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ml-1481558152 _o-0d0t846 ",children:[(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mt-1481558214 ",children:(0,s.jsx)(X.XZ,{focusStyle:{outlineWidth:0},onPress:()=>{let t=e=>p.load(e).getId(),r=t(e),s=m.some(e=>t(e)===r);s?u(m.filter(e=>t(e)!==r)):u([...m,e])},checked:m.some(t=>p.load(t).getId()===p.load(e).getId()),children:(0,s.jsx)(X.XZ.Indicator,{children:(0,s.jsx)(Q.J,{})})})}),(0,s.jsx)(ee.o,{enableAddToInitialData:c,type:"item",ml:"-5px",mt:"1px",element:p.load(e),sourceUrl:i+"/"+p.load(e).getId(),deleteable:o,onDelete:n,extraMenuActions:d}),g&&(0,s.jsx)(P.I,{children:(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _o-0d0t846 _ml-1481558214 _t-6px ",children:l.createElement(g,{size:"$1",color:"$color7"})})})]})}),!0,g?"115px":"75px"),...I],rows:null==_?void 0:null===(r=_.data)||void 0===r?void 0:r.items,onRowPress:e=>w?w(p.load(e)):f("item",p.load(e).getId())})})})};r(1435);var er=r(61667),es=r(48859),ea=r(95753),ei=r(46835),en=r(71932),eo=r(5632);let el="  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ml-1316330238 _ai-center ",ed="  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ai-center _ml-1481558152 ",ec="  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-233016140 _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto font_body ",e_=(0,l.createContext)({items:(0,x.E)("pending"),model:null,selected:[],setSelected:e=>null,onSelectItem:void 0,state:{},push:()=>null,mergePush:()=>null,removePush:()=>null,replace:()=>null,tableColumns:[],rowIcon:null,sourceUrl:""});function ep(e){let{onSelectItem:t,itemData:r,rowIcon:d,disableViewSelector:c=!1,initialItems:p,sourceUrl:m,numColumnsForm:h=1,name:f,pluralName:b,entityName:g,hideAdd:w=!1,enableAddToInitialData:y=!1,pageState:N,icons:S={},model:k,extraFields:H={},columns:X,onEdit:K=e=>e,onDelete:Y=e=>e,onAdd:Q=e=>e,views:ep,extraViews:em=[],openMode:eu="edit",disableToggleMode:ex,customFields:eh={},dataTableRawProps:ef={},dataTableListProps:eb={},dataTableGridProps:ev={},dataMapProps:eg={},extraFieldsForms:ew={},extraFieldsFormsEdit:ej={},extraFieldsFormsAdd:ey={},customFieldsForms:eN={},defaultView:eS="list",disableViews:eP=[],toolBarContent:eI=null,onAddButton:ek,extraMenuActions:eC=[],deleteable:eO=()=>!0,objectProps:e$={},refreshOnHotReload:eA=!1}=e,eE=null!==(e6=null!=g?g:b)&&void 0!==e6?e6:f+"s",{query:eD}=(0,eo.useRouter)(),[eF,eZ]=(0,l.useState)(null!=N?N:eD),eT=async e=>{let t=await o.bl.get({url:m,...eF});e(t)},[eL,ez]=_(p,eT,"notifications/"+k.load({}).getModelName()+"/#",k),[eM,eR]=(0,l.useState)(null!=p?p:(0,x.E)("pending")),[eq,eU]=(0,l.useState)(!1),{push:eW,mergePush:eB,removePush:eV,replace:eJ}=(0,G.N)(eF),[eG,eH]=(0,l.useState)([]),[eX,eK]=(0,l.useState)(r),{search:eY,setSearch:eQ,setSearchName:e0}=(0,l.useContext)(ei.c),e1=eC&&eC.some(e=>e.menus&&e.menus.includes("global"));(0,G.v)(eZ),(0,l.useEffect)(()=>{},[]),(0,l.useEffect)(()=>{eL&&eL.isLoaded&&eR(eL)},[eL]),(0,J.rf)(()=>{eY?eW("search",eY,!1):eV("search")},[eY]),(0,l.useEffect)(()=>{e0(eE)}),(0,J.rf)(()=>{eT(ez)},[eF.orderBy+"_"+eF.itemsPerPage+"_"+eF.page+"_"+eF.search+"_"+eF.orderDirection]);let e2=(0,B.Py)();var e4,e5,e3,e6,e9,e7,e8,te=[{name:"list",icon:L.a,component:et,props:{sourceUrl:m,deleteable:eO,onDelete:async e=>{if(Array.isArray(eG)&&eG.length&&m){let e=eG.map(e=>o.bl.get("".concat(m,"/").concat(k.load(e).getId(),"/delete")));await Promise.all(e),eH([])}else m&&await o.bl.get("".concat(e,"/delete"));Y({sourceUrl:e,selected:eG})},enableAddToInitialData:y,extraMenuActions:eC,...eb}},{name:"grid",icon:T.J,component:v,props:{mt:"$8",model:k,items:null==eL?void 0:null===(e4=eL.data)||void 0===e4?void 0:e4.items,sourceUrl:m,customFields:eh,extraFields:H,icons:S,ml:"$5",deleteable:eO,onDelete:async e=>{await o.bl.get(e+"/delete"),Y({sourceUrl:e,selected:eG})},onSelectItem:t||(e=>eJ("item",e.getId())),extraMenuActions:eC,...ev}},{name:"raw",icon:z.S,component:j,props:{mt:"$8",onDelete:async e=>{await o.bl.get("".concat(m,"/").concat(e,"/delete")),Y({sourceUrl:m,selected:eG,key:e})},...ef}}];let tt={name:"map",icon:U.$,component:C,props:{mt:"$3",onDelete:async e=>{await o.bl.get("".concat(m,"/").concat(e,"/delete"))},...eg}},tr=k.load({}).getObjectSchema().is("location");tr.getFields().length&&(te=[...te,tt]);let ts=(null!=ep?ep:[...te,...em]).filter(e=>!eP.includes(e.name)),ta=-1!=ts.findIndex(e=>e.name==eF.view)?ts.findIndex(e=>e.name==eF.view):ts.findIndex(e=>e.name==eS),ti=e=>{let t=e.split("/");return t.pop()},tn=eM&&eM.isLoaded?Math.ceil((null===(e5=eM.data)||void 0===e5?void 0:e5.total)/(null===(e3=eM.data)||void 0===e3?void 0:e3.itemsPerPage)):0;return eL&&eL.isError?(0,s.jsxs)(I.Z,{children:["Error: ",eL.error&&eL.error.error?eL.error.error:eL.error]}):(0,s.jsx)(O.Z,{atom:eM,children:(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _h-10037 _fg-1 ",children:(0,s.jsx)(e_.Provider,{value:{items:eM,sourceUrl:m,model:k,selected:eG,setSelected:eH,onSelectItem:t,state:eF,push:eW,mergePush:eB,removePush:eV,replace:eJ,tableColumns:X,rowIcon:d},children:(0,s.jsxs)($.Z,{initialState:-1==ta?0:ta,children:[(0,s.jsx)(A.a,{integratedChat:!0,p:"$0",hideAccept:!0,setOpen:e=>{eV("editFile")},open:eF.editFile,children:(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _pt-1316330145 _h-90vh _w-90vw ",children:(0,s.jsx)(es.l,{id:"file-widget-"+ti(null!==(e9=eF.editFile)&&void 0!==e9?e9:"").split(".")[0],isFull:!1,hideCloseIcon:!1,isModified:!1,setIsModified:()=>{},icons:[(0,s.jsx)(ea.q,{onPress:()=>{eV("editFile")},children:(0,s.jsx)(M.X,{color:"var(--color)",size:"$1"})})],currentFileName:ti(null!==(e7=eF.editFile)&&void 0!==e7?e7:""),currentFile:eF.editFile})})}),(0,s.jsx)(A.a,{integratedChat:!0,p:"$2",pt:"$5",pl:"$5",setOpen:eU,open:eq,hideAccept:!0,description:"",children:(0,s.jsx)(a.FA,{f:1,jc:"center",ai:"center",id:"admin-dataview-create-dlg",children:(0,s.jsx)(i.p,{maxHeight:"90vh",children:(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mr-1316330238 ",children:(0,s.jsx)(u.G,{id:"admin-eo",name:f,numColumns:h,mode:"add",onSave:async(e,t)=>{try{let e=k.load(t),r=eL.data.items.find(t=>t.id===e.getId());if(r)throw{error:"This id already exists"};let s=await o.bl.post(m,Q(e.create().getData()));if(s.isError)throw s.error;eU(!1),e2.show(f+" created",{message:e.getId()})}catch(e){throw console.log("original error: ",e,e.flatten()),(0,x.E)("error",null,e instanceof W.z.ZodError?e.flatten():e)}},model:k,extraFields:{...H,...ew,...ey},icons:S,customFields:{...eh,...eN},...e$})})})})}),(0,s.jsx)(A.a,{integratedChat:!0,p:"$1",pt:"$5",pl:"$5",hideAccept:!0,acceptCaption:"Save",setOpen:e=>{eK(void 0),eV("item")},open:eF.item,description:"",children:(0,s.jsx)("div",{className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 _jc-center _ai-center ",children:(0,s.jsx)(i.p,{maxHeight:"90vh",children:(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mr-1316330238 ",children:(0,s.jsx)(u.G,{disableToggleMode:ex,initialData:eX,name:f,spinnerSize:75,loadingText:(0,s.jsxs)("div",{className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ai-center _jc-center ",children:["Loading data for ",f,(0,s.jsx)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-bold _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto font_body ",children:eF.item})]}),objectId:eF.item,sourceUrl:m+"/"+eF.item,numColumns:h,mode:eu,onSave:async(e,t)=>{try{eK(void 0);let r=k.load(t).getId(),s=await o.bl.post(m+"/"+r,K(k.load(e).update(k.load(t)).getData()));if(s.isError)throw s.error;let{item:a,...i}=eF;eZ(i),e2.show(f+" updated",{message:"Saved new settings for: "+r})}catch(e){throw(0,x.E)("error",null,e instanceof W.z.ZodError?e.flatten():e)}},model:k,extraFields:{...H,...ew,...ej},icons:S,customFields:{...eh,...eN},...e$})})})})}),(0,s.jsxs)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _pt-1481558152 _pr-1316330300 _pl-1316330300 _mb-1481558276 ",children:[(0,s.jsxs)("div",{className:"  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _l--12px _fg-1 _ai-center ",children:[(0,s.jsx)("p",{className:ec,children:(0,s.jsx)("span",{className:"  _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _fos-229441251 _col-137137671 ",children:b?b.charAt(0).toUpperCase()+b.slice(1):f.charAt(0).toUpperCase()+f.slice(1)+"s"})}),e1?(0,s.jsx)(P.I,{children:(0,s.jsx)(ee.o,{type:"global",sourceUrl:"",hideDeleteButton:!0,element:"",extraMenuActions:eC})}):(0,s.jsx)(s.Fragment,{}),eI]}),(0,s.jsxs)("div",{className:"  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ai-center ",children:[(0,s.jsx)("div",{className:ed,children:eM.isLoaded&&(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ml-1481558214 ",children:(0,s.jsxs)("div",{className:el,children:[(0,s.jsx)("div",{className:el,children:(0,s.jsxs)("span",{className:"  _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _fos-14px _col-137137640 ",children:[eM.data.itemsPerPage*eM.data.page+1,"-",Math.min(eM.data.total,eM.data.itemsPerPage*(eM.data.page+1))," of ",eM.data.total]})}),(0,s.jsxs)(P.I,{children:[(0,s.jsx)(en.z,{Icon:R.s,onPress:e=>{e.stopPropagation(),eM.data.page>0&&eW("page",eM.data.page-1)},ml:"$3",disabled:!(eM.data.page>0)}),(0,s.jsx)("span",{className:"  is_Spacer _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-1481558152 _miw-1481558152 _fs-0 _pe-none _w-1481558152 _h-1481558152 "}),(0,s.jsx)(en.z,{Icon:q._,onPress:e=>{e.stopPropagation(),eM.data.page<tn-1&&eW("page",eM.data.page+1)},ml:"$3",disabled:!(eM.data.page<tn-1)})]})]})})}),(0,s.jsxs)("div",{className:ed,children:[!c&&(0,s.jsx)(E.Z,{marginRight:"$3",children:ts.map((e,t)=>(0,s.jsx)(D.Z,{onSetActive:()=>eW("view",e.name),activeId:t,children:l.createElement(e.icon,{size:"$1",strokeWidth:1})},t))}),!w&&(0,s.jsx)(P.I,{children:(0,s.jsx)(n.zx,{id:"admin-dataview-add-btn",hoverStyle:{o:1},o:.7,circular:!0,onPress:()=>{ek?ek():eU(!0)},chromeless:!0,children:(0,s.jsx)(Z.v,{color:"$color10"})})})]})]})]}),eL&&eL.isError&&(0,s.jsx)(F.q,{children:(0,s.jsx)("p",{className:ec,children:(0,V.e)(eL.error)})}),(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 ",children:(0,s.jsx)(O.Z,{atom:eM,children:ts.map((e,t)=>(0,s.jsx)(er.Z,{height:"100%",activeId:t,children:l.createElement(e.component,{...e.props})},t))})})]})})})})}r(42937)},24066:function(e,t,r){"use strict";r.d(t,{G:function(){return en}});var s=r(52322),a=r(80939),i=r(66306),n=r(8939),o=r(84291),l=r(45734),d=r(59928),c=r(36907),_=r(93559),p=r(60545),m=r(89560),u=r(32627),x=r(60166),h=r(57441),f=r(7324),b=r(99062),v=r(57909),g=r(91838),w=r(51813),j=r(48715),y=r(4273);function N(e){let{showLabel:t=!0,containerProps:r,defaultValue:a,children:i,...o}=e;return(0,s.jsxs)(n.sL,{f:1,...r,children:[(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 ",children:(0,s.jsxs)(y.iR,{f:1,defaultValue:[50],min:0,max:100,step:1,...o,children:[(0,s.jsx)(y.iR.Track,{f:1,children:(0,s.jsx)(y.iR.TrackActive,{})}),(0,s.jsx)(y.iR.Thumb,{index:0,size:"$1",circular:!0,elevate:!0}),i]})}),t&&(0,s.jsx)("div",{className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _fs-0 _ai-flex-end _miw-40px _t--8px ",children:o.value})]})}r(5006);var S=r(6289),P=r(26887),I=r(48115),k=r(99553),C=r(10836),O=r(96666),$=r(53726),A=r(2784),E=r(9393),D=r(55858),F=r(75370),Z=r(57643),T=r(94484),L=r(96455);function z(e){let{choices:t,defaultSelections:r=[],onSetSelections:a,maxHeight:i="150px"}=e,o=(0,A.useRef)(null),[l,d]=(0,A.useState)(!1),[c,_]=(0,A.useState)(r),p=(e,r)=>{let s=t[t.indexOf(r)];if(c.includes(s)){let e=c.filter(e=>e!==s);a(e),_(e)}else{let e=c.concat(s);a(e),_(e)}};return(0,s.jsx)(g.I,{children:(0,s.jsxs)("div",{ref:o,onClick:()=>d(e=>!e),className:"  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0  _bg-115898854 _w-10037 _h-797770429 _jc-441309761 _ai-center _pr-10px _pl-10px _pt-7px _pb-7px _btlr-6px _btrr-6px _bbrr-6px _bblr-6px _outlineColor-791969495 _outlineWidth-1px _outlineStyle-solid _btc-791969495 _brc-791969495 _bbc-791969495 _blc-791969495 _cur-pointer ",children:[(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fw-wrap _h-797770429 _ox-hidden _oy-hidden _fg-1 _gap-1481558245 ",children:c.length>0?c.map((e,t)=>(0,s.jsx)("p",{onClick:t=>p(t,e),className:"  is_Paragraph _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-233016140 _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto font_body  _pr-7px _pl-7px _pt-4px _pb-4px _bg-549765356 _btlr-4px _btrr-4px _bbrr-4px _bblr-4px _col-white ",children:e},t)):(0,s.jsx)("p",{className:"  is_Paragraph _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _col-791969557 _ff-299667014 _fow-233016140 _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto _pr-7px _pl-7px _pt-4px _pb-4px _btlr-4px _btrr-4px _bbrr-4px _bblr-4px font_body ",children:"Select"})}),(0,s.jsx)(x._,{}),l?(0,s.jsx)(n.FA,{zIndex:999,position:"absolute",top:"130%",left:"0%",width:"100%",backgroundColor:"$gray1",paddingHorizontal:"7px",paddingVertical:"7px",borderRadius:4,outlineColor:"$gray6",outlineWidth:1,outlineStyle:"solid",borderColor:"$borderColor",maxHeight:i,gap:"$1.5",overflow:"scroll",children:t.map((e,t)=>c.includes(e)?(0,s.jsx)("p",{onClick:t=>p(t,e),className:"  is_Paragraph _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ussel-auto   _cur-0hover-pointer _pr-10px _pl-10px _pt-7px _pb-7px _btlr-4px _btrr-4px _bbrr-4px _bblr-4px _fos-229441220 _col-675002279 _ff-299667014 _fow-233016140 _ls-167744059 _lh-222976573 _bg-549765356 font_body ",children:e},t):(0,s.jsx)("p",{onClick:t=>p(t,e),className:"  is_Paragraph _bg-0hover-744986709 _cur-0hover-pointer _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _col-675002279 _ff-299667014 _fow-233016140 _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto _pr-10px _pl-10px _pt-7px _pb-7px _btlr-4px _btrr-4px _bbrr-4px _bblr-4px font_body ",children:e}))}):null]})})}r(94611);var M=r(70396);let R="  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 ",q="  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 _mt-1316330145 ",U=" _mt-1481558400",W=" _mt-1481558214",B=" _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0  _ml-1481558276  ",V="  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 ",J=e=>e&&e[0].toUpperCase()+e.slice(1),G={color:"var(--color9)",size:"$1",strokeWidth:1},H=e=>{var t;let{ele:r,i,icon:n,children:o,inArray:l=!1}=e;return(0,s.jsxs)("fieldset",{className:(0,M.concatClassName)("  is_Fieldset _ai-stretch _dsp-flex _fd-column _bxs-border-box _pos-relative _mih-0px _miw-0px  _gap-1481558214 _fg-1 _fs-1 _fb-auto  "+(i?" _ml-1316330238":" _ml-1481558400")),children:[!l&&(0,s.jsxs)(a.__,{fontWeight:"bold",children:[(0,s.jsx)(g.I,{children:(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mr-1481558214 ",children:A.createElement(n,G)})}),null!==(t=r._def.label)&&void 0!==t?t:r.name]}),l&&(0,s.jsx)("span",{className:"  is_Spacer _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-1481558276 _miw-1481558276 _fs-0 _pe-none _w-1481558276 _h-1481558276 "}),o]},i)},X={ZodString:"",ZodNumber:"0",ZodBoolean:!0,default:""},K=e=>X.hasOwnProperty(e)?X[e]:"ZodArray"==e?[]:"ZodObject"==e?{}:X.default,Y=e=>{var t;let{ele:r,elementDef:a,icon:n,path:o,arrData:l,getElement:d,setFormData:c,data:_,setData:p,mode:u,customFields:x}=e;return(0,s.jsxs)(er,{ele:r,title:" ("+l.length+")",icon:v.S,path:o,children:[(0,s.jsx)("div",{className:V,children:l.map((e,t)=>(0,s.jsxs)("div",{className:(0,M.concatClassName)(""+(B+(t?W:U))),children:["ZodObject"!=a.type._def.typeName&&(0,s.jsx)(g.I,{children:(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mr-1481558214 _t-20px ",children:"edit"==u||"add"==u?(0,s.jsx)(m.z,{...G}):(0,s.jsx)(f.$,{...G})})}),d({ele:{...a.type._def,_def:a.type._def,name:t},icon:n,i:0,x:0,data:_,setData:p,mode:u,customFields:x,path:[...o,r.name],inArray:!0,arrayName:r.name}),("edit"==u||"add"==u)&&(0,s.jsx)("div",{onClick:()=>{l.splice(t,1),c(r.name,[...l])},className:(0,M.concatClassName)(" _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ml-1481558214 _t-13px _btlr-1307610029 _btrr-1307610029 _bbrr-1307610029 _bblr-1307610029 _pt-1481558214 _pr-1481558214 _pb-1481558214 _pl-1481558214 _als-flex-start _cur-pointer  _bg-0hover-312414245 _o-0active-0d0t746  "+("ZodObject"!=a.type._def.typeName?" ":"  _pos-absolute _r-1316330269 _t-6px")),children:(0,s.jsx)(h.X,{color:"var(--red7)",strokeWidth:2,size:20})})]},t))}),("edit"==u||"add"==u)&&(0,s.jsxs)(i.zx,{mt:"$4",onPress:()=>{let e="ZodLazy"==r._def.typeName?r._def.getter()._def:r._def;"ZodOptional"==e.typeName?e.innerType._def.type._def.typeName:e.type._def.typeName,c(r.name,[...l,K(a.type._def.typeName)])},children:["Add",null!==(t=r._def.label)&&void 0!==t?t:r.name]})]})},Q=e=>{let{ele:t,elementDef:r,icon:a,path:i,data:n,setData:o,mode:l,customFields:d,inArray:c,arrayName:_,getFormData:p}=e;return(0,s.jsx)(er,{simple:!0,ele:t,title:c?t._def.keyName?p(t._def.keyName,[...i,t.name]):_+" #"+(t.name+1):t.name,icon:b.a,path:i,children:(0,s.jsx)("div",{className:V,children:Object.keys(r.shape()).map((e,c)=>{let _=r.shape();return(0,s.jsx)("div",{className:(0,M.concatClassName)(" _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0  "+(c?" _mt-1316330238":U)),children:es({ele:{..._[e],name:e},icon:a,i:0,x:0,data:n,setData:o,mode:l,customFields:d,path:[...i,t.name]})},c)})})})},ee=e=>{let{ele:t,icon:r,i:a,inArray:i,eleArray:n,formData:o,generatedOptions:l,setFormData:d}=e,c=["ZodNumber","ZodString","ZodLiteral"],_=n.map(e=>c.includes(e.typeName)?String(e.value):JSON.stringify(e.value));return(0,s.jsx)(H,{ele:t,icon:r,i:a,inArray:i,children:(0,s.jsx)(z,{choices:l.length?l:_,defaultSelections:o,onSetSelections:e=>d(t.name,e)})})},et=e=>{let{ele:t,inArray:r,recordData:a,elementDef:l,icon:d,data:c,setData:_,mode:p,customFields:m,path:u,setFormData:x}=e,[h,f]=(0,A.useState)(!1),[v,g]=(0,A.useState)(""),j=(0,A.useRef)(null),[y,N]=(0,A.useContext)(ei);(0,A.useEffect)(()=>{if(h){let e=setTimeout(()=>{var e;null===(e=j.current)||void 0===e||e.focus()},100);return()=>clearTimeout(e)}},[h]);let S=async()=>{let e=K(t._def.valueType._def.typeName),r=[...u,t.name,v].join("/");f(!1),g(""),N(function(e,t){let r=t.substring(0,t.lastIndexOf("/")+1),s=e.filter(e=>!e.startsWith(r)||e===r);return s.push(t),s}(y,r)),x(t.name,{...a,[v]:e})};return(0,s.jsxs)(er,{ele:t,title:r?" #"+(t.name+1):"...",icon:b.a,path:u,children:[(0,s.jsx)("div",{className:V,children:a?Object.keys(a).map((e,r)=>(0,s.jsx)("div",{className:(0,M.concatClassName)(""+(B+(r?W:U))),children:es({ele:{...l.valueType,name:e},icon:d,i:0,x:0,data:c,setData:_,mode:p,customFields:m,path:[...u,t.name]})},r)):null}),(0,s.jsx)(w.a,{acceptCaption:"Add field",setOpen:f,open:h,onAccept:S,title:"Add new field",description:"",children:(0,s.jsx)(n.FA,{f:1,id:"eo-add-field-input",alignItems:"center",mt:"$6",justifyContent:"center",children:(0,s.jsx)(o.II,{f:1,value:v,onChangeText:e=>g(e),textAlign:"center",id:"name",placeholder:"Field name...",ref:j,onKeyPress:e=>{"Enter"===e.key&&S()}})})}),("edit"==p||"add"==p)&&(0,s.jsx)(i.zx,{id:"eo-obj-comp-btn",mt:"$5",onPress:()=>{f(!0)},children:" Add field"})]})},er=e=>{let{ele:t,title:r,children:a,icon:i,simple:o=!1,path:c}=e,[_,p]=(0,A.useContext)(ei),m=[...c,t.name].join("/"),u=(0,s.jsx)(n.sL,{mb:"$2",id:"eo-formgroup",br:"$5",f:1,elevation:_.includes(m)?10:0,hoverStyle:{elevation:10},children:(0,s.jsx)(l.U,{value:_,onValueChange:e=>p(e),onPress:e=>e.stopPropagation(),type:"multiple",boc:"$gray6",f:1,children:(0,s.jsxs)(l.U.Item,{br:"$5",bw:1,boc:"$gray6",value:m,children:[(0,s.jsx)(l.U.Trigger,{p:0,px:8,height:43,bc:"$transparent",focusStyle:{bc:"$transparent"},br:_.includes(m)?"$0":"$5",btlr:"$5",btrr:"$5",bw:"$0",flexDirection:"row",ai:"center",children:e=>{let{open:t}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.I,{children:o?A.createElement(i,G):(0,s.jsx)(s.Fragment,{})}),(0,s.jsx)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-1481558214 _ff-299667014 _fow-233016140 _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto font_body ",children:r}),(0,s.jsx)("span",{className:"  is_Spacer _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-1316330176 _miw-1316330176 _fs-1 _w-1316330176 _h-1316330176 _pe-none _fg-1 "}),(0,s.jsx)(d.b,{animation:"quick",rotate:t?"180deg":"0deg",children:(0,s.jsx)(x._,{size:"$1"})})]})}}),(0,s.jsx)(l.U.Content,{br:"$5",children:a})]})})});return o?u:(0,s.jsx)(H,{ele:t,icon:i,i:0,children:u})},es=e=>{var t,r,a,i,n,l;let{ele:d,icon:_,i:p,x:m,data:u,setData:x,mode:h,customFields:f={},path:b=[],inArray:v=!1,arrayName:w=""}=e,y=null!==(a=null===(r=d._def)||void 0===r?void 0:null===(t=r.innerType)||void 0===t?void 0:t._def)&&void 0!==a?a:d._def,S=(e,t)=>{let r=u;b.forEach(e=>{Array.isArray(r)||r.hasOwnProperty(e)||(r[e]={}),r=r[e]}),r[e]=t,x({data:u})},P=(e,t)=>{let r=null!=u?u:{};for(let e of null!=t?t:b)("object"==typeof r&&r.hasOwnProperty(e)||Array.isArray(r)&&r.length>e)&&(r=r[e]);return"string"==typeof r?r:r&&r.hasOwnProperty(e)?r[e]:""},I=y.typeName;if("ZodLazy"==I){let e=y.getter();y=e._def,I=e.constructor.name,e.name=d.name,d=e}if(f.hasOwnProperty(d.name)||f.hasOwnProperty("*")){let e=f.hasOwnProperty(d.name)?f[d.name]:f["*"],t="function"==typeof e.component?e.component(b,P(d.name),e=>S(d.name,e),h,u):e.component;if(t)return e.hideLabel?t:(0,s.jsx)(H,{ele:d,icon:_,i:p,inArray:v,children:t})}if("ZodUnion"==I&&"preview"!=h){let e=y.displayOptions?y.displayOptions:y.options.map(e=>e._def.value),t=y.options.map(e=>e._def.value);d._def.dependsOn&&u&&u[d._def.dependsOn]&&"function"==typeof d._def.generateOptions&&(t=[...e=d._def.generateOptions(u)]);let r=d._def.dependsOn,a=d._def.dependsOnValue;return(0,s.jsx)(H,{ele:d,icon:_,i:p,inArray:v,children:r?u[r]?a?a==u[r]?(0,s.jsx)(j.E,{f:1,data:u,title:d.name,elements:e,value:e[t.indexOf(P(d.name))],setValue:r=>S(d.name,t[e.indexOf(r)])}):(0,s.jsx)(o.II,{focusStyle:{outlineWidth:1},disabled:!0,placeholder:d._def.hint?d._def.hint:"Fill "+r+" property first",bc:"$backgroundTransparent"}):(0,s.jsx)(j.E,{f:1,data:u,title:d.name,elements:e,value:e[t.indexOf(P(d.name))],setValue:r=>S(d.name,t[e.indexOf(r)])}):(0,s.jsx)(o.II,{focusStyle:{outlineWidth:1},disabled:!0,placeholder:d._def.hint?d._def.hint:"Fill "+r+" property first",bc:"$backgroundTransparent"}):(0,s.jsx)(j.E,{f:1,data:u,title:d.name,elements:e,value:e[t.indexOf(P(d.name))],setValue:r=>S(d.name,t[e.indexOf(r)])})})}if("ZodNumber"==I&&"preview"!=h){if(y.checks){let e=y.checks.find(e=>"min"==e.kind),t=y.checks.find(e=>"max"==e.kind);if(e&&t)return(0,s.jsx)(H,{ele:d,icon:_,i:p,inArray:v,children:(0,s.jsx)(g.I,{children:(0,s.jsx)("div",{className:q,children:(0,s.jsx)(N,{onValueChange:e=>S(d.name,e),value:[null!==(i=P(d.name))&&void 0!==i?i:e.value],width:190,min:e.value,max:t.value})})})})}}else if("ZodObject"==I)return(0,s.jsx)(Q,{ele:d,elementDef:y,icon:_,path:b,data:u,setData:x,mode:h,customFields:f,inArray:v,arrayName:w,getFormData:P});else if("ZodArray"==I){let e=P(d.name)?P(d.name):[],t=[];"function"==typeof d._def.generateOptions&&(t=d._def.generateOptions(u));let r=!d._def.innerType&&"ZodUnion"===d._def.type._def.typeName;return r?(0,s.jsx)(ee,{ele:d,icon:_,i:p,inArray:v,eleArray:d._def.type._def.options,formData:e,generatedOptions:t,setFormData:S}):(0,s.jsx)(Y,{data:u,setData:x,mode:h,ele:d,elementDef:y,icon:_,customFields:f,path:b,arrData:e||t,getElement:es,setFormData:S})}else if("ZodRecord"==I){let e=P(d.name);return(0,s.jsx)(et,{ele:d,inArray:v,recordData:e,elementDef:y,icon:_,data:u,setData:x,mode:h,customFields:f,path:b,setFormData:S})}else if("ZodBoolean"==I){let e=P(d.name);return(0,s.jsx)(H,{ele:d,icon:_,i:p,inArray:v,children:(0,s.jsx)(g.I,{children:(0,s.jsx)("div",{className:q,children:(0,s.jsx)(c.rs,{disabled:"add"!=h&&"edit"!=h,checked:e,onCheckedChange:e=>S(d.name,e),size:"$2",children:(0,s.jsx)(c.rs.Thumb,{animation:"quick"})})})})})}let k="";return"function"!=typeof d._def.generateOptions||(k=d._def.generateOptions(),P(d.name)||S(d.name,k)),(0,s.jsx)(H,{ele:d,icon:_,i:p,inArray:v,children:(0,s.jsx)("div",{className:R,children:(0,s.jsx)(o.II,{id:"editable-object-input-"+(null==d?void 0:d.name),..."edit"!=h&&"add"!=h?{bw:0,forceStyle:"hover"}:{},focusStyle:{outlineWidth:1},disabled:"view"==h||"preview"==h||"edit"==h&&d._def.static||d._def.dependsOn&&!u[d._def.dependsOn],secureTextEntry:d._def.secret,value:k&&!P(d.name)?k:P(d.name),onChangeText:e=>S(d.name,"ZodNumber"==d._def.typeName?e.replace(/[^0-9.-]/g,""):e),placeholder:u?null!==(l=null!==(n=d._def.hint)&&void 0!==n?n:d._def.label)&&void 0!==l?l:"number"==typeof d.name?"...":d.name:"",autoFocus:0==m&&0==p,onBlur:()=>{if("ZodNumber"==d._def.typeName){let e=parseFloat(P(d.name));isNaN(e)||S(d.name,e)}},bc:"$backgroundTransparent"})})})},ea=e=>{let{index:t,data:r,width:a}=e;r.ele._def.size,r.ele._def.numColumns;let i=r.ele._def.size||1;return(0,s.jsx)(n.sL,{f:1,width:a*i+(i-1)*(r.columnMargin/i),children:es({ele:r.ele,icon:r.icon,i:r.i,x:r.x,data:r.data||r.defaultData,setData:r.setData,mode:r.mode,customFields:r.customFields})},r.x)},ei=(0,A.createContext)([[],e=>{}]),en=e=>{let{externalErrorHandling:t,error:r,setError:a,data:o,setData:l,EditIconNearTitle:d=!1,autoWidth:c=!1,columnMargin:x=30,columnWidth:f=350,extraMenuActions:b,disableToggleMode:v,name:j,initialData:y,loadingTop:N,spinnerSize:z,loadingText:q,title:W,sourceUrl:B=null,onSave:G,mode:H="view",model:X,icons:K={},extraFields:Y={},numColumns:Q=1,objectId:ee,onDelete:et=()=>{},deleteable:er=()=>!0,customFields:es={},...en}=e,[eo,el]=(0,A.useState)(null!=y?y:(0,S.E)("pending")),[ed,ec]=(0,A.useState)(H),[e_,ep]=(0,A.useState)(""),[em,eu]=(0,A.useState)(eo),ex=o&&l;o&&l||(o=em,l=eu);let[eh,ef]=(0,A.useState)(!1),[eb,ev]=(0,A.useState)();r&&a||t||(r=eb,a=ev);let[eg,ew]=(0,A.useState)(!1),[ej,ey]=(0,A.useState)(!1),[eN,eS]=(0,A.useState)(!1),eP=(0,A.useRef)(),[eI,ek]=(0,A.useState)([]);(0,P.a)(e=>{"add"!=H&&I.bl.get(B,e)},el,y),(0,A.useEffect)(()=>{eo.data&&l(eo)},[eo]),(0,Z.rf)(()=>ec(H),[H]),(0,Z.rf)(()=>{eN?ey(!0):eS(!0)},[o]);let eC=(0,A.useMemo)(()=>{let e=X.load(o.data),t=D.U.load(F.V_.object(Y)),r=e.getObjectSchema().isDisplay(ed).merge(t).getLayout(1),s={},a={};return r.forEach((e,t)=>e.forEach((e,r)=>{var i,n;let d=K[e.name]?K[e.name]:"edit"==ed||"add"==ed?m.z:u.V,c=null!==(i=e._def.group)&&void 0!==i?i:0;s.hasOwnProperty(c)||(s[c]=[]),e._def.hasOwnProperty("defaultValue")&&(a[e.name]=e._def.defaultValue),s[c].push({id:t+"_"+r,icon:d,i:r,x:t,ele:e,data:o.data,setData:l,mode:ed,size:null!==(n=e._def.size)&&void 0!==n?n:1,numColumns:Q,customFields:es,columnMargin:x,defaultData:a})})),s},[Y,o,X,x,Q,ed,H,eo]),eO=(0,A.useMemo)(()=>Object.keys(eC).map((e,t)=>(0,s.jsxs)(n.sL,{ref:eP,mt:"$0",width:c?"100%":f*Q+x,f:1,children:[(0,s.jsx)("div",{className:R,children:(0,s.jsx)(k.rj,{masonry:!1,containerRef:eP,spacing:x/2,data:eC[e],card:ea,itemMinWidth:f,columns:Q})}),"preview"==ed&&(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _t-1316333121 ",children:(0,s.jsx)(L.o,{type:"item",sourceUrl:B,onDelete:et,deleteable:er,element:X.load(o.data),extraMenuActions:b})})]})),[x,eC,f,Q]),{tint:e$}=(0,T.d5)();return(0,s.jsx)(ei.Provider,{value:[eI,ek],children:(0,s.jsxs)(_.Stack,{width:"100%",...en,children:[(0,s.jsx)(w.a,{showCancel:!0,acceptCaption:"Discard",cancelCaption:"Keep editing",onAccept:async()=>{let e=await I.bl.get(B);el(e),ec("view")},cancelTint:e$,acceptTint:"red",open:eg,setOpen:ew,title:"Are you sure you want to leave?",description:"",children:(0,s.jsx)(C.Z,{mt:"$5",children:"All unsaved changes will be lost"})}),(0,s.jsx)(O.Z,{forceLoad:"add"==ed||o.data,waitForLoading:1e3,spinnerSize:z,loadingText:null!=q?q:"Loading "+ee,top:null!=N?N:-30,atom:o,children:(0,s.jsxs)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _w-10037 ",children:[(0,s.jsxs)("div",{className:"  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ai-center ",children:[(0,s.jsx)(n.sL,{mt:"preview"==ed?"$4":void 0,ml:"preview"==ed?"$4":void 0,id:"eo-dlg-title",children:(0,s.jsxs)("h3",{className:"  is_H3 _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _tt-230632984 _ff-299667014 _fow-233016264 _ls-167744183 _fos-229441344 _lh-222976697 _ussel-auto font_heading ",children:[(0,s.jsx)(g.I,{children:(0,s.jsx)("h3",{className:"  is_H3 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _col-549765294 _tt-230632984 _ff-299667014 _fow-233016264 _ls-167744183 _fos-229441344 _lh-222976697 _ussel-auto font_heading ",children:J(H)})})," ".concat(J(j))]})}),W&&(0,s.jsx)("div",{className:(0,M.concatClassName)(" _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0  _mr-1316330238  "+(d?" _fg-0 _fs-1 _fb-auto":" _fg-1 _fs-1 _fb-auto")),children:(0,s.jsxs)("span",{className:"  _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _fow-bold _fos-40px ",children:[(0,s.jsx)(g.I,{children:(0,s.jsx)("span",{className:"  _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _col-549765294 ",children:J(ed)})}),(0,s.jsxs)("span",{className:"  _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _col-137137671 ",children:[" ",J(j)]})]})}),!v&&("view"==ed||"edit"==ed)&&(0,s.jsx)("div",{onClick:async()=>{"edit"==ed&&ej?ew(!0):(ep(ed),ec("view"==ed?"edit":"view"))},className:"  _o-0active-0d0t846 _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0  _cur-pointer ",children:(0,s.jsx)(g.I,{children:(0,s.jsx)("div",{className:V,children:"view"==ed?(0,s.jsx)(m.z,{color:"var(--color8)"}):"view"==e_?(0,s.jsx)(h.X,{color:"var(--color8)"}):null})})})]}),(0,s.jsxs)("div",{className:(0,M.concatClassName)(" _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _w-10037 _fg-1  _ai-center _jc-center  "+(W?" _mt-1316330300":U)),children:[r&&(0,s.jsx)($.q,{children:(0,s.jsx)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-233016140 _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto font_body ",children:(0,E.e)(r.error)})}),eO,"preview"!=ed&&(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _mt-1316330145 _pt-1481558214 _pr-1481558214 _pb-1316330238 _pl-1481558214 _w-10037 _fg-1 _als-center ",children:("add"==ed||"edit"==ed)&&!ex&&(0,s.jsx)(g.I,{children:(0,s.jsx)(i.zx,{f:1,onPress:async()=>{ef(!0);try{await G(eo.data,o.data),e_!=ed&&ec(e_)}catch(e){a(e),console.log("e: ",e)}ef(!1)},children:eh?(0,s.jsx)(p.$,{}):"add"==ed?"Create":"Save"})})})]})]})})]})})};r(31851)},99553:function(e,t,r){"use strict";r.d(t,{rj:function(){return u}});var s=r(52322),a=r(34612),i=r(8939),n=r(2784),o=r(93559),l=r(23724),d=r(11667),c=r(23510);let _={width:0,height:0},p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],[r,s]=(0,n.useState)(_);return(0,n.useLayoutEffect)(()=>{let{current:t}=e;if(t){let e=()=>{let e=getComputedStyle(t),r=parseFloat,a=t.clientWidth-r(e.paddingTop)-r(e.paddingBottom),i=t.clientHeight-r(e.paddingLeft)-r(e.paddingRight);s({height:i,width:a})};return e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}}},t.concat(e.current)),r},m=e=>{let[t,r]=(0,n.useState)(!1),[s,a]=(0,n.useState)(0);return(0,n.useLayoutEffect)(()=>{let t;let{current:r}=e;if(r){let e=()=>{t||(t=window.requestAnimationFrame(()=>{a(r.scrollTop),t=void 0}))};return r.addEventListener("scroll",e),()=>{r.removeEventListener("scroll",e),t&&window.cancelAnimationFrame(t)}}},[e.current]),(0,n.useLayoutEffect)(()=>{r(!0);let e=window.setTimeout(()=>{r(!1)},1e3/6);return()=>window.clearTimeout(e)},[s]),{scrollTop:s,isScrolling:t}},u=n.forwardRef((e,t)=>{let{overScanBy:r=5,masonry:_=!0,containerRef:u,rightGap:x=0,spacing:h,children:f,data:b,card:v,columns:g,itemMinWidth:w=200,gap:j}=e;if(a.$L&&b&&v){if(_&&u){var y,N;let e={current:(null===(y=u.current)||void 0===y?void 0:y.container)?null==u?void 0:null===(N=u.current)||void 0===N?void 0:N.container.firstChild:u.current},{width:t,height:s}=p(e),{scrollTop:a,isScrolling:i}=m(e),n=(0,l.G)({width:Math.max(0,t-x),columnGutter:h,columnWidth:w}),o=(0,d.y)(n);return(0,c.$)({positioner:n,scrollTop:a,isScrolling:i,height:s,items:b,overscanBy:r,resizeObserver:o,render:v})}return(0,s.jsx)(i.sL,{flexWrap:"wrap",children:b.map((e,t)=>(0,s.jsxs)(o.Stack,{m:h/2,children:[" ",n.createElement(v,{index:e.index,data:{...e},width:w})," "]},t))})}if(a.$L)return(0,s.jsx)("div",{ref:t,style:{gap:j,display:"grid",gridTemplateColumns:"repeat( auto-fill, minmax(".concat(w,"px, 1fr) )")},children:f});let S=n.Children.toArray(f);return(0,s.jsx)(i.sL,{alignItems:"center",justifyContent:"center",flexWrap:"wrap",children:S.map((e,t)=>e?(0,s.jsx)(i.sL,{flex:1,minWidth:w,marginRight:j,marginBottom:j,children:e},t):null)})})},96455:function(e,t,r){"use strict";r.d(t,{o:function(){return u}});var s=r(52322),a=r(8939),i=r(93559),n=r(86838),o=r(51813),l=r(2784),d=r(91838),c=r(10281),_=r(13742),p=r(71932),m=r(13997);let u=e=>{let{type:t,sourceUrl:r="",enableAddToInitialData:u=!1,onDelete:x,element:h,deleteable:f,extraMenuActions:b=[],hideDeleteButton:v,...g}=e,[w,j]=(0,l.useState)(!1),[y,N]=(0,l.useState)(!1),{selected:S,setSelected:P,model:I}=(0,l.useContext)(m.p),k=e=>{let{id:t="",type:r,text:i,Icon:n,onPress:o,disabled:l}=e;return(0,s.jsxs)(a.sL,{id:t,ml:"$1",o:1,br:"$5",p:"$3",als:"flex-start",cursor:l?"default":"pointer",pressStyle:l?{}:{o:.7},hoverStyle:l?{}:{bc:"$color5"},onPress:e=>{l||(o("global"===r?"*":h,e),j(!1))},children:[(0,s.jsx)(n,{size:"$1",color:l?"var(--gray9)":"var(--color9)",strokeWidth:2}),(0,s.jsx)("span",{className:"  _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-1481558152 ",children:i})]})};return(0,s.jsxs)(i.Stack,{...g,children:[(0,s.jsx)(o.a,{acceptCaption:"Delete",setOpen:N,open:y,onAccept:async e=>{await x(r),e(!1)},title:"Delete ",description:"Are you sure want to delete this item?",w:280,children:(0,s.jsx)("div",{className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 _jc-center _ai-center "})}),(0,s.jsxs)(n.J2,{onOpenChange:j,open:w,placement:"bottom",children:[(0,s.jsx)(n.J2.Trigger,{children:(0,s.jsx)(p.z,{id:"more-btn-".concat(r.split("/").slice(-1)),Icon:c.h,onPress:e=>{e.stopPropagation(),j(!0)},ml:"$3"})}),(0,s.jsx)(n.J2.Content,{padding:0,space:0,left:"$7",top:"$2",bw:1,boc:"$borderColor",bc:"$color1",children:(0,s.jsx)(d.I,{children:(0,s.jsx)("div",{onClick:e=>e.stopPropagation(),className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ai-center _jc-center _pt-1481558152 _pr-1481558152 _pb-1481558152 _pl-1481558152 ",children:(0,s.jsxs)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 ",children:[b.map((e,a)=>{var i;return(!e.menus&&"item"===t||e.menus&&(null===(i=e.menus)||void 0===i?void 0:i.includes(t)))&&e.isVisible&&e.isVisible(h)&&(0,s.jsx)(k,{id:"more-btn-".concat(r.split("/").slice(-1),"-option-").concat(a+1),type:t,text:"function"==typeof e.text?e.text(t):e.text,Icon:e.icon,onPress:e.action},a)}),!1,v?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(k,{type:t,text:"Delete",id:"more-btn-".concat(r.split("/").slice(-1),"-delete"),Icon:_.V,disabled:!f(h),onPress:(e,t)=>{t.stopPropagation(),N(!0),j(!1)}})]})})})})]})]})};r(66286)},1888:function(e,t,r){"use strict";r.d(t,{F7:function(){return n},eq:function(){return o}});var s=r(44499),a=r(6429),i=r(48115);let n=e=>s.l.SSR?e:void 0;function o(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n(async n=>{var o,l,d,c,_,p;let m={itemsPerPage:parseInt(n.query.itemsPerPage)?parseInt(n.query.itemsPerPage):"",page:parseInt(n.query.page,10)?parseInt(n.query.page,10):"",search:null!==(o=n.query.search)&&void 0!==o?o:"",orderBy:null!==(l=n.query.orderBy)&&void 0!==l?l:"",orderDirection:null!==(d=n.query.orderDirection)&&void 0!==d?d:"",view:null!==(c=n.query.view)&&void 0!==c?c:"",item:null!==(_=n.query.item)&&void 0!==_?_:"",editFile:null!==(p=n.query.editFile)&&void 0!==p?p:"",..."function"==typeof r?await r(n):r},u="function"==typeof e?e(n):e;return(0,a.NA)(n,t,{sourceUrl:u,initialItems:await i.bl.get({url:(0,a.VM)(u,n),...m}),itemData:n.query.item?await i.bl.get((0,a.VM)(u+"/"+n.query.item,n)):"",extraData:{..."function"==typeof s?await s(n):s},pageState:{...m}})})}},26887:function(e,t,r){"use strict";r.d(t,{a:function(){return a}});var s=r(57643);let a=(e,t,r)=>(0,s.qR)(()=>{r&&"pending"!=r.status?t(r):e(t)})},82695:function(e,t,r){"use strict";r.d(t,{N:function(){return o},v:function(){return n}});var s=r(5632),a=r(57643);let i=(e,t)=>{let{[t]:r,...s}=e;return s},n=e=>{let{query:t}=(0,s.useRouter)();(0,a.rf)(()=>{e(t)},[t])},o=e=>{let{replace:t,push:r,query:a}=(0,s.useRouter)(),n=()=>Object.keys(null!=e?e:{}).reduce((t,r)=>""!==e[r]?{...t,[r]:e[r]}:t,{});return{push:function(e,t){let s=!(arguments.length>2)||void 0===arguments[2]||arguments[2];r({query:{...a,...n(),[e]:t}},void 0,{shallow:s})},mergePush:e=>{r({query:{...a,...n(),...e}},void 0,{shallow:!0})},removePush:e=>{r({query:i(a,e)},void 0,{shallow:!0})},removeReplace:e=>{t({query:i(a,e)},void 0,{shallow:!0})},replace:(e,r)=>{t({query:{...a,...n(),[e]:r}},void 0,{shallow:!0})},mergeReplace:r=>{t({query:{...n(),...e,...r}},void 0,{shallow:!0})}}}},31851:function(){},42937:function(){},1435:function(){},5006:function(){},76409:function(){},66286:function(){},18190:function(){},94611:function(){},51185:function(){}},function(e){e.O(0,[8641,8081,4733,1335,8873,2859,6313,3950,3661,7205,6851,9927,7360,9498,1967,5619,9884,995,1004,4152,8676,767,1773,8859,9774,2888,179],function(){return e(e.s=56083)}),_N_E=e.O()}]);