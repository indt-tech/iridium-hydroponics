(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7695],{56083:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/events",function(){return i(12218)}])},12218:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return x}});var a=i(52322),r=i(93976),n=i(40214),s=i(13997),o=i(50897),l=i(79562),c=i(31711);let d=e=>{let{trigger:t,children:i,...r}=e;return(0,a.jsxs)(c.u,{...r,children:[(0,a.jsx)(c.u.Trigger,{children:t}),(0,a.jsxs)(c.u.Content,{enterStyle:{x:0,y:-5,opacity:0,scale:.9},exitStyle:{x:0,y:-5,opacity:0,scale:.9},scale:1,x:0,y:0,opacity:1,animation:["quick",{opacity:{overshootClamping:!0}}],children:[(0,a.jsx)(c.u.Arrow,{}),(0,a.jsx)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-233016078 _ls-167743997 _fos-229441158 _lh-222976480 _ussel-auto font_body ",children:i})]})]})};i(76409);var u=i(1888),h=i(19034),p=i.n(h),m=i(83103),g=i(13043),f=i(1201);let y={},v="/adminapi/v1/events";var w={events:{component:e=>{var t;let{pageState:i,initialItems:c,pageSession:u}=e;return(0,f.G)(()=>'At this moment the user is browsing the events list page. The events list page allows to monitor system events. The list is updated automatically if any events occurs.\n            An event can be a user created, invalid login attempt, successful login, file edit, file create, file update, and also system object modification events, like "product created", or "product updated".\n            Events can be used to monitor the system, auditing pruposes, or to trigger API actions when a specific event happens.\n            Events contain a path, in the form of: x/y/z, where each part of the path describes a part of the event identify.\n            For example, a file creation event will be files/create/file. A directory creation would be files/create/directory.\n            Auth events can be auth/login/success and auth/login/error.\n            Events contain data, specific for the event type.\n            '+((null==c?void 0:c.isLoaded)?"Currently the system returned the following information: "+JSON.stringify(c.data):"")),(0,a.jsx)(n.D,{title:"Events",pageSession:u,children:(0,a.jsx)(s.V,{integratedChat:!0,hideAdd:!0,openMode:"view",sourceUrl:v,initialItems:c,numColumnsForm:1,name:"event",disableViewSelector:!1,defaultView:"list",rowIcon:m.l,columns:o.Z.columns(o.Z.column("path","path",!0,void 0,!0,"250px"),o.Z.column("user","user",!0,void 0,!0,"200px"),o.Z.column("from","from",!0,e=>(0,a.jsx)(l.A,{text:e.from,color:"$gray5"}),!0),o.Z.column("created","created",!0,e=>p()(e.created).format("YYYY-MM-DD HH:mm:ss"),!0,"200px"),o.Z.column("payload","payload",!1,e=>Object.keys(null!==(t=null==e?void 0:e.payload)&&void 0!==t?t:[]).length?Object.keys(e.payload).map((t,i)=>(0,a.jsx)(d,{trigger:(0,a.jsx)(l.A,{ml:i?"$2":"$0",text:t,color:"$color5"},t),children:JSON.stringify(e.payload[t])})):(0,a.jsx)(l.A,{text:"empty",color:"$gray5"}),!0,"200px"),o.Z.column("inspect","payload",!1,e=>(0,a.jsx)(g.Z,{onChange:()=>{},editable:!1,data:e.payload,collapsible:!0,compact:!1,defaultCollapsed:!0}))),model:r.Yq,pageState:i,icons:y})})},getServerSideProps:(0,u.eq)(v,["admin"],{orderBy:"created",orderDirection:"desc"})}},b=i(97729),j=i.n(b);function x(e){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j(),{children:(0,a.jsx)("title",{children:"Protofy - Events"})}),(0,a.jsx)(w.events.component,{...e})]})}},54283:function(e,t,i){"use strict";i.d(t,{$:function(){return l},J:function(){return o}});var a=i(94801),r=i(55858),n=i(53596);let s=(0,n.j)();class o{get(e,t){var i;return null!==(i=this.data[e])&&void 0!==i?i:t}getObjectSchema(){return this.objectSchema}getModelName(){return this.modelName}getLocation(){let e=this.objectSchema.is("location").getFields();if(!e.length)throw"Model error: "+this.getModelName()+" doesn't have location information";let t=e[0],i=this.objectSchema.getFieldKeyDefinition(t,"latKey"),a=this.objectSchema.getFieldKeyDefinition(t,"lonKey");if(this.data[t])return{lat:this.data[t][i],lon:this.data[t][a]}}getId(){return this.data[this.idField]}getNotificationsTopic(e){return"notifications/".concat(this.getModelName(),"/").concat(e,"/").concat(this.getId())}getNotificationsPayload(){return this.serialize()}setId(e,t){return new this.constructor({...t||this.data,[this.idField]:e},this.session,this.modelName)}isVisible(){return!this.isDeleted()}isDeleted(){return!!this.data._deleted}list(e,t,i){if(!e)return this.read();{let{parsed:t,searchWithoutTags:i}=function(e){let t;let i=/(\w+):("[^"]+"|\S+)/g,a={},r=e;for(;null!==(t=i.exec(e));){let e=t[1].toLowerCase(),i=t[2].replace(/"/g,"").toLowerCase();a[e]=i,r=r.replace(t[0],"")}return{parsed:a,searchWithoutTags:r=r.trim()}}(e);for(let[e,i]of Object.entries(t))if(!this.data.hasOwnProperty(e)||this.data[e]!=i)return;let r=this.objectSchema.is("search").getFields();for(var a=0;a<r.length;a++)if((this.data[r[a]]+"").toLowerCase().includes(i.toLowerCase()))return this.read()}}async listTransformed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,r=this.list(e,i,a);if(r)return await this.getObjectSchema().apply("list",r,t)}create(e){let t=this.getData(e);return s.debug({transformed:t},"Creating object: ".concat(JSON.stringify(t))),new this.constructor(t,this.session,this.modelName).validate()}async createTransformed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=await this.getObjectSchema().apply("create",{...this.data},e);return this.create(t)}read(e){return{...this.data}}async readTransformed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,i=await this.getObjectSchema().apply("read",this.read(t),e);return i}update(e,t){return e.setId(this.getId(),{...t||e.data})}async updateTransformed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=await this.getObjectSchema().apply("update",{...e.data},t,{...this.data});return this.update(e,i)}delete(e){return new this.constructor({_deleted:!0,...e||this.data},this.session,this.modelName)}async deleteTransformed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=await this.getObjectSchema().apply("delete",{...this.data},e);return this.delete(t)}validate(){return this.schema.parse(this.data),this}serialize(){return JSON.stringify(this.data)}static getApiOptions(){throw Error("Derived class must implement getApiOptions")}static _newInstance(e,t){throw Error("Derived class must implement _newInstance.")}static unserialize(e,t){return this._newInstance(JSON.parse(e),t)}static load(e,t){return this._newInstance(e,t)}static sort(e,t,i){return e.sort((e,a)=>e[t]>a[t]?"asc"===i?1:-1:e[t]<a[t]?"asc"===i?-1:1:0)}getData(e){return{...this.getObjectSchema().applyGenerators(null!=e?e:this.data)}}constructor(e,t,i,n){var s,o;this.data=e,this.session=null!=i?i:(0,a.ed)(),this.schema=t,this.objectSchema=r.U.load(this.schema),this.modelName=null!==(s=null==n?void 0:n.toLowerCase())&&void 0!==s?s:"unknown";let l=this.objectSchema.is("id");l.getFields().length>1&&(l=l.isNot("fallbackId")),this.idField=null!==(o=l.getFirst("id"))&&void 0!==o?o:"id"}}class l extends o{static _newInstance(e,t){throw Error("Derived class must implement _newInstance.")}static createDerived(e,t,i,a){class r extends l{static _newInstance(e,t){return new r(e,t)}static getApiOptions(){return{name:i,prefix:a}}constructor(i,a){super(i,t,a,e.substring(0,e.length-5).toLowerCase())}}return r.schemaInstance=t,Object.defineProperty(r,"name",{value:e,writable:!1}),r}constructor(e,t,i,a){super(e,t,i,a)}}},43657:function(e,t,i){"use strict";i.d(t,{jb:function(){return a}});let a=(e,t)=>t},93976:function(e,t,i){"use strict";i.d(t,{Yq:function(){return u}});var a=i(30195),r=i(43657),n=i(75370),s=i(19034),o=i.n(s),l=i(54283);let c=a.z.object((0,r.jb)("schema",{path:a.z.string().search(),from:a.z.string().search(),user:a.z.string().generate(e=>"me").search(),payload:a.z.record(a.z.string(),a.z.any()).search(),created:a.z.string().generate(e=>o()().toISOString()).search()})),d=a.z.object({...n.Pp.shape,...c.shape});class u extends l.J{list(e){return e?JSON.stringify(this.data).toLowerCase().includes(e.toLowerCase())?this.read():void 0:this.read()}static _newInstance(e,t){return new u(e,t)}constructor(e,t){super(e,d,t,"Event")}}},1888:function(e,t,i){"use strict";i.d(t,{F7:function(){return s},eq:function(){return o}});var a=i(44499),r=i(6429),n=i(48115);let s=e=>a.l.SSR?e:void 0;function o(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return s(async s=>{var o,l,c,d,u,h;let p={itemsPerPage:parseInt(s.query.itemsPerPage)?parseInt(s.query.itemsPerPage):"",page:parseInt(s.query.page,10)?parseInt(s.query.page,10):"",search:null!==(o=s.query.search)&&void 0!==o?o:"",orderBy:null!==(l=s.query.orderBy)&&void 0!==l?l:"",orderDirection:null!==(c=s.query.orderDirection)&&void 0!==c?c:"",view:null!==(d=s.query.view)&&void 0!==d?d:"",item:null!==(u=s.query.item)&&void 0!==u?u:"",editFile:null!==(h=s.query.editFile)&&void 0!==h?h:"",..."function"==typeof i?await i(s):i},m="function"==typeof e?e(s):e;return(0,r.NA)(s,t,{sourceUrl:m,initialItems:await n.bl.get({url:(0,r.VM)(m,s),...p}),itemData:s.query.item?await n.bl.get((0,r.VM)(m+"/"+s.query.item,s)):"",extraData:{..."function"==typeof a?await a(s):a},pageState:{...p}})})}},76409:function(){}},function(e){e.O(0,[8641,8081,4733,1335,8873,2859,6313,3950,3661,3057,9613,7369,2905,1004,6076,8404,4608,9774,2888,179],function(){return e(e.s=56083)}),_N_E=e.O()}]);