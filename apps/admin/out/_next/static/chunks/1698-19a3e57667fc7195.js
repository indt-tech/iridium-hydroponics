(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1698],{10347:function(e,t,a){"use strict";a.d(t,{t:function(){return o}});var r=a(52322),s=a(2784);let o=(0,s.createContext)({active:0,setActive:e=>{}}),i=s.forwardRef((e,t)=>{let{initialState:a=0,children:i}=e,[l,n]=(0,s.useState)(a);return(0,r.jsx)(o.Provider,{value:{active:l,setActive:n},children:i})});t.Z=i},91681:function(e,t,a){"use strict";var r=a(52322),s=a(2784),o=a(10347),i=a(17277);let l=s.forwardRef((e,t)=>{let{activeId:a,onSetActive:l=e=>{},...n}=e,{active:d,setActive:c}=(0,s.useContext)(o.t);return(0,r.jsx)(i.Z,{onPress:()=>{l(a),c(a)},theme:a===d?"active":null,chromeless:a!==d,...n})});t.Z=l},61667:function(e,t,a){"use strict";var r=a(52322),s=a(2784),o=a(10347),i=a(93559);let l=s.forwardRef((e,t)=>{let{activeId:a,fast:l=!1,children:n,...d}=e,{active:c}=(0,s.useContext)(o.t),_=c==a;return l?(0,s.useMemo)(()=>(0,r.jsx)(i.Stack,{ref:t,position:"absolute",top:_?0:-1e4,...d,children:n}),[_]):_?(0,r.jsx)(i.Stack,{...d,ref:t,children:n}):null});t.Z=l},50897:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var r=a(52322);a(2784);var s=a(25237),o=a.n(s);let i=o()(()=>Promise.all([a.e(7788),a.e(2881)]).then(a.bind(a,90704)).then(e=>e.default),{loadableGenerated:{webpack:()=>[90704]},ssr:!1}),l=o()(()=>a.e(4210).then(a.bind(a,4210)).then(e=>e.default),{loadableGenerated:{webpack:()=>[4210]},ssr:!1}),n={component:e=>{let{pagination:t,conditionalRowStyles:a,rowsPerPage:s,columns:o,rows:n,onRowPress:d,handlePerRowsChange:c,handlePageChange:_,totalRows:p,currentPage:x,handleSort:m,disableItemSelection:u=!1}=e;return(0,r.jsx)(l,{print:!1,export:!1,filter:!1,columns:o,data:n,children:(0,r.jsx)(i,{conditionalRowStyles:a,responsive:!0,striped:!0,pointerOnHover:!u,columns:o,data:n,defaultSortField:"created",defaultSortAsc:!1,onRowClicked:d,onChangeRowsPerPage:c,onChangePage:_,paginationTotalRows:p,paginationDefaultPage:x,pagination:t,paginationServer:!0,sortServer:!0,paginationPerPage:s,onSort:m,paginationRowsPerPageOptions:[10,15,20,25,50,100,500,1e3]})})},column:function(e,t,a,r,s){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return{name:e,selector:t,sortable:!!a,sortField:a,cell:r,grow:s,minWidth:o}},columns:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t}}},13997:function(e,t,a){"use strict";a.d(t,{V:function(){return ep}});var r=a(52322),s=a(8939),o=a(89929),i=a(66306),l=a(48115),n=a(2784),d=a(39684),c=a(26887);let _=function(e,t,a,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],[o,i]=(0,n.useState)(e);(0,c.a)(e=>t(e),i,o);let{message:l}=(0,d.mU)(a);return(0,n.useEffect)(()=>{if(l&&l.message){let e="string"==typeof l.message?l.message:JSON.stringify(l.message),a=JSON.parse(e),[,,o]=l.topic.split("/");s?i(e=>{let t=e.data||{},s=t.items||[];switch(o){case"create":return{...e,data:{...t,items:[a,...s]}};case"delete":let i=s.filter(e=>r.load(e).getId()!==r.load(a).getId());return{...e,data:{...t,items:i}};case"update":let l=s.map(e=>r.load(e).getId()===r.load(a).getId()?a:e);return{...e,data:{...t,items:l}};default:return e}}):t(i)}},[l]),[o,i]};var p=a(93559),x=a(99553),m=a(24066),u=a(6289),f=a(40914),h=a(94484),b=a(91838);let v=e=>{var t;let{index:a,data:s,width:o}=e,i=s.element.data,l=s.model.load(i),n=(0,h.d5)(),d=null!==(t=null==s?void 0:s.icon)&&void 0!==t?t:(0,r.jsx)(r.Fragment,{});return s.getCard?s.getCard(i,o):(0,r.jsx)(f.q,{height:s.itemHeight,cursor:s.disableItemSelection?"default":"pointer",topBarOutSideScrollArea:!1,backgroundColor:"$color1",elevation:"$0",hoverStyle:{...s.disableItemSelection?{}:{o:.8,backgroundColor:"$"+n.tint+"1",elevation:"$1"}},borderWidth:1,pointerEvents:"none",pointerEventsControls:"none",onPress:()=>s.onSelectItem(l),...s.getPicture?{image:s.getPicture(i,o),hasPicture:!0}:{},children:s.getBody?s.getBody(i,o):(0,r.jsx)(p.Stack,{mb:"$4",width:o,children:(0,r.jsx)(m.G,{initialData:s.element,name:l.getId(),spinnerSize:75,loadingText:(0,r.jsxs)("div",{className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ai-center _jc-center ",children:["Loading data...",(0,r.jsx)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-bold _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto font_body "})]}),objectId:l.getId(),sourceUrl:s.sourceUrl+"/"+l.getId(),mode:"preview",model:s.model,extraFields:s.extraFields,icons:s.icons,customFields:s.customFields,columnWidth:o-s.contentMargin,onDelete:s.onDelete,deleteable:s.deleteable,extraMenuActions:s.extraMenuActions,title:(0,r.jsxs)("div",{className:"  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mt-1316330145 _ml-1316330145 _ai-center ",children:[(null==s?void 0:s.icon)&&(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mr-1481558214 ",children:(0,r.jsx)(b.I,{children:(0,r.jsx)(d,{color:"var(--color7)"})})}),(0,r.jsx)("h3",{className:"  is_H3 _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _tt-230632984 _ff-299667014 _fow-233016264 _ls-167744183 _fos-229441344 _lh-222976697 _ussel-auto font_heading ",children:null==s?void 0:s.name})]})})},i.key)})},g=e=>{let{overScanBy:t=5,gridElementCard:a,itemMinWidth:s=400,emptyMessage:o=(0,r.jsx)(r.Fragment,{}),itemHeight:i,rightGap:l=30,contentMargin:d=50,onSelectItem:c=e=>{},disableItemSelection:_=!1,extraMenuActions:m,spacing:f=20,getPicture:h,getBody:b,getCard:g,model:j,items:w,sourceUrl:y,customFields:N,onDelete:S,deleteable:I,extraFields:P,icons:k,children:$,name:C,icon:A,...O}=e,F=(0,n.useRef)(null),Z=w.map((e,t)=>({id:"item_"+t,element:(0,u.E)("loaded",e),model:j,sourceUrl:y,customFields:N,extraFields:P,icons:k,itemMinWidth:s,getPicture:h,getBody:b,getCard:g,spacing:f,contentMargin:d,onSelectItem:c,onDelete:S,deleteable:I,itemHeight:i,extraMenuActions:m,disableItemSelection:_,name:C,icon:A}));return(0,r.jsxs)(p.Stack,{f:1,ref:F,...O,children:[Z&&Z.length>0?(0,r.jsx)(x.rj,{overScanBy:t,rightGap:l,containerRef:F,spacing:f,data:Z,card:null!=a?a:v,itemMinWidth:s},Z.length):o,$]})};a(9807);var j=a(43260);let w=e=>{let{index:t,data:a,width:s}=e,o=a.element,i=a.model.load(o),l=a.onDelete;return(0,r.jsx)(p.Stack,{width:s,children:(0,r.jsx)(j.I,{compact:!0,innerContainerProps:{mb:"$3",mt:"$5",mx:"$3"},onDelete:l,json:o,name:i.getId(),isTemplate:!1})},o.key)},y=e=>{var t,a;let{itemMinWidth:s=400,rightGap:o=30,contentMargin:i=40,spacing:l=20,items:d,model:c,..._}=e,m=(0,n.useRef)(null),u=null==d?void 0:null===(a=d.data)||void 0===a?void 0:null===(t=a.items)||void 0===t?void 0:t.map((e,t)=>({id:"item_"+t,element:e,model:c,onDelete:_.onDelete}));return(0,r.jsx)(p.Stack,{ml:"$5",ref:m,f:1,..._,children:(0,r.jsx)(x.rj,{rightGap:o,containerRef:m,spacing:l,data:u,card:w,itemMinWidth:s},u.length)})};var N=a(2715),S=a(16399);let I=e=>{let{items:t,model:s,sourceUrl:o,extraFields:i,icons:l,customFields:d,onDelete:c,deleteable:_,extraMenuActions:x,...f}=e,{resolvedTheme:v}=(0,S.P)(),g=(0,n.useRef)(null),{tint:j}=(0,h.d5)(),[w,y]=(0,n.useState)({location:{lat:"",lon:""}}),I=t.data.items.map(e=>{let t=s.load(e);return{modelItem:t,location:t.getLocation()}}).filter(e=>e.location),P=(0,n.useMemo)(()=>I.map((e,t)=>(0,r.jsx)(N.Jx,{color:"var(--"+j+"10)",longitude:e.location.lon,latitude:e.location.lat,anchor:"bottom",onClick:t=>{t.originalEvent.stopPropagation(),y(e)}},"marker-".concat(t))),[t.data.items,j]);return(0,r.jsx)(p.Stack,{ref:g,f:1,...f,children:(0,r.jsxs)(N.ZP,{mapboxAccessToken:"pk.eyJ1IjoibGx1aXNyb3ZpcmFsZSIsImEiOiJjbHQxa2FzMXYxNGUwMmlvNjBzZDhsN2doIn0.MB_9FAGiw5HteRwUin8R2g",mapLib:a.e(2538).then(a.t.bind(a,30517,23)),initialViewState:{latitude:41.3947846,longitude:2.1939663,zoom:12},style:{},mapStyle:"dark"==v?"mapbox://styles/mapbox/dark-v9":"mapbox://styles/mapbox/light-v9",children:[(0,r.jsx)(N.$j,{position:"top-right"}),(0,r.jsx)(N.ot,{position:"top-right"}),(0,r.jsx)(N.Pv,{position:"top-right"}),(0,r.jsx)(b.I,{children:P}),w&&w.modelItem&&(0,r.jsx)(N.GI,{style:{minWidth:"320px"},anchor:"top",longitude:Number(w.location.lon),latitude:Number(w.location.lat),onClose:()=>y({location:{lat:"",lon:""}}),closeButton:!1,children:(0,r.jsx)("div",{className:"  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 _ai-center ",children:(0,r.jsx)(m.G,{initialData:(0,u.E)("loaded",w.modelItem.read()),name:w.modelItem.getId(),spinnerSize:15,loadingText:(0,r.jsxs)("div",{className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ai-center _jc-center ",children:["Loading data...",(0,r.jsx)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-bold _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto font_body "})]}),objectId:w.modelItem.getId(),sourceUrl:o+"/"+w.modelItem.getId(),mode:"preview",model:s,extraFields:i,icons:l,customFields:d,columnWidth:270,onDelete:c,deleteable:_,extraMenuActions:x,onSave:()=>{}})})})]})})};a(51185);var P=a(10836),k=a(96666),$=a(10347),C=a(51813),A=a(65126),O=a(91681),F=a(53726),Z=a(68604),D=a(81815),E=a(99062),R=a(57909),z=a(57441),L=a(40641),T=a(62624),M=a(42738),W=a(89560),U=a(39608),B=a(30195),V=a(53763),G=a(9393),q=a(57643),H=a(82695),J=a(94038),X=a(26879),Q=a(50897),K=a(1963),Y=a(61773),ee=a(96455),et=a(71932);let ea=e=>{var t,a,s;let{sourceUrl:o,onDelete:i=()=>{},items:l,model:n,deleteable:d=()=>{},extraMenuActions:c=[],enableAddToInitialData:_,selected:p=[],rowIcon:x=W.z,columns:m,state:u={},setSelected:f=e=>{},onSelectItem:h=e=>{},disableRowIcon:v=!1,disableItemSelection:g=!1}=e,{push:j,mergePush:w}=(0,H.N)(u),y=[{when:e=>p.some(t=>t.id===n.load(e).getId()),style:{backgroundColor:"var(--color4)"},"&:hover":{backgroundColor:"var(--color4)"}}],N=n.getObjectSchema().isDisplay("table"),S=["ZodString","ZodNumber","ZodBoolean"],I=null!=m?m:Q.Z.columns(...Object.keys(N.shape).filter(e=>{var t;return S.includes(null===(t=N.shape[e]._def)||void 0===t?void 0:t.typeName)}).map(e=>{var t,a;return Q.Z.column(null!==(s=null===(t=N.shape[e]._def)||void 0===t?void 0:t.label)&&void 0!==s?s:e,t=>t[e],null!==(a=N.shape[e]._def)&&void 0!==a&&!!a.indexed&&e)}));return(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _pt-1481558276 _fw-wrap ",children:(0,r.jsx)(b.I,{children:(0,r.jsx)(Q.Z.component,{disableItemSelection:g,pagination:!1,conditionalRowStyles:y,rowsPerPage:u.itemsPerPage?u.itemsPerPage:25,handleSort:(e,t)=>{w({orderBy:e.sortField,orderDirection:t})},handlePerRowsChange:e=>j("itemsPerPage",e),handlePageChange:e=>j("page",parseInt(e,10)-1),currentPage:(isNaN(parseInt(u.page,10))?0:parseInt(u.page,10))+1,totalRows:null==l?void 0:null===(t=l.data)||void 0===t?void 0:t.total,columns:[Q.Z.column((0,r.jsx)(J.Q2,{reset:!0,children:(0,r.jsxs)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 ",children:[(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mt-1481558214 _ml-1481558152 _o-0d0t846 ",children:(0,r.jsx)(X.XZ,{focusStyle:{outlineWidth:0},checked:p.length>1,onPress:e=>{if(p.length)f([]);else{var t,a;console.log("selection all: ",null==l?void 0:null===(t=l.data)||void 0===t?void 0:t.items),f(null==l?void 0:null===(a=l.data)||void 0===a?void 0:a.items)}},children:(0,r.jsx)(X.XZ.Indicator,{children:(0,r.jsx)(K.G,{})})})}),p.length>1&&(0,r.jsx)(ee.o,{enableAddToInitialData:_,type:"bulk",mt:"1px",ml:"-5px",element:p,sourceUrl:o,deleteable:d,onDelete:i,extraMenuActions:c})]})}),()=>"",!1,e=>(0,r.jsx)(J.Q2,{reset:!0,children:(0,r.jsxs)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ml-1481558152 _o-0d0t846 ",children:[(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mt-1481558214 ",children:(0,r.jsx)(X.XZ,{focusStyle:{outlineWidth:0},onPress:()=>{let t=e=>n.load(e).getId(),a=t(e),r=p.some(e=>t(e)===a);r?f(p.filter(e=>t(e)!==a)):f([...p,e])},checked:p.some(t=>n.load(t).getId()===n.load(e).getId()),children:(0,r.jsx)(X.XZ.Indicator,{children:(0,r.jsx)(Y.J,{})})})}),(0,r.jsx)(ee.o,{enableAddToInitialData:_,type:"item",ml:"-5px",mt:"1px",element:n.load(e),sourceUrl:o+"/"+n.load(e).getId(),deleteable:d,onDelete:i,extraMenuActions:c}),!v&&(0,r.jsx)(et.z,{Icon:x,onPress:()=>h(n.load(e))})]})}),!0,"115px"),...I],rows:null==l?void 0:null===(a=l.data)||void 0===a?void 0:a.items,onRowPress:e=>h(n.load(e))})})})};a(12219);var er=a(61667),es=a(89711),eo=a(95753),ei=a(46835),el=a(5632),en=a(29897);let ed="  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ml-1316330238 _ai-center ",ec="  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ai-center _ml-1481558152 ",e_="  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-233016140 _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto font_body ",ep=(0,n.forwardRef)((e,t)=>{let{onSelectItem:a,itemData:d,rowIcon:c,disableViewSelector:p=!1,disableItemSelection:x=!1,initialItems:f,sourceUrl:h,numColumnsForm:v=1,name:j,pluralName:w,entityName:N,hideAdd:S=!1,enableAddToInitialData:J=!1,pageState:X,icons:Q={},model:K,extraFields:Y={},columns:ep,onEdit:ex=e=>e,onDelete:em=e=>e,onAdd:eu=e=>e,views:ef,extraViews:eh=[],openMode:eb="edit",disableToggleMode:ev,customFields:eg={},dataTableRawProps:ej={},dataTableListProps:ew={},dataTableGridProps:ey={},dataMapProps:eN={},extraFieldsForms:eS={},extraFieldsFormsEdit:eI={},extraFieldsFormsAdd:eP={},customFieldsForms:ek={},defaultView:e$="list",disableViews:eC=[],toolBarContent:eA=null,onAddButton:eO,extraMenuActions:eF=[],deleteable:eZ=()=>!0,objectProps:eD={},refreshOnHotReload:eE=!1,quickRefresh:eR=!1}=e,ez=null!==(tt=null!=N?N:w)&&void 0!==tt?tt:j+"s",{query:eL}=(0,el.useRouter)(),[eT,eM]=(0,n.useState)(null!=X?X:eL),eW=async e=>{let t=await l.bl.get({url:h,...eT});e(t)},[eU,eB]=_(f,eW,"notifications/"+K.getModelName()+"/#",K,eR),[eV,eG]=(0,n.useState)(null!=f?f:(0,u.E)("pending")),[eq,eH]=(0,n.useState)(!1),{push:eJ,mergePush:eX,removePush:eQ,replace:eK}=(0,H.N)(eT),[eY,e0]=(0,n.useState)([]),[e1,e2]=(0,n.useState)(d),{search:e4,setSearch:e5,setSearchName:e3}=(0,n.useContext)(ei.c),e6=eF&&eF.some(e=>e.menus&&e.menus.includes("global"));(0,H.v)(eM),(0,n.useEffect)(()=>{},[]),(0,n.useEffect)(()=>{eU&&eU.isLoaded&&eG(eU)},[eU]),(0,q.rf)(()=>{e4?eJ("search",e4,!1):eQ("search")},[e4]),(0,n.useEffect)(()=>{e3(ez)}),(0,q.rf)(()=>{eW(eB)},[eT.orderBy+"_"+eT.itemsPerPage+"_"+eT.page+"_"+eT.search+"_"+eT.orderDirection]);let e7=(0,V.Py)();var e9,e8,te,tt,ta,tr,ts,to=[{name:"list",icon:E.a,component:ea,props:{sourceUrl:h,onDelete:async e=>{if(Array.isArray(eY)&&eY.length&&h){let e=eY.map(e=>l.bl.get("".concat(h,"/").concat(K.load(e).getId(),"/delete")));await Promise.all(e),e0([])}else h&&await l.bl.get("".concat(e,"/delete"));em({sourceUrl:e,selected:eY})},onSelectItem:a||(e=>eK("item",e.getId())),deleteable:eZ,enableAddToInitialData:J,extraMenuActions:eF,items:eU,model:K,selected:eY,setSelected:e0,rowIcon:"edit"==eb?W.z:U.b,columns:ep,state:eT,disableItemSelection:x,...ew}},{name:"grid",icon:D.J,component:g,props:{mt:"$8",model:K,items:null==eU?void 0:null===(e9=eU.data)||void 0===e9?void 0:e9.items,sourceUrl:h,customFields:eg,extraFields:Y,icons:Q,ml:"$5",deleteable:eZ,onDelete:async e=>{await l.bl.get(e+"/delete"),em({sourceUrl:e,selected:eY})},onSelectItem:a||(e=>eK("item",e.getId())),extraMenuActions:eF,itemMinHeight:320,itemMinWidth:320,emptyMessage:(0,r.jsx)(en.Z,{icon:c,msg:"Empty ".concat(ez," list"),detailsColor:"$color",containerProps:{mt:"-30%",o:.1},iconProps:{}}),spacing:20,name:j,icon:c,disableItemSelection:x,...ey}},{name:"raw",icon:R.S,component:y,props:{mt:"$8",items:eU,model:K,onDelete:async e=>{await l.bl.get("".concat(h,"/").concat(e,"/delete")),em({sourceUrl:h,selected:eY,key:e})},disableItemSelection:x,...ej}}];let ti={name:"map",icon:M.$,component:I,props:{mt:"$3",onDelete:async e=>{await l.bl.get("".concat(h,"/").concat(e,"/delete"))},items:eU,model:K,sourceUrl:h,extraFields:Y,icons:Q,customFields:eg,deleteable:eZ,extraMenuActions:eF,disableItemSelection:x,...eN}},tl=K.getObjectSchema().is("location");tl.getFields().length&&(to=[...to,ti]);let tn=(null!=ef?ef:[...to,...eh]).filter(e=>!eC.includes(e.name)),td=-1!=tn.findIndex(e=>e.name==eT.view)?tn.findIndex(e=>e.name==eT.view):tn.findIndex(e=>e.name==e$),tc=e=>{let t=e.split("/");return t.pop()},t_=eV&&eV.isLoaded?Math.ceil((null===(e8=eV.data)||void 0===e8?void 0:e8.total)/(null===(te=eV.data)||void 0===te?void 0:te.itemsPerPage)):0;return eU&&eU.isError?(0,r.jsxs)(P.Z,{children:["Error: ",eU.error&&eU.error.error?eU.error.error:eU.error]}):(0,r.jsx)(k.Z,{atom:eV,children:(0,r.jsx)("div",{ref:t,className:"  _ai-stretch _dsp-flex _fd-column _bxs-border-box _pos-relative _mih-0px _miw-0px  _h-10037 _fg-1 _fs-1 _fb-auto ",children:(0,r.jsxs)($.Z,{initialState:-1==td?0:td,children:[eT.editFile&&(0,r.jsx)(es.l,{id:"file-widget-"+tc(null!==(ta=eT.editFile)&&void 0!==ta?ta:"").split(".")[0],hideCloseIcon:!1,isModified:!0,setIsModified:()=>{},icons:[(0,r.jsx)(eo.q,{onPress:()=>{eQ("editFile")},children:(0,r.jsx)(z.X,{color:"var(--color)",size:"$1"})})],currentFileName:tc(null!==(tr=eT.editFile)&&void 0!==tr?tr:""),currentFile:eT.editFile}),(0,r.jsx)(C.a,{integratedChat:!0,p:"$2",pt:"$5",pl:"$5",setOpen:eH,open:eq,hideAccept:!0,description:"",children:(0,r.jsx)(s.FA,{f:1,jc:"center",ai:"center",id:"admin-dataview-create-dlg",children:(0,r.jsx)(o.p,{maxHeight:"90vh",children:(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mr-1316330145 ",children:(0,r.jsx)(m.G,{id:"admin-eo",name:j,numColumns:v,mode:"add",onSave:async(e,t)=>{try{let e=K.load(t),a=eU.data.items.find(t=>t.id===e.getId());if(a)throw{error:"This id already exists"};let r=await l.bl.post(h,eu(e.create().getData()));if(r.isError)throw r.error;eH(!1),e7.show(j+" created",{message:e.getId()})}catch(e){throw console.log("original error: ",e,e.flatten()),(0,u.E)("error",null,e instanceof B.z.ZodError?e.flatten():e)}},model:K,extraFields:{...Y,...eS,...eP},icons:Q,customFields:{...eg,...ek},...eD})})})})}),(0,r.jsx)(C.a,{integratedChat:!0,p:"$1",pt:"$5",pl:"$5",hideAccept:!0,acceptCaption:"Save",setOpen:e=>{e2(void 0),eQ("item")},open:eT.item,description:"",children:(0,r.jsx)("div",{className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 _jc-center _ai-center ",children:(0,r.jsx)(o.p,{maxHeight:"90vh",children:(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mr-1316330238 ",children:(0,r.jsx)(m.G,{disableToggleMode:ev,initialData:e1,name:j,spinnerSize:75,loadingText:(0,r.jsxs)("div",{className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ai-center _jc-center ",children:["Loading data for ",j,(0,r.jsx)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-bold _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto font_body ",children:eT.item})]}),objectId:eT.item,sourceUrl:h+"/"+eT.item,numColumns:v,mode:eb,onSave:async(e,t)=>{try{e2(void 0);let a=K.load(t).getId(),r=await l.bl.post(h+"/"+a,ex(K.load(e).update(K.load(t)).getData()));if(r.isError)throw r.error;let{item:s,...o}=eT;eM(o),e7.show(j+" updated",{message:"Saved new settings for: "+a})}catch(e){throw(0,u.E)("error",null,e instanceof B.z.ZodError?e.flatten():e)}},model:K,extraFields:{...Y,...eS,...eI},icons:Q,customFields:{...eg,...ek},...eD})})})})}),!eT.editFile&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _pt-1481558152 _pr-1316330300 _pl-1316330300 _mb-1481558276 ",children:[(0,r.jsxs)("div",{className:"  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _l--12px _fg-1 _ai-center ",children:[c&&(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mr-1481558152 ",children:(0,r.jsx)(b.I,{children:(0,r.jsx)(c,{color:"var(--color7)"})})}),(0,r.jsx)("p",{className:e_,children:(0,r.jsx)("span",{className:"  _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _fos-229441251 _col-137137671 ",children:w?w.charAt(0).toUpperCase()+w.slice(1):j.charAt(0).toUpperCase()+j.slice(1)+"s"})}),e6?(0,r.jsx)(b.I,{children:(0,r.jsx)(ee.o,{type:"global",sourceUrl:"",hideDeleteButton:!0,element:"",extraMenuActions:eF})}):(0,r.jsx)(r.Fragment,{}),eA]}),(0,r.jsxs)("div",{className:"  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ai-center ",children:[(0,r.jsx)("div",{className:ec,children:eV.isLoaded&&(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ml-1481558214 ",children:(0,r.jsxs)("div",{className:ed,children:[(0,r.jsx)("div",{className:ed,children:(0,r.jsxs)("span",{className:"  _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _fos-14px _col-137137640 ",children:[eV.data.itemsPerPage*eV.data.page+1,"-",Math.min(eV.data.total,eV.data.itemsPerPage*(eV.data.page+1))," of ",eV.data.total]})}),(0,r.jsxs)(b.I,{children:[(0,r.jsx)(et.z,{Icon:L.s,onPress:e=>{e.stopPropagation(),eV.data.page>0&&eJ("page",eV.data.page-1)},ml:"$3",disabled:!(eV.data.page>0)}),(0,r.jsx)("span",{className:"  is_Spacer _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-1481558152 _miw-1481558152 _fs-0 _pe-none _w-1481558152 _h-1481558152 "}),(0,r.jsx)(et.z,{Icon:T._,onPress:e=>{e.stopPropagation(),eV.data.page<t_-1&&eJ("page",eV.data.page+1)},ml:"$3",disabled:!(eV.data.page<t_-1)})]})]})})}),(0,r.jsxs)("div",{className:ec,children:[!p&&(0,r.jsx)(A.Z,{marginRight:"$3",children:tn.map((e,t)=>(0,r.jsx)(O.Z,{id:"tableView-"+e.name,onSetActive:()=>eJ("view",e.name),activeId:t,children:n.createElement(e.icon,{size:"$1",strokeWidth:1})},t))}),!S&&(0,r.jsx)(b.I,{children:(0,r.jsx)(i.zx,{id:"admin-dataview-add-btn",hoverStyle:{o:1},o:.7,circular:!0,onPress:()=>{eO?eO():eH(!0)},chromeless:!0,children:(0,r.jsx)(Z.v,{color:"$color10"})})})]})]})]}),eU&&eU.isError&&(0,r.jsx)(F.q,{children:(0,r.jsx)("p",{className:e_,children:(0,G.e)(eU.error)})}),(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 ",children:(0,r.jsx)(k.Z,{atom:eV,children:tn.map((e,t)=>(0,r.jsx)(er.Z,{height:"100%",activeId:t,children:n.createElement(e.component,{...e.props})},t))})})]})]})})})});a(48478)},24066:function(e,t,a){"use strict";a.d(t,{G:function(){return ei}});var r=a(52322),s=a(80939),o=a(66306),i=a(8939),l=a(84291),n=a(45734),d=a(59928),c=a(36907),_=a(93559),p=a(60545),x=a(89560),m=a(32627),u=a(60166),f=a(57441),h=a(7324),b=a(99062),v=a(57909),g=a(91838),j=a(51813),w=a(48715),y=a(4273);function N(e){let{showLabel:t=!0,containerProps:a,defaultValue:s,children:o,...l}=e;return(0,r.jsxs)(i.sL,{f:1,...a,children:[(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 ",children:(0,r.jsxs)(y.iR,{f:1,defaultValue:[50],min:0,max:100,step:1,...l,children:[(0,r.jsx)(y.iR.Track,{f:1,children:(0,r.jsx)(y.iR.TrackActive,{})}),(0,r.jsx)(y.iR.Thumb,{index:0,size:"$1",circular:!0,elevate:!0}),o]})}),t&&(0,r.jsx)("div",{className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _fs-0 _ai-flex-end _miw-40px _t--8px ",children:l.value})]})}a(5006);var S=a(6289),I=a(26887),P=a(48115),k=a(99553),$=a(10836),C=a(96666),A=a(53726),O=a(2784),F=a(9393),Z=a(55858),D=a(75370),E=a(57643),R=a(94484),z=a(96455);function L(e){let{choices:t,defaultSelections:a=[],onSetSelections:s=e=>{},containerProps:o={},...l}=e,n=(0,O.useRef)(null),[d,c]=(0,O.useState)(!1),[_,p]=(0,O.useState)(a),x=(e,a)=>{let r=t[t.indexOf(a)];if(_.includes(r)){let e=_.filter(e=>e!==r);s(e),p(e)}else{let e=_.concat(r);s(e),p(e)}};return(0,r.jsx)(g.I,{children:(0,r.jsxs)(i.sL,{ref:n,bc:"$backgroundTransparent",w:"100%",h:"fit-content",jc:"space-between",ai:"center",px:"10px",py:"7px",br:6,outlineColor:"$gray6",outlineWidth:1,outlineStyle:"solid",boc:"$gray6",cursor:"pointer",onPress:()=>c(e=>!e),...l,children:[(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fw-wrap _h-797770429 _ox-hidden _oy-hidden _fg-1 _gap-1481558245 ",children:_.length>0?_.map((e,t)=>(0,r.jsx)("p",{onClick:t=>x(t,e),className:"  is_Paragraph _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-233016140 _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto font_body  _pr-7px _pl-7px _pt-4px _pb-4px _bg-549765356 _btlr-4px _btrr-4px _bbrr-4px _bblr-4px _col-white ",children:e},t)):(0,r.jsx)("p",{className:"  is_Paragraph _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _col-791969557 _ff-299667014 _fow-233016140 _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto _pr-7px _pl-7px _pt-4px _pb-4px _btlr-4px _btrr-4px _bbrr-4px _bblr-4px font_body ",children:"Select"})}),(0,r.jsx)(u._,{}),d?(0,r.jsx)(i.FA,{zIndex:999999999,pos:"absolute",top:"130%",left:"0%",width:"100%",bc:"$gray1",px:"7px",py:"7px",br:4,outlineColor:"$gray6",outlineWidth:1,outlineStyle:"solid",borderColor:"$borderColor",maxHeight:"150px",gap:"$1.5",ov:"scroll",...o,children:t.map((e,t)=>_.includes(e)?(0,r.jsx)("p",{onClick:t=>x(t,e),className:"  is_Paragraph _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ussel-auto   _cur-0hover-pointer _pr-10px _pl-10px _pt-7px _pb-7px _btlr-4px _btrr-4px _bbrr-4px _bblr-4px _fos-229441220 _col-675002279 _ff-299667014 _fow-233016140 _ls-167744059 _lh-222976573 _bg-549765356 font_body ",children:e},t):(0,r.jsx)("p",{onClick:t=>x(t,e),className:"  is_Paragraph _bg-0hover-744986709 _cur-0hover-pointer _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _col-675002279 _ff-299667014 _fow-233016140 _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto _pr-10px _pl-10px _pt-7px _pb-7px _btlr-4px _btrr-4px _bbrr-4px _bblr-4px font_body ",children:e}))}):null]})})}a(62431);var T=a(70396);let M="  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 ",W="  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 _mt-1316330145 ",U=" _mt-1481558400",B=" _mt-1481558214",V=" _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0  _ml-1481558276  ",G="  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 ",q=e=>e&&e[0].toUpperCase()+e.slice(1),H={color:"var(--color9)",size:"$1",strokeWidth:1},J=e=>{var t;let{ele:a,i:o,icon:i,children:l,inArray:n=!1}=e;return(0,r.jsxs)("fieldset",{className:(0,T.concatClassName)("  is_Fieldset _ai-stretch _dsp-flex _fd-column _bxs-border-box _pos-relative _mih-0px _miw-0px  _gap-1481558214 _fg-1 _fs-1 _fb-auto  "+(o?" _ml-1316330238":" _ml-1481558400")),children:[!n&&(0,r.jsxs)(s.__,{fontWeight:"bold",children:[(0,r.jsx)(g.I,{children:(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mr-1481558214 ",children:O.createElement(i,H)})}),null!==(t=a._def.label)&&void 0!==t?t:a.name]}),n&&(0,r.jsx)("span",{className:"  is_Spacer _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-1481558276 _miw-1481558276 _fs-0 _pe-none _w-1481558276 _h-1481558276 "}),(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 ",children:l})]},o)},X={ZodString:"",ZodNumber:"0",ZodBoolean:!0,default:""},Q=e=>X.hasOwnProperty(e)?X[e]:"ZodArray"==e?[]:"ZodObject"==e?{}:X.default,K=e=>{var t;let{ele:a,elementDef:s,icon:i,path:l,arrData:n,getElement:d,setFormData:c,data:_,setData:p,mode:m,customFields:u}=e;return(0,r.jsxs)(ea,{ele:a,title:" ("+n.length+")",icon:v.S,path:l,children:[(0,r.jsx)("div",{className:G,children:n.map((e,t)=>(0,r.jsxs)("div",{className:(0,T.concatClassName)(""+(V+(t?B:U))),children:["ZodObject"!=s.type._def.typeName&&(0,r.jsx)(g.I,{children:(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mr-1481558214 _t-20px ",children:"edit"==m||"add"==m?(0,r.jsx)(x.z,{...H}):(0,r.jsx)(h.$,{...H})})}),d({ele:{...s.type._def,_def:s.type._def,name:t},icon:i,i:0,x:0,data:_,setData:p,mode:m,customFields:u,path:[...l,a.name],inArray:!0,arrayName:a.name}),("edit"==m||"add"==m)&&(0,r.jsx)("div",{onClick:()=>{n.splice(t,1),c(a.name,[...n])},className:(0,T.concatClassName)(" _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ml-1481558214 _t-13px _btlr-1307610029 _btrr-1307610029 _bbrr-1307610029 _bblr-1307610029 _pt-1481558214 _pr-1481558214 _pb-1481558214 _pl-1481558214 _als-flex-start _cur-pointer  _bg-0hover-312414245 _o-0active-0d0t746  "+("ZodObject"!=s.type._def.typeName?" ":"  _pos-absolute _r-1316330269 _t-6px")),children:(0,r.jsx)(f.X,{color:"var(--red7)",strokeWidth:2,size:20})})]},t))}),("edit"==m||"add"==m)&&(0,r.jsxs)(o.zx,{mt:"$4",onPress:()=>{let e="ZodLazy"==a._def.typeName?a._def.getter()._def:a._def;"ZodOptional"==e.typeName?e.innerType._def.type._def.typeName:e.type._def.typeName,c(a.name,[...n,Q(s.type._def.typeName)])},children:["Add",null!==(t=a._def.label)&&void 0!==t?t:a.name]})]})},Y=e=>{let{ele:t,elementDef:a,icon:s,path:o,data:i,setData:l,mode:n,customFields:d,inArray:c,arrayName:_,getFormData:p}=e;return(0,r.jsx)(ea,{simple:!0,ele:t,title:c?t._def.keyName?p(t._def.keyName,[...o,t.name]):_+" #"+(t.name+1):t.name,icon:b.a,path:o,children:(0,r.jsx)("div",{className:G,children:Object.keys(a.shape()).map((e,c)=>{let _=a.shape();return(0,r.jsx)("div",{className:(0,T.concatClassName)(" _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0  "+(c?" _mt-1316330238":U)),children:er({ele:{..._[e],name:e},icon:s,i:0,x:0,data:i,setData:l,mode:n,customFields:d,path:[...o,t.name]})},c)})})})},ee=e=>{let{ele:t,icon:a,i:s,inArray:o,eleArray:i,formData:l,generatedOptions:n,setFormData:d}=e,c=["ZodNumber","ZodString","ZodLiteral"],_=i.map(e=>{var t;let a=null!==(t=e.typeName)&&void 0!==t?t:e._def.typeName;return c.includes(a)?String(e.value):JSON.stringify(e.value)});return(0,r.jsx)(J,{ele:t,icon:a,i:s,inArray:o,children:(0,r.jsx)(L,{choices:n.length?n:_,defaultSelections:l,onSetSelections:e=>d(t.name,e)})})},et=e=>{let{ele:t,inArray:a,recordData:s,elementDef:n,icon:d,data:c,setData:_,mode:p,customFields:x,path:m,setFormData:u}=e,[f,h]=(0,O.useState)(!1),[v,g]=(0,O.useState)(""),w=(0,O.useRef)(null),[y,N]=(0,O.useContext)(eo);(0,O.useEffect)(()=>{if(f){let e=setTimeout(()=>{var e;null===(e=w.current)||void 0===e||e.focus()},100);return()=>clearTimeout(e)}},[f]);let S=async()=>{let e=Q(t._def.valueType._def.typeName),a=[...m,t.name,v].join("/");h(!1),g(""),N(function(e,t){let a=t.substring(0,t.lastIndexOf("/")+1),r=e.filter(e=>!e.startsWith(a)||e===a);return r.push(t),r}(y,a)),u(t.name,{...s,[v]:e})};return(0,r.jsxs)(ea,{ele:t,title:a?" #"+(t.name+1):"...",icon:b.a,path:m,children:[(0,r.jsx)("div",{className:G,children:s?Object.keys(s).map((e,a)=>(0,r.jsx)("div",{className:(0,T.concatClassName)(""+(V+(a?B:U))),children:er({ele:{...n.valueType,name:e},icon:d,i:0,x:0,data:c,setData:_,mode:p,customFields:x,path:[...m,t.name]})},a)):null}),(0,r.jsx)(j.a,{acceptCaption:"Add field",setOpen:h,open:f,onAccept:S,title:"Add new field",description:"",children:(0,r.jsx)(i.FA,{f:1,id:"eo-add-field-input",alignItems:"center",mt:"$6",justifyContent:"center",children:(0,r.jsx)(l.II,{f:1,value:v,onChangeText:e=>g(e),textAlign:"center",id:"name",placeholder:"Field name...",ref:w,onKeyPress:e=>{"Enter"===e.key&&S()}})})}),("edit"==p||"add"==p)&&(0,r.jsx)(o.zx,{id:"eo-obj-comp-btn",mt:"$5",onPress:()=>{h(!0)},children:" Add field"})]})},ea=e=>{let{ele:t,title:a,children:s,icon:o,simple:l=!1,path:c}=e,[_,p]=(0,O.useContext)(eo),x=[...c,t.name].join("/"),m=(0,r.jsx)(i.sL,{mb:"$2",id:"eo-formgroup",br:"$5",f:1,elevation:_.includes(x)?10:0,hoverStyle:{elevation:10},children:(0,r.jsx)(n.U,{value:_,onValueChange:e=>p(e),onPress:e=>e.stopPropagation(),type:"multiple",boc:"$gray6",f:1,children:(0,r.jsxs)(n.U.Item,{br:"$5",bw:1,boc:"$gray6",value:x,children:[(0,r.jsx)(n.U.Trigger,{p:0,px:8,height:43,bc:"$transparent",focusStyle:{bc:"$transparent"},br:_.includes(x)?"$0":"$5",btlr:"$5",btrr:"$5",bw:"$0",flexDirection:"row",ai:"center",children:e=>{let{open:t}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.I,{children:l?O.createElement(o,H):(0,r.jsx)(r.Fragment,{})}),(0,r.jsx)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-1481558214 _ff-299667014 _fow-233016140 _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto font_body ",children:a}),(0,r.jsx)("span",{className:"  is_Spacer _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-1316330176 _miw-1316330176 _fs-1 _w-1316330176 _h-1316330176 _pe-none _fg-1 "}),(0,r.jsx)(d.b,{animation:"quick",rotate:t?"180deg":"0deg",children:(0,r.jsx)(u._,{size:"$1"})})]})}}),(0,r.jsx)(n.U.Content,{br:"$5",children:s})]})})});return l?m:(0,r.jsx)(J,{ele:t,icon:o,i:0,children:m})},er=e=>{var t,a,s,o,i,n;let{ele:d,icon:_,i:p,x,data:m,setData:u,mode:f,customFields:h={},path:b=[],inArray:v=!1,arrayName:j=""}=e,y=null!==(s=null===(a=d._def)||void 0===a?void 0:null===(t=a.innerType)||void 0===t?void 0:t._def)&&void 0!==s?s:d._def,S=(e,t)=>{let a=m;b.forEach(e=>{Array.isArray(a)||a.hasOwnProperty(e)||(a[e]={}),a=a[e]}),a[e]=t,u({data:m})},I=(e,t)=>{let a=null!=m?m:{};for(let e of null!=t?t:b)("object"==typeof a&&a.hasOwnProperty(e)||Array.isArray(a)&&a.length>e)&&(a=a[e]);return"string"==typeof a?a:a&&a.hasOwnProperty(e)?a[e]:""},P=y.typeName;if("ZodLazy"==P){let e=y.getter();y=e._def,P=e.constructor.name,e.name=d.name,d=e}if(h.hasOwnProperty(d.name)||h.hasOwnProperty("*")){let e=h.hasOwnProperty(d.name)?h[d.name]:h["*"],t="function"==typeof e.component?e.component(b,I(d.name),e=>S(d.name,e),f,m):e.component;if(t)return e.hideLabel?t:(0,r.jsx)(J,{ele:d,icon:_,i:p,inArray:v,children:t})}if("ZodUnion"==P&&"preview"!=f){let e=y.displayOptions?y.displayOptions:y.options.map(e=>e._def.value),t=y.options.map(e=>e._def.value);d._def.dependsOn&&m&&m[d._def.dependsOn]&&"function"==typeof d._def.generateOptions&&(t=[...e=d._def.generateOptions(m)]);let a=d._def.dependsOn,s=d._def.dependsOnValue;return(0,r.jsx)(J,{ele:d,icon:_,i:p,inArray:v,children:a?m[a]?s?s==m[a]?(0,r.jsx)(w.E,{f:1,data:m,title:d.name,elements:e,value:e[t.indexOf(I(d.name))],setValue:a=>S(d.name,t[e.indexOf(a)])}):(0,r.jsx)(l.II,{focusStyle:{outlineWidth:1},disabled:!0,placeholder:d._def.hint?d._def.hint:"Fill "+a+" property first",bc:"$backgroundTransparent"}):(0,r.jsx)(w.E,{f:1,data:m,title:d.name,elements:e,value:e[t.indexOf(I(d.name))],setValue:a=>S(d.name,t[e.indexOf(a)])}):(0,r.jsx)(l.II,{focusStyle:{outlineWidth:1},disabled:!0,placeholder:d._def.hint?d._def.hint:"Fill "+a+" property first",bc:"$backgroundTransparent"}):(0,r.jsx)(w.E,{f:1,data:m,title:d.name,elements:e,value:e[t.indexOf(I(d.name))],setValue:a=>S(d.name,t[e.indexOf(a)])})})}if("ZodNumber"==P&&"preview"!=f){if(y.checks){let e=y.checks.find(e=>"min"==e.kind),t=y.checks.find(e=>"max"==e.kind);if(e&&t)return(0,r.jsx)(J,{ele:d,icon:_,i:p,inArray:v,children:(0,r.jsx)(g.I,{children:(0,r.jsx)("div",{className:W,children:(0,r.jsx)(N,{onValueChange:e=>S(d.name,e),value:[null!==(o=I(d.name))&&void 0!==o?o:e.value],width:190,min:e.value,max:t.value})})})})}}else if("ZodObject"==P)return(0,r.jsx)(Y,{ele:d,elementDef:y,icon:_,path:b,data:m,setData:u,mode:f,customFields:h,inArray:v,arrayName:j,getFormData:I});else if("ZodArray"==P){let e=I(d.name)?I(d.name):[],t=[];"function"==typeof d._def.generateOptions&&(t=d._def.generateOptions(m));let a=!d._def.innerType&&"ZodUnion"===d._def.type._def.typeName;return a?(0,r.jsx)(ee,{ele:d,icon:_,i:p,inArray:v,eleArray:d._def.type._def.options,formData:e,generatedOptions:t,setFormData:S}):(0,r.jsx)(K,{data:m,setData:u,mode:f,ele:d,elementDef:y,icon:_,customFields:h,path:b,arrData:e||t,getElement:er,setFormData:S})}else if("ZodRecord"==P){let e=I(d.name);return(0,r.jsx)(et,{ele:d,inArray:v,recordData:e,elementDef:y,icon:_,data:m,setData:u,mode:f,customFields:h,path:b,setFormData:S})}else if("ZodBoolean"==P){let e=I(d.name);return(0,r.jsx)(J,{ele:d,icon:_,i:p,inArray:v,children:(0,r.jsx)(g.I,{children:(0,r.jsx)("div",{className:W,children:(0,r.jsx)(c.rs,{disabled:"add"!=f&&"edit"!=f,checked:e,onCheckedChange:e=>S(d.name,e),size:"$2",children:(0,r.jsx)(c.rs.Thumb,{animation:"quick"})})})})})}let k="";return"function"!=typeof d._def.generateOptions||(k=d._def.generateOptions(),I(d.name)||S(d.name,k)),(0,r.jsx)(J,{ele:d,icon:_,i:p,inArray:v,children:(0,r.jsx)("div",{className:M,children:(0,r.jsx)(l.II,{id:"editable-object-input-"+(null==d?void 0:d.name),..."edit"!=f&&"add"!=f?{bw:0,forceStyle:"hover"}:{},focusStyle:{outlineWidth:1},disabled:"view"==f||"preview"==f||"edit"==f&&d._def.static||d._def.dependsOn&&!m[d._def.dependsOn],secureTextEntry:d._def.secret,value:k&&!I(d.name)?k:I(d.name),onChangeText:e=>S(d.name,"ZodNumber"==d._def.typeName?e.replace(/[^0-9.-]/g,""):e),placeholder:m?null!==(n=null!==(i=d._def.hint)&&void 0!==i?i:d._def.label)&&void 0!==n?n:"number"==typeof d.name?"...":d.name:"",autoFocus:0==x&&0==p,onBlur:()=>{if("ZodNumber"==d._def.typeName){let e=parseFloat(I(d.name));isNaN(e)||S(d.name,e)}},bc:"$backgroundTransparent"})})})},es=e=>{let{index:t,data:a,width:s}=e,o=a.ele._def.size||1;return(0,r.jsx)(i.sL,{f:1,width:s*o+(1===o?a.columnMargin/2:(o-1)*a.columnMargin),children:er({ele:a.ele,icon:a.icon,i:a.i,x:a.x,data:a.data||a.defaultData,setData:a.setData,mode:a.mode,customFields:a.customFields})},a.x)},eo=(0,O.createContext)([[],e=>{}]),ei=e=>{let{externalErrorHandling:t,error:a,setError:s,data:l,setData:n,autoWidth:d=!1,columnMargin:c=30,columnWidth:u=350,extraMenuActions:h,disableToggleMode:b,name:v,initialData:w,loadingTop:y,spinnerSize:N,loadingText:L,title:W,sourceUrl:V=null,onSave:H,mode:J="view",model:X,icons:Q={},extraFields:K={},numColumns:Y=1,objectId:ee,onDelete:et=()=>{},deleteable:ea=()=>!0,customFields:er={},...ei}=e,[el,en]=(0,O.useState)(null!=w?w:(0,S.E)("pending")),[ed,ec]=(0,O.useState)(J),[e_,ep]=(0,O.useState)(""),[ex,em]=(0,O.useState)(el),eu=l&&n;l&&n||(l=ex,n=em);let[ef,eh]=(0,O.useState)(!1),[eb,ev]=(0,O.useState)();a&&s||t||(a=eb,s=ev);let[eg,ej]=(0,O.useState)(!1),[ew,ey]=(0,O.useState)(!1),[eN,eS]=(0,O.useState)(!1),eI=(0,O.useRef)(),[eP,ek]=(0,O.useState)([]);(0,I.a)(e=>{"add"!=J&&P.bl.get(V,e)},en,w),(0,O.useEffect)(()=>{el.data&&n(el)},[el]),(0,E.rf)(()=>ec(J),[J]),(0,E.rf)(()=>{eN?ey(!0):eS(!0)},[l]);let e$=(0,O.useMemo)(()=>{let e=X.load(l.data),t=Z.U.load(D.V_.object(K)),a=e.getObjectSchema().isDisplay(ed).merge(t).getLayout(1),r={},s={};return a.forEach((e,t)=>e.forEach((e,a)=>{var o,i;let d=Q[e.name]?Q[e.name]:"edit"==ed||"add"==ed?x.z:m.V,_=null!==(o=e._def.group)&&void 0!==o?o:0;r.hasOwnProperty(_)||(r[_]=[]),e._def.hasOwnProperty("defaultValue")&&(s[e.name]=e._def.defaultValue),r[_].push({id:t+"_"+a,icon:d,i:a,x:t,ele:e,data:l.data,setData:n,mode:ed,size:null!==(i=e._def.size)&&void 0!==i?i:1,numColumns:Y,customFields:er,columnMargin:c,defaultData:s})})),r},[K,l,X,c,Y,ed,J,el]),eC=(0,O.useMemo)(()=>Object.keys(e$).map((e,t)=>(0,r.jsxs)(i.sL,{ref:eI,width:d?"100%":u*Y+(Y>1?Y:1)*c,f:1,children:[(0,r.jsx)("div",{className:M,children:(0,r.jsx)(k.rj,{masonry:!1,containerRef:eI,spacing:c/2,data:e$[e],card:es,itemMinWidth:u,columns:Y})}),"preview"==ed&&(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _t-1316333121 ",children:(0,r.jsx)(z.o,{type:"item",sourceUrl:V,onDelete:et,deleteable:ea,element:X.load(l.data),extraMenuActions:h})})]})),[c,e$,u,Y]),{tint:eA}=(0,R.d5)();return(0,r.jsx)(eo.Provider,{value:[eP,ek],children:(0,r.jsxs)(_.Stack,{width:"100%",...ei,children:[(0,r.jsx)(j.a,{showCancel:!0,acceptCaption:"Discard",cancelCaption:"Keep editing",onAccept:async()=>{let e=await P.bl.get(V);en(e),ec("view")},cancelTint:eA,acceptTint:"red",open:eg,setOpen:ej,title:"Are you sure you want to leave?",description:"",children:(0,r.jsx)($.Z,{mt:"$5",children:"All unsaved changes will be lost"})}),(0,r.jsx)(C.Z,{forceLoad:"add"==ed||l.data,waitForLoading:1e3,spinnerSize:N,loadingText:null!=L?L:"Loading "+ee,top:null!=y?y:-30,atom:l,children:(0,r.jsxs)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _w-10037 ",children:[(0,r.jsxs)("div",{className:"  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ai-center ",children:[(0,r.jsx)(i.sL,{id:"eo-dlg-title",children:null!=W?W:(0,r.jsxs)("h3",{className:"  is_H3 _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _tt-230632984 _ff-299667014 _fow-233016264 _ls-167744183 _fos-229441344 _lh-222976697 _ussel-auto font_heading ",children:[(0,r.jsx)(g.I,{children:(0,r.jsx)("h3",{className:"  is_H3 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _col-549765294 _tt-230632984 _ff-299667014 _fow-233016264 _ls-167744183 _fos-229441344 _lh-222976697 _ussel-auto font_heading ",children:q(J)})})," ".concat(q(v))]})}),!b&&("view"==ed||"edit"==ed)&&(0,r.jsx)("div",{onClick:async()=>{"edit"==ed&&ew?ej(!0):(ep(ed),ec("view"==ed?"edit":"view"))},className:"  _o-0active-0d0t846 _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0  _cur-pointer ",children:(0,r.jsx)(g.I,{children:(0,r.jsx)("div",{className:G,children:"view"==ed?(0,r.jsx)(x.z,{color:"var(--color8)"}):"view"==e_?(0,r.jsx)(f.X,{color:"var(--color8)"}):null})})})]}),(0,r.jsxs)("div",{className:(0,T.concatClassName)(" _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _w-10037 _fg-1  _ai-center _jc-center  "+(W?B:U)),children:[a&&(0,r.jsx)(A.q,{children:(0,r.jsx)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-233016140 _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto font_body ",children:(0,F.e)(a.error)})}),eC,"preview"!=ed&&(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _mt-1316330145 _pt-1481558214 _pr-1481558214 _pb-1316330238 _pl-1481558214 _w-10037 _fg-1 _als-center ",children:("add"==ed||"edit"==ed)&&!eu&&(0,r.jsx)(g.I,{children:(0,r.jsx)(o.zx,{f:1,onPress:async()=>{eh(!0);try{await H(el.data,l.data),e_!=ed&&ec(e_)}catch(e){s(e),console.log("e: ",e)}eh(!1)},children:ef?(0,r.jsx)(p.$,{}):"add"==ed?"Create":"Save"})})})]})]})})]})})};a(44419)},99553:function(e,t,a){"use strict";a.d(t,{rj:function(){return m}});var r=a(52322),s=a(34612),o=a(8939),i=a(2784),l=a(93559),n=a(23724),d=a(11667),c=a(23510);let _={width:0,height:0},p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],[a,r]=(0,i.useState)(_);return(0,i.useLayoutEffect)(()=>{let{current:t}=e;if(t){let e=()=>{let e=getComputedStyle(t),a=parseFloat,s=t.clientWidth-a(e.paddingTop)-a(e.paddingBottom),o=t.clientHeight-a(e.paddingLeft)-a(e.paddingRight);r({height:o,width:s})};return e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}}},t.concat(e.current)),a},x=e=>{let[t,a]=(0,i.useState)(!1),[r,s]=(0,i.useState)(0);return(0,i.useLayoutEffect)(()=>{let t;let{current:a}=e;if(a){let e=()=>{t||(t=window.requestAnimationFrame(()=>{s(a.scrollTop),t=void 0}))};return a.addEventListener("scroll",e),()=>{a.removeEventListener("scroll",e),t&&window.cancelAnimationFrame(t)}}},[e.current]),(0,i.useLayoutEffect)(()=>{a(!0);let e=window.setTimeout(()=>{a(!1)},1e3/6);return()=>window.clearTimeout(e)},[r]),{scrollTop:r,isScrolling:t}},m=i.forwardRef((e,t)=>{let{overScanBy:a=5,masonry:_=!0,containerRef:m,rightGap:u=0,spacing:f,children:h,data:b,card:v,columns:g,itemMinWidth:j=200,gap:w}=e;if(s.$L&&b&&v){if(_&&m){var y,N;let e={current:(null===(y=m.current)||void 0===y?void 0:y.container)?null==m?void 0:null===(N=m.current)||void 0===N?void 0:N.container.firstChild:m.current},{width:t,height:r}=p(e),{scrollTop:s,isScrolling:o}=x(e),i=(0,n.G)({width:Math.max(0,t-u),columnGutter:f,columnWidth:j}),l=(0,d.y)(i);return(0,c.$)({positioner:i,scrollTop:s,isScrolling:o,height:r,items:b,overscanBy:a,resizeObserver:l,render:v})}return(0,r.jsx)(o.sL,{flexWrap:"wrap",children:b.map((e,t)=>(0,r.jsxs)(l.Stack,{m:f/2,children:[" ",i.createElement(v,{index:e.index,data:{...e},width:j})," "]},t))})}if(s.$L)return(0,r.jsx)("div",{ref:t,style:{gap:w,display:"grid",gridTemplateColumns:"repeat( auto-fill, minmax(".concat(j,"px, 1fr) )")},children:h});let S=i.Children.toArray(h);return(0,r.jsx)(o.sL,{alignItems:"center",justifyContent:"center",flexWrap:"wrap",children:S.map((e,t)=>e?(0,r.jsx)(o.sL,{flex:1,minWidth:j,marginRight:w,marginBottom:w,children:e},t):null)})})},96455:function(e,t,a){"use strict";a.d(t,{o:function(){return x}});var r=a(52322),s=a(8939),o=a(93559),i=a(86838),l=a(51813),n=a(2784),d=a(91838),c=a(10281),_=a(13742),p=a(71932);let x=e=>{let{type:t,sourceUrl:a="",enableAddToInitialData:x=!1,onDelete:m,element:u,deleteable:f,extraMenuActions:h=[],hideDeleteButton:b,...v}=e,[g,j]=(0,n.useState)(!1),[w,y]=(0,n.useState)(!1),N=e=>{let{id:t="",type:a,text:o,Icon:i,onPress:l,disabled:n}=e;return(0,r.jsxs)(s.sL,{id:t,ml:"$1",o:1,br:"$5",p:"$3",als:"flex-start",cursor:n?"default":"pointer",pressStyle:n?{}:{o:.7},hoverStyle:n?{}:{bc:"$color5"},onPress:e=>{n||(l("global"===a?"*":u,e),j(!1))},children:[(0,r.jsx)(i,{size:"$1",color:n?"var(--gray9)":"var(--color9)",strokeWidth:2}),(0,r.jsx)("span",{className:"  _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-1481558152 ",children:o})]})};return(0,r.jsxs)(o.Stack,{...v,children:[(0,r.jsx)(l.a,{acceptCaption:"Delete",setOpen:y,open:w,onAccept:async e=>{await m(a,u.data[u.idField]),e(!1)},title:"Delete ",description:"Are you sure want to delete this item?",w:280,children:(0,r.jsx)("div",{className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 _jc-center _ai-center "})}),(0,r.jsxs)(i.J2,{onOpenChange:j,open:g,placement:"bottom",children:[(0,r.jsx)(i.J2.Trigger,{children:(0,r.jsx)(p.z,{id:"more-btn-".concat(a.split("/").slice(-1)),Icon:c.h,onPress:e=>{e.stopPropagation(),j(!0)},ml:"$3"})}),(0,r.jsx)(i.J2.Content,{padding:0,space:0,left:"$7",top:"$2",bw:1,boc:"$borderColor",bc:"$color1",children:(0,r.jsx)(d.I,{children:(0,r.jsx)("div",{onClick:e=>e.stopPropagation(),className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ai-center _jc-center _pt-1481558152 _pr-1481558152 _pb-1481558152 _pl-1481558152 ",children:(0,r.jsxs)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 ",children:[h.map((e,s)=>{var o;return(!e.menus&&"item"===t||e.menus&&(null===(o=e.menus)||void 0===o?void 0:o.includes(t)))&&e.isVisible&&e.isVisible(u)&&(0,r.jsx)(N,{id:"more-btn-".concat(a.split("/").slice(-1),"-option-").concat(s+1),type:t,text:"function"==typeof e.text?e.text(t):e.text,Icon:e.icon,onPress:e.action},s)}),!1,b?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(N,{type:t,text:"Delete",id:"more-btn-".concat(a.split("/").slice(-1),"-delete"),Icon:_.V,disabled:!f(u),onPress:(e,t)=>{t.stopPropagation(),y(!0),j(!1)}})]})})})})]})]})};a(66286)},26887:function(e,t,a){"use strict";a.d(t,{a:function(){return s}});var r=a(57643);let s=(e,t,a)=>(0,r.qR)(()=>{a&&"pending"!=a.status?t(a):e(t)})},82695:function(e,t,a){"use strict";a.d(t,{N:function(){return l},v:function(){return i}});var r=a(5632),s=a(57643);let o=(e,t)=>{let{[t]:a,...r}=e;return r},i=e=>{let{query:t}=(0,r.useRouter)();(0,s.rf)(()=>{e(t)},[t])},l=e=>{let{replace:t,push:a,query:s}=(0,r.useRouter)(),i=()=>Object.keys(null!=e?e:{}).reduce((t,a)=>""!==e[a]?{...t,[a]:e[a]}:t,{});return{push:function(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];a({query:{...s,...i(),[e]:t}},void 0,{shallow:r})},mergePush:e=>{a({query:{...s,...i(),...e}},void 0,{shallow:!0})},removePush:e=>{a({query:o(s,e)},void 0,{shallow:!0})},removeReplace:e=>{t({query:o(s,e)},void 0,{shallow:!0})},replace:(e,a)=>{t({query:{...s,...i(),[e]:a}},void 0,{shallow:!0})},mergeReplace:a=>{t({query:{...i(),...e,...a}},void 0,{shallow:!0})}}}},48478:function(){},44419:function(){},12219:function(){},5006:function(){},62431:function(){},66286:function(){},9807:function(){},51185:function(){}}]);