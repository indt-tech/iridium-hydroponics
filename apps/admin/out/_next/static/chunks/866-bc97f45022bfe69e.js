(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[866],{55858:function(e,t,r){"use strict";r.d(t,{U:function(){return a}});var s=r(34406);class a{getFields(){return Object.keys(this.shape)}getFieldKeyDefinition(e,t){return this.shape[e]?this.shape[e]._def[t]:void 0}applyGenerators(e){let t={...e};return Object.keys(this.shape).forEach(r=>{if(this.shape[r]._def.generate){let s=this.shape[r]._def.generate;(!e[r]||s.force)&&(t[r]="function"==typeof s.generator?s.generator(e):s.generator)}}),t}async apply(e,t,r,a){let i={...t},l=this.is("events"),o=Object.keys(l.shape);for(var n=0;n<o.length;n++){let t=o[n],_=l.shape[t],c=void 0!==s&&s.versions&&s.versions.node,p=_._def.events.filter(t=>t.eventName==e&&(!t.eventContext||"client"==t.eventContext&&!c||"server"==t.eventContext&&c));for(var d=0;d<p.length;d++){let e=p[d];r[e.eventHandler]&&(i=await r[e.eventHandler](t,e,i,a))}}return i}getLayout(e){let t=[[]],r=0;return Object.keys(this.shape).forEach(s=>{let a=this.shape[s];t[r].length==e&&(t.push([]),r++),t[r].push({...a,name:s})}),t}getFirst(e){return Object.keys(this.shape).find(t=>{if(this.shape[t]._def[e])return t})}isDisplay(e){let t={};return Object.keys(this.shape).forEach(r=>{(!this.shape[r]._def.display||this.shape[r]._def.display.includes("*")||this.shape[r]._def.display.includes(e))&&(t[r]=this.shape[r])}),new a(t)}is(e){let t={};return Object.keys(this.shape).forEach(r=>{this.shape[r]._def[e]&&(t[r]=this.shape[r])}),new a(t)}isNot(e){let t={};return Object.keys(this.shape).forEach(r=>{this.shape[r]._def[e]||(t[r]=this.shape[r])}),new a(t)}isAfter(e){let t={};return Object.keys(this.shape).forEach(r=>{var s;(null===(s=this.shape[r]._def)||void 0===s?void 0:s.after)&&this.shape[r]._def.after==e&&(t[r]=this.shape[r])}),new a(t)}isBefore(e){let t={};return Object.keys(this.shape).forEach(r=>{var s;(null===(s=this.shape[r]._def)||void 0===s?void 0:s.before)&&this.shape[r]._def.before==e&&(t[r]=this.shape[r])}),new a(t)}merge(e){let t={};return Object.keys(this.shape).forEach(r=>{let s=e.isBefore(r);(t={...t,...s.shape})[r]=this.shape[r];let a=e.isAfter(r);t={...t,...a.shape}}),new a(t)}static load(e){return new a(e.shape)}constructor(e){this.shape=e}}},10347:function(e,t,r){"use strict";r.d(t,{t:function(){return i}});var s=r(52322),a=r(2784);let i=(0,a.createContext)({active:0,setActive:e=>{}}),l=a.forwardRef((e,t)=>{let{initialState:r=0,children:l}=e,[o,n]=(0,a.useState)(r);return(0,s.jsx)(i.Provider,{value:{active:o,setActive:n},children:l})});t.Z=l},91681:function(e,t,r){"use strict";var s=r(52322),a=r(2784),i=r(10347),l=r(17277);let o=a.forwardRef((e,t)=>{let{activeId:r,onSetActive:o=e=>{},...n}=e,{active:d,setActive:_}=(0,a.useContext)(i.t);return(0,s.jsx)(l.Z,{onPress:()=>{o(r),_(r)},theme:r===d?"active":null,chromeless:r!==d,...n})});t.Z=o},61667:function(e,t,r){"use strict";var s=r(52322),a=r(2784),i=r(10347),l=r(52026);let o=a.forwardRef((e,t)=>{let{activeId:r,fast:o=!1,children:n,...d}=e,{active:_}=(0,a.useContext)(i.t),c=_==r;return o?(0,a.useMemo)(()=>(0,s.jsx)(l.Stack,{ref:t,position:"absolute",top:c?0:-1e4,...d,children:n}),[c]):c?(0,s.jsx)(l.Stack,{...d,ref:t,children:n}):null});t.Z=o},50897:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var s=r(52322);r(2784);var a=r(25237),i=r.n(a);let l=i()(()=>Promise.all([r.e(7788),r.e(2881)]).then(r.bind(r,90704)).then(e=>e.default),{loadableGenerated:{webpack:()=>[90704]},ssr:!1}),o=i()(()=>r.e(4210).then(r.bind(r,4210)).then(e=>e.default),{loadableGenerated:{webpack:()=>[4210]},ssr:!1}),n={component:e=>{let{pagination:t,conditionalRowStyles:r,rowsPerPage:a,columns:i,rows:n,onRowPress:d,handlePerRowsChange:_,handlePageChange:c,totalRows:p,currentPage:x,handleSort:m}=e;return(0,s.jsx)(o,{print:!1,export:!1,filter:!1,columns:i,data:n,children:(0,s.jsx)(l,{conditionalRowStyles:r,responsive:!0,striped:!0,pointerOnHover:!0,columns:i,data:n,defaultSortField:"created",defaultSortAsc:!1,onRowClicked:d,onChangeRowsPerPage:_,onChangePage:c,paginationTotalRows:p,paginationDefaultPage:x,pagination:t,paginationServer:!0,sortServer:!0,paginationPerPage:a,onSort:m,paginationRowsPerPageOptions:[10,15,20,25,50,100,500,1e3]})})},column:function(e,t,r,s,a){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return{name:e,selector:t,sortable:r,cell:s,grow:a,minWidth:i}},columns:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t}}},13997:function(e,t,r){"use strict";r.d(t,{V:function(){return ec}});var s=r(52322),a=r(8939),i=r(89929),l=r(66306),o=r(48115),n=r(2784),d=r(39684),_=r(26887);let c=function(e,t,r,s){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],[i,l]=(0,n.useState)(e);(0,_.a)(e=>t(e),l,i);let{message:o}=(0,d.mU)(r);return(0,n.useEffect)(()=>{if(o&&o.message){let e="string"==typeof o.message?o.message:JSON.stringify(o.message),r=JSON.parse(e),[,,i]=o.topic.split("/");a?l(e=>{let t=e.data||{},a=t.items||[];switch(i){case"create":return{...e,data:{...t,items:[r,...a]}};case"delete":let l=a.filter(e=>s.load(e).getId()!==s.load(r).getId());return{...e,data:{...t,items:l}};case"update":let o=a.map(e=>s.load(e).getId()===s.load(r).getId()?r:e);return{...e,data:{...t,items:o}};default:return e}}):t(l)}},[o]),[i,l]};var p=r(52026),x=r(99553),m=r(24066),f=r(6289),u=r(40914),h=r(94484),b=r(91838);let v=e=>{var t;let{index:r,data:a,width:i}=e,l=a.element.data,o=a.model.load(l),n=(0,h.d5)(),d=null!==(t=null==a?void 0:a.icon)&&void 0!==t?t:(0,s.jsx)(s.Fragment,{});return a.getCard?a.getCard(l,i):(0,s.jsx)(u.q,{height:a.itemHeight,cursor:"pointer",topBarOutSideScrollArea:!1,backgroundColor:"$color1",elevation:"$0",hoverStyle:{...a.disableItemSelection?{}:{o:.8,backgroundColor:"$"+n.tint+"1",elevation:"$1"}},borderWidth:1,pointerEvents:"none",pointerEventsControls:"none",onPress:()=>a.onSelectItem(o),...a.getPicture?{image:a.getPicture(l,i),hasPicture:!0}:{},children:a.getBody?a.getBody(l,i):(0,s.jsx)(p.Stack,{mb:"$4",width:i,children:(0,s.jsx)(m.G,{initialData:a.element,name:o.getId(),spinnerSize:75,loadingText:(0,s.jsxs)("div",{className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ai-center _jc-center ",children:["Loading data...",(0,s.jsx)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-bold _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto font_body "})]}),objectId:o.getId(),sourceUrl:a.sourceUrl+"/"+o.getId(),mode:"preview",model:a.model,extraFields:a.extraFields,icons:a.icons,customFields:a.customFields,columnWidth:i-a.contentMargin,onDelete:a.onDelete,deleteable:a.deleteable,extraMenuActions:a.extraMenuActions,title:(0,s.jsxs)("div",{className:"  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mt-1316330145 _ml-1316330145 _ai-center ",children:[(null==a?void 0:a.icon)&&(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mr-1481558214 ",children:(0,s.jsx)(b.I,{children:(0,s.jsx)(d,{color:"var(--color7)"})})}),(0,s.jsx)("h3",{className:"  is_H3 _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _tt-230632984 _ff-299667014 _fow-233016264 _ls-167744183 _fos-229441344 _lh-222976697 _ussel-auto font_heading ",children:null==a?void 0:a.name})]})})},l.key)})},g=e=>{let{overScanBy:t=5,gridElementCard:r,itemMinWidth:a=400,itemHeight:i,rightGap:l=30,contentMargin:o=50,onSelectItem:d=e=>{},disableItemSelection:_=!1,extraMenuActions:c,spacing:m=20,getPicture:u,getBody:h,getCard:b,model:g,items:w,sourceUrl:j,customFields:y,onDelete:N,deleteable:k,extraFields:S,icons:P,children:I,name:C,icon:$,...O}=e,A=(0,n.useRef)(null),E=w.map((e,t)=>({id:"item_"+t,element:(0,f.E)("loaded",e),model:g,sourceUrl:j,customFields:y,extraFields:S,icons:P,itemMinWidth:a,getPicture:u,getBody:h,getCard:b,spacing:m,contentMargin:o,onSelectItem:d,onDelete:N,deleteable:k,itemHeight:i,extraMenuActions:c,disableItemSelection:_,name:C,icon:$}));return(0,s.jsxs)(p.Stack,{f:1,ref:A,...O,children:[(0,s.jsx)(x.rj,{overScanBy:t,rightGap:l,containerRef:A,spacing:m,data:E,card:null!=r?r:v,itemMinWidth:a},E.length),I]})};r(9807);var w=r(43260);let j=e=>{let{index:t,data:r,width:a}=e,i=r.element,l=r.model.load(i),o=r.onDelete;return(0,s.jsx)(p.Stack,{width:a,children:(0,s.jsx)(w.I,{compact:!0,innerContainerProps:{mb:"$3",mt:"$5",mx:"$3"},onDelete:o,json:i,name:l.getId(),isTemplate:!1})},i.key)},y=e=>{var t,r;let{itemMinWidth:a=400,rightGap:i=30,contentMargin:l=40,spacing:o=20,items:d,model:_,...c}=e,m=(0,n.useRef)(null),f=null==d?void 0:null===(r=d.data)||void 0===r?void 0:null===(t=r.items)||void 0===t?void 0:t.map((e,t)=>({id:"item_"+t,element:e,model:_,onDelete:c.onDelete}));return(0,s.jsx)(p.Stack,{ml:"$5",ref:m,f:1,...c,children:(0,s.jsx)(x.rj,{rightGap:i,containerRef:m,spacing:o,data:f,card:j,itemMinWidth:a},f.length)})};var N=r(41473),k=r(2715),S=r(16399),P=r(10836);let I=e=>{let{items:t,model:r,sourceUrl:i,extraFields:l,icons:o,customFields:d,onDelete:_,deleteable:c,extraMenuActions:x,...m}=e,{resolvedTheme:f}=(0,S.P)(),u=(0,n.useRef)(null),{tint:v}=(0,h.d5)(),[g,w]=(0,n.useState)({location:{lat:"",lon:""}}),j=t.data.items.map(e=>{let t=r.load(e);return{modelItem:t,location:t.getLocation()}}).filter(e=>e.location);return(0,n.useMemo)(()=>j.map((e,t)=>(0,s.jsx)(k.Jx,{color:"var(--"+v+"10)",longitude:e.location.lon,latitude:e.location.lat,anchor:"bottom",onClick:t=>{t.originalEvent.stopPropagation(),w(e)}},"marker-".concat(t))),[t.data.items,v]),(0,s.jsx)(p.Stack,{ref:u,f:1,...m,children:(0,s.jsx)(a.FA,{flex:1,alignItems:"center",justifyContent:"center",space:"$4",mt:"$-10",children:(0,s.jsxs)(P.Z,{children:[(0,s.jsx)(N.u,{size:"$7"}),(0,s.jsxs)("h2",{className:"  is_H2 _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-1316330269 _mr-0px _mb-0px _ml-0px _tt-230633015 _ff-299667014 _fow-233016295 _ls-167744214 _fos-229441375 _lh-222976728 _ussel-auto font_heading ",children:[(0,s.jsx)("span",{className:"  _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px ",children:"Missing "}),(0,s.jsx)(b.I,{children:(0,s.jsx)("span",{className:"  _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _col-137137640 ",children:"API Key"})})]}),(0,s.jsx)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-1316330269 _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-233016233 _ls-167744152 _fos-229441313 _lh-222976666 _ussel-auto _ta-center font_body ",children:"Map rendering is unavailable without a Mapbox access token."}),(0,s.jsx)(b.I,{children:(0,s.jsxs)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-233016233 _ls-167744152 _fos-229441313 _lh-222976666 _ussel-auto _ta-center font_body ",children:["Please visit ",(0,s.jsx)("a",{style:{fontWeight:"bold",color:"var(--color10)"},href:"https://www.mapbox.com",target:"_blank",rel:"noopener noreferrer",children:"Mapbox"})," to create your token and enable map features."]})})]})})})};r(51185);var C=r(96666),$=r(10347),O=r(51813),A=r(65126),E=r(91681),F=r(53726),D=r(68604),Z=r(81815),R=r(99062),T=r(57909),z=r(57441),L=r(40641),M=r(62624),W=r(42738),U=r(89560),V=r(39608),B=r(30195),q=r(53763),H=r(9393),G=r(57643),J=r(82695),X=r(26879),K=r(50897),Q=r(1963),Y=r(61773),ee=r(96455),et=r(71932);let er=e=>{var t,r,a;let{sourceUrl:i,onDelete:l=()=>{},items:o,model:n,deleteable:d=()=>{},extraMenuActions:_=[],enableAddToInitialData:c,selected:x=[],rowIcon:m=U.z,columns:f,state:u={},setSelected:h=e=>{},onSelectItem:v=e=>{}}=e,{push:g,mergePush:w}=(0,J.N)(u),j=[{when:e=>x.some(t=>t.id===n.load(e).getId()),style:{backgroundColor:"var(--color4)"},"&:hover":{backgroundColor:"var(--color4)"}}],y=n.load({}),N=y.getObjectSchema().isDisplay("table"),k=["ZodString","ZodNumber","ZodBoolean"],S=null!=f?f:K.Z.columns(...Object.keys(N.shape).filter(e=>{var t;return k.includes(null===(t=N.shape[e]._def)||void 0===t?void 0:t.typeName)}).map(e=>{var t;return K.Z.column(null!==(a=null===(t=N.shape[e]._def)||void 0===t?void 0:t.label)&&void 0!==a?a:e,t=>t[e],!0)}));return(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _pt-1481558276 _fw-wrap ",children:(0,s.jsx)(b.I,{children:(0,s.jsx)(K.Z.component,{pagination:!1,conditionalRowStyles:j,rowsPerPage:u.itemsPerPage?u.itemsPerPage:25,handleSort:(e,t)=>w({orderBy:e.selector,orderDirection:t}),handlePerRowsChange:e=>g("itemsPerPage",e),handlePageChange:e=>g("page",parseInt(e,10)-1),currentPage:(isNaN(parseInt(u.page,10))?0:parseInt(u.page,10))+1,totalRows:null==o?void 0:null===(t=o.data)||void 0===t?void 0:t.total,columns:[K.Z.column((0,s.jsx)(p.Theme,{reset:!0,children:(0,s.jsxs)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 ",children:[(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mt-1481558214 _ml-1481558152 _o-0d0t846 ",children:(0,s.jsx)(X.XZ,{focusStyle:{outlineWidth:0},checked:x.length>1,onPress:e=>{if(x.length)h([]);else{var t,r;console.log("selection all: ",null==o?void 0:null===(t=o.data)||void 0===t?void 0:t.items),h(null==o?void 0:null===(r=o.data)||void 0===r?void 0:r.items)}},children:(0,s.jsx)(X.XZ.Indicator,{children:(0,s.jsx)(Q.G,{})})})}),x.length>1&&(0,s.jsx)(ee.o,{enableAddToInitialData:c,type:"bulk",mt:"1px",ml:"-5px",element:x,sourceUrl:i,deleteable:d,onDelete:l,extraMenuActions:_})]})}),()=>"",!1,e=>(0,s.jsx)(p.Theme,{reset:!0,children:(0,s.jsxs)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ml-1481558152 _o-0d0t846 ",children:[(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mt-1481558214 ",children:(0,s.jsx)(X.XZ,{focusStyle:{outlineWidth:0},onPress:()=>{let t=e=>n.load(e).getId(),r=t(e),s=x.some(e=>t(e)===r);s?h(x.filter(e=>t(e)!==r)):h([...x,e])},checked:x.some(t=>n.load(t).getId()===n.load(e).getId()),children:(0,s.jsx)(X.XZ.Indicator,{children:(0,s.jsx)(Y.J,{})})})}),(0,s.jsx)(ee.o,{enableAddToInitialData:c,type:"item",ml:"-5px",mt:"1px",element:n.load(e),sourceUrl:i+"/"+n.load(e).getId(),deleteable:d,onDelete:l,extraMenuActions:_}),(0,s.jsx)(et.z,{Icon:m,onPress:()=>v(n.load(e))})]})}),!0,"115px"),...S],rows:null==o?void 0:null===(r=o.data)||void 0===r?void 0:r.items,onRowPress:e=>v(n.load(e))})})})};r(12219);var es=r(61667),ea=r(89711),ei=r(95753),el=r(46835),eo=r(5632);let en="  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ml-1316330238 _ai-center ",ed="  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ai-center _ml-1481558152 ",e_="  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-233016140 _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto font_body ",ec=(0,n.forwardRef)((e,t)=>{let{onSelectItem:r,itemData:d,rowIcon:_,disableViewSelector:p=!1,initialItems:x,sourceUrl:u,numColumnsForm:h=1,name:v,pluralName:w,entityName:j,hideAdd:N=!1,enableAddToInitialData:k=!1,pageState:S,icons:X={},model:K,extraFields:Q={},columns:Y,onEdit:ec=e=>e,onDelete:ep=e=>e,onAdd:ex=e=>e,views:em,extraViews:ef=[],openMode:eu="edit",disableToggleMode:eh,customFields:eb={},dataTableRawProps:ev={},dataTableListProps:eg={},dataTableGridProps:ew={},dataMapProps:ej={},extraFieldsForms:ey={},extraFieldsFormsEdit:eN={},extraFieldsFormsAdd:ek={},customFieldsForms:eS={},defaultView:eP="list",disableViews:eI=[],toolBarContent:eC=null,onAddButton:e$,extraMenuActions:eO=[],deleteable:eA=()=>!0,objectProps:eE={},refreshOnHotReload:eF=!1,quickRefresh:eD=!1}=e,eZ=null!==(e8=null!=j?j:w)&&void 0!==e8?e8:v+"s",{query:eR}=(0,eo.useRouter)(),[eT,ez]=(0,n.useState)(null!=S?S:eR),eL=async e=>{let t=await o.bl.get({url:u,...eT});e(t)},[eM,eW]=c(x,eL,"notifications/"+K.load({}).getModelName()+"/#",K,eD),[eU,eV]=(0,n.useState)(null!=x?x:(0,f.E)("pending")),[eB,eq]=(0,n.useState)(!1),{push:eH,mergePush:eG,removePush:eJ,replace:eX}=(0,J.N)(eT),[eK,eQ]=(0,n.useState)([]),[eY,e0]=(0,n.useState)(d),{search:e1,setSearch:e2,setSearchName:e4}=(0,n.useContext)(el.c),e5=eO&&eO.some(e=>e.menus&&e.menus.includes("global"));(0,J.v)(ez),(0,n.useEffect)(()=>{},[]),(0,n.useEffect)(()=>{eM&&eM.isLoaded&&eV(eM)},[eM]),(0,G.rf)(()=>{e1?eH("search",e1,!1):eJ("search")},[e1]),(0,n.useEffect)(()=>{e4(eZ)}),(0,G.rf)(()=>{eL(eW)},[eT.orderBy+"_"+eT.itemsPerPage+"_"+eT.page+"_"+eT.search+"_"+eT.orderDirection]);let e6=(0,q.Py)();var e3,e7,e9,e8,te,tt,tr,ts=[{name:"list",icon:R.a,component:er,props:{sourceUrl:u,onDelete:async e=>{if(Array.isArray(eK)&&eK.length&&u){let e=eK.map(e=>o.bl.get("".concat(u,"/").concat(K.load(e).getId(),"/delete")));await Promise.all(e),eQ([])}else u&&await o.bl.get("".concat(e,"/delete"));ep({sourceUrl:e,selected:eK})},onSelectItem:r||(e=>eX("item",e.getId())),deleteable:eA,enableAddToInitialData:k,extraMenuActions:eO,items:eM,model:K,selected:eK,setSelected:eQ,rowIcon:"edit"==eu?U.z:V.b,columns:Y,state:eT,...eg}},{name:"grid",icon:Z.J,component:g,props:{mt:"$8",model:K,items:null==eM?void 0:null===(e3=eM.data)||void 0===e3?void 0:e3.items,sourceUrl:u,customFields:eb,extraFields:Q,icons:X,ml:"$5",deleteable:eA,onDelete:async e=>{await o.bl.get(e+"/delete"),ep({sourceUrl:e,selected:eK})},onSelectItem:r||(e=>eX("item",e.getId())),extraMenuActions:eO,itemMinHeight:320,itemMinWidth:320,spacing:20,name:v,icon:_,...ew}},{name:"raw",icon:T.S,component:y,props:{mt:"$8",items:eM,model:K,onDelete:async e=>{await o.bl.get("".concat(u,"/").concat(e,"/delete")),ep({sourceUrl:u,selected:eK,key:e})},...ev}}];let ta={name:"map",icon:W.$,component:I,props:{mt:"$3",onDelete:async e=>{await o.bl.get("".concat(u,"/").concat(e,"/delete"))},items:eM,model:K,sourceUrl:u,extraFields:Q,icons:X,customFields:eb,deleteable:eA,extraMenuActions:eO,...ej}},ti=K.load({}).getObjectSchema().is("location");ti.getFields().length&&(ts=[...ts,ta]);let tl=(null!=em?em:[...ts,...ef]).filter(e=>!eI.includes(e.name)),to=-1!=tl.findIndex(e=>e.name==eT.view)?tl.findIndex(e=>e.name==eT.view):tl.findIndex(e=>e.name==eP),tn=e=>{let t=e.split("/");return t.pop()},td=eU&&eU.isLoaded?Math.ceil((null===(e7=eU.data)||void 0===e7?void 0:e7.total)/(null===(e9=eU.data)||void 0===e9?void 0:e9.itemsPerPage)):0;return eM&&eM.isError?(0,s.jsxs)(P.Z,{children:["Error: ",eM.error&&eM.error.error?eM.error.error:eM.error]}):(0,s.jsx)(C.Z,{atom:eU,children:(0,s.jsx)("div",{ref:t,className:"  _ai-stretch _dsp-flex _fd-column _bxs-border-box _pos-relative _mih-0px _miw-0px  _h-10037 _fg-1 _fs-1 _fb-auto ",children:(0,s.jsxs)($.Z,{initialState:-1==to?0:to,children:[eT.editFile&&(0,s.jsx)(ea.l,{id:"file-widget-"+tn(null!==(te=eT.editFile)&&void 0!==te?te:"").split(".")[0],isFull:!1,hideCloseIcon:!1,isModified:!0,setIsModified:()=>{},icons:[(0,s.jsx)(ei.q,{onPress:()=>{eJ("editFile")},children:(0,s.jsx)(z.X,{color:"var(--color)",size:"$1"})})],currentFileName:tn(null!==(tt=eT.editFile)&&void 0!==tt?tt:""),currentFile:eT.editFile}),(0,s.jsx)(O.a,{integratedChat:!0,p:"$2",pt:"$5",pl:"$5",setOpen:eq,open:eB,hideAccept:!0,description:"",children:(0,s.jsx)(a.FA,{f:1,jc:"center",ai:"center",id:"admin-dataview-create-dlg",children:(0,s.jsx)(i.p,{maxHeight:"90vh",children:(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mr-1316330145 ",children:(0,s.jsx)(m.G,{id:"admin-eo",name:v,numColumns:h,mode:"add",onSave:async(e,t)=>{try{let e=K.load(t),r=eM.data.items.find(t=>t.id===e.getId());if(r)throw{error:"This id already exists"};let s=await o.bl.post(u,ex(e.create().getData()));if(s.isError)throw s.error;eq(!1),e6.show(v+" created",{message:e.getId()})}catch(e){throw console.log("original error: ",e,e.flatten()),(0,f.E)("error",null,e instanceof B.z.ZodError?e.flatten():e)}},model:K,extraFields:{...Q,...ey,...ek},icons:X,customFields:{...eb,...eS},...eE})})})})}),(0,s.jsx)(O.a,{integratedChat:!0,p:"$1",pt:"$5",pl:"$5",hideAccept:!0,acceptCaption:"Save",setOpen:e=>{e0(void 0),eJ("item")},open:eT.item,description:"",children:(0,s.jsx)("div",{className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 _jc-center _ai-center ",children:(0,s.jsx)(i.p,{maxHeight:"90vh",children:(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mr-1316330238 ",children:(0,s.jsx)(m.G,{disableToggleMode:eh,initialData:eY,name:v,spinnerSize:75,loadingText:(0,s.jsxs)("div",{className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ai-center _jc-center ",children:["Loading data for ",v,(0,s.jsx)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-bold _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto font_body ",children:eT.item})]}),objectId:eT.item,sourceUrl:u+"/"+eT.item,numColumns:h,mode:eu,onSave:async(e,t)=>{try{e0(void 0);let r=K.load(t).getId(),s=await o.bl.post(u+"/"+r,ec(K.load(e).update(K.load(t)).getData()));if(s.isError)throw s.error;let{item:a,...i}=eT;ez(i),e6.show(v+" updated",{message:"Saved new settings for: "+r})}catch(e){throw(0,f.E)("error",null,e instanceof B.z.ZodError?e.flatten():e)}},model:K,extraFields:{...Q,...ey,...eN},icons:X,customFields:{...eb,...eS},...eE})})})})}),!eT.editFile&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _pt-1481558152 _pr-1316330300 _pl-1316330300 _mb-1481558276 ",children:[(0,s.jsxs)("div",{className:"  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _l--12px _fg-1 _ai-center ",children:[_&&(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mr-1481558152 ",children:(0,s.jsx)(b.I,{children:(0,s.jsx)(_,{color:"var(--color7)"})})}),(0,s.jsx)("p",{className:e_,children:(0,s.jsx)("span",{className:"  _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _fos-229441251 _col-137137671 ",children:w?w.charAt(0).toUpperCase()+w.slice(1):v.charAt(0).toUpperCase()+v.slice(1)+"s"})}),e5?(0,s.jsx)(b.I,{children:(0,s.jsx)(ee.o,{type:"global",sourceUrl:"",hideDeleteButton:!0,element:"",extraMenuActions:eO})}):(0,s.jsx)(s.Fragment,{}),eC]}),(0,s.jsxs)("div",{className:"  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ai-center ",children:[(0,s.jsx)("div",{className:ed,children:eU.isLoaded&&(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ml-1481558214 ",children:(0,s.jsxs)("div",{className:en,children:[(0,s.jsx)("div",{className:en,children:(0,s.jsxs)("span",{className:"  _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _fos-14px _col-137137640 ",children:[eU.data.itemsPerPage*eU.data.page+1,"-",Math.min(eU.data.total,eU.data.itemsPerPage*(eU.data.page+1))," of ",eU.data.total]})}),(0,s.jsxs)(b.I,{children:[(0,s.jsx)(et.z,{Icon:L.s,onPress:e=>{e.stopPropagation(),eU.data.page>0&&eH("page",eU.data.page-1)},ml:"$3",disabled:!(eU.data.page>0)}),(0,s.jsx)("span",{className:"  is_Spacer _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-1481558152 _miw-1481558152 _fs-0 _pe-none _w-1481558152 _h-1481558152 "}),(0,s.jsx)(et.z,{Icon:M._,onPress:e=>{e.stopPropagation(),eU.data.page<td-1&&eH("page",eU.data.page+1)},ml:"$3",disabled:!(eU.data.page<td-1)})]})]})})}),(0,s.jsxs)("div",{className:ed,children:[!p&&(0,s.jsx)(A.Z,{marginRight:"$3",children:tl.map((e,t)=>(0,s.jsx)(E.Z,{id:"tableView-"+e.name,onSetActive:()=>eH("view",e.name),activeId:t,children:n.createElement(e.icon,{size:"$1",strokeWidth:1})},t))}),!N&&(0,s.jsx)(b.I,{children:(0,s.jsx)(l.zx,{id:"admin-dataview-add-btn",hoverStyle:{o:1},o:.7,circular:!0,onPress:()=>{e$?e$():eq(!0)},chromeless:!0,children:(0,s.jsx)(D.v,{color:"$color10"})})})]})]})]}),eM&&eM.isError&&(0,s.jsx)(F.q,{children:(0,s.jsx)("p",{className:e_,children:(0,H.e)(eM.error)})}),(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 ",children:(0,s.jsx)(C.Z,{atom:eU,children:tl.map((e,t)=>(0,s.jsx)(es.Z,{height:"100%",activeId:t,children:n.createElement(e.component,{...e.props})},t))})})]})]})})})});r(48478)},24066:function(e,t,r){"use strict";r.d(t,{G:function(){return el}});var s=r(52322),a=r(80939),i=r(66306),l=r(8939),o=r(84291),n=r(45734),d=r(59928),_=r(36907),c=r(52026),p=r(60545),x=r(89560),m=r(32627),f=r(60166),u=r(57441),h=r(7324),b=r(99062),v=r(57909),g=r(91838),w=r(51813),j=r(48715),y=r(4273);function N(e){let{showLabel:t=!0,containerProps:r,defaultValue:a,children:i,...o}=e;return(0,s.jsxs)(l.sL,{f:1,...r,children:[(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 ",children:(0,s.jsxs)(y.iR,{f:1,defaultValue:[50],min:0,max:100,step:1,...o,children:[(0,s.jsx)(y.iR.Track,{f:1,children:(0,s.jsx)(y.iR.TrackActive,{})}),(0,s.jsx)(y.iR.Thumb,{index:0,size:"$1",circular:!0,elevate:!0}),i]})}),t&&(0,s.jsx)("div",{className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _fs-0 _ai-flex-end _miw-40px _t--8px ",children:o.value})]})}r(5006);var k=r(6289),S=r(26887),P=r(48115),I=r(99553),C=r(10836),$=r(96666),O=r(53726),A=r(2784),E=r(9393),F=r(55858),D=r(75370),Z=r(57643),R=r(94484),T=r(96455);function z(e){let{choices:t,defaultSelections:r=[],onSetSelections:a,maxHeight:i="150px"}=e,o=(0,A.useRef)(null),[n,d]=(0,A.useState)(!1),[_,c]=(0,A.useState)(r),p=(e,r)=>{let s=t[t.indexOf(r)];if(_.includes(s)){let e=_.filter(e=>e!==s);a(e),c(e)}else{let e=_.concat(s);a(e),c(e)}};return(0,s.jsx)(g.I,{children:(0,s.jsxs)("div",{ref:o,onClick:()=>d(e=>!e),className:"  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0  _bg-115898854 _w-10037 _h-797770429 _jc-441309761 _ai-center _pr-10px _pl-10px _pt-7px _pb-7px _btlr-6px _btrr-6px _bbrr-6px _bblr-6px _outlineColor-791969495 _outlineWidth-1px _outlineStyle-solid _btc-791969495 _brc-791969495 _bbc-791969495 _blc-791969495 _cur-pointer ",children:[(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fw-wrap _h-797770429 _ox-hidden _oy-hidden _fg-1 _gap-1481558245 ",children:_.length>0?_.map((e,t)=>(0,s.jsx)("p",{onClick:t=>p(t,e),className:"  is_Paragraph _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-233016140 _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto font_body  _pr-7px _pl-7px _pt-4px _pb-4px _bg-549765356 _btlr-4px _btrr-4px _bbrr-4px _bblr-4px _col-white ",children:e},t)):(0,s.jsx)("p",{className:"  is_Paragraph _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _col-791969557 _ff-299667014 _fow-233016140 _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto _pr-7px _pl-7px _pt-4px _pb-4px _btlr-4px _btrr-4px _bbrr-4px _bblr-4px font_body ",children:"Select"})}),(0,s.jsx)(f._,{}),n?(0,s.jsx)(l.FA,{zIndex:999,position:"absolute",top:"130%",left:"0%",width:"100%",backgroundColor:"$gray1",paddingHorizontal:"7px",paddingVertical:"7px",borderRadius:4,outlineColor:"$gray6",outlineWidth:1,outlineStyle:"solid",borderColor:"$borderColor",maxHeight:i,gap:"$1.5",overflow:"scroll",children:t.map((e,t)=>_.includes(e)?(0,s.jsx)("p",{onClick:t=>p(t,e),className:"  is_Paragraph _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ussel-auto   _cur-0hover-pointer _pr-10px _pl-10px _pt-7px _pb-7px _btlr-4px _btrr-4px _bbrr-4px _bblr-4px _fos-229441220 _col-675002279 _ff-299667014 _fow-233016140 _ls-167744059 _lh-222976573 _bg-549765356 font_body ",children:e},t):(0,s.jsx)("p",{onClick:t=>p(t,e),className:"  is_Paragraph _bg-0hover-744986709 _cur-0hover-pointer _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _col-675002279 _ff-299667014 _fow-233016140 _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto _pr-10px _pl-10px _pt-7px _pb-7px _btlr-4px _btrr-4px _bbrr-4px _bblr-4px font_body ",children:e}))}):null]})})}r(94611);var L=r(70396);let M="  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 ",W="  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 _mt-1316330145 ",U=" _mt-1481558400",V=" _mt-1481558214",B=" _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0  _ml-1481558276  ",q="  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 ",H=e=>e&&e[0].toUpperCase()+e.slice(1),G={color:"var(--color9)",size:"$1",strokeWidth:1},J=e=>{var t;let{ele:r,i,icon:l,children:o,inArray:n=!1}=e;return(0,s.jsxs)("fieldset",{className:(0,L.concatClassName)("  is_Fieldset _ai-stretch _dsp-flex _fd-column _bxs-border-box _pos-relative _mih-0px _miw-0px  _gap-1481558214 _fg-1 _fs-1 _fb-auto  "+(i?" _ml-1316330238":" _ml-1481558400")),children:[!n&&(0,s.jsxs)(a.__,{fontWeight:"bold",children:[(0,s.jsx)(g.I,{children:(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mr-1481558214 ",children:A.createElement(l,G)})}),null!==(t=r._def.label)&&void 0!==t?t:r.name]}),n&&(0,s.jsx)("span",{className:"  is_Spacer _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-1481558276 _miw-1481558276 _fs-0 _pe-none _w-1481558276 _h-1481558276 "}),(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 ",children:o})]},i)},X={ZodString:"",ZodNumber:"0",ZodBoolean:!0,default:""},K=e=>X.hasOwnProperty(e)?X[e]:"ZodArray"==e?[]:"ZodObject"==e?{}:X.default,Q=e=>{var t;let{ele:r,elementDef:a,icon:l,path:o,arrData:n,getElement:d,setFormData:_,data:c,setData:p,mode:m,customFields:f}=e;return(0,s.jsxs)(er,{ele:r,title:" ("+n.length+")",icon:v.S,path:o,children:[(0,s.jsx)("div",{className:q,children:n.map((e,t)=>(0,s.jsxs)("div",{className:(0,L.concatClassName)(""+(B+(t?V:U))),children:["ZodObject"!=a.type._def.typeName&&(0,s.jsx)(g.I,{children:(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mr-1481558214 _t-20px ",children:"edit"==m||"add"==m?(0,s.jsx)(x.z,{...G}):(0,s.jsx)(h.$,{...G})})}),d({ele:{...a.type._def,_def:a.type._def,name:t},icon:l,i:0,x:0,data:c,setData:p,mode:m,customFields:f,path:[...o,r.name],inArray:!0,arrayName:r.name}),("edit"==m||"add"==m)&&(0,s.jsx)("div",{onClick:()=>{n.splice(t,1),_(r.name,[...n])},className:(0,L.concatClassName)(" _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ml-1481558214 _t-13px _btlr-1307610029 _btrr-1307610029 _bbrr-1307610029 _bblr-1307610029 _pt-1481558214 _pr-1481558214 _pb-1481558214 _pl-1481558214 _als-flex-start _cur-pointer  _bg-0hover-312414245 _o-0active-0d0t746  "+("ZodObject"!=a.type._def.typeName?" ":"  _pos-absolute _r-1316330269 _t-6px")),children:(0,s.jsx)(u.X,{color:"var(--red7)",strokeWidth:2,size:20})})]},t))}),("edit"==m||"add"==m)&&(0,s.jsxs)(i.zx,{mt:"$4",onPress:()=>{let e="ZodLazy"==r._def.typeName?r._def.getter()._def:r._def;"ZodOptional"==e.typeName?e.innerType._def.type._def.typeName:e.type._def.typeName,_(r.name,[...n,K(a.type._def.typeName)])},children:["Add",null!==(t=r._def.label)&&void 0!==t?t:r.name]})]})},Y=e=>{let{ele:t,elementDef:r,icon:a,path:i,data:l,setData:o,mode:n,customFields:d,inArray:_,arrayName:c,getFormData:p}=e;return(0,s.jsx)(er,{simple:!0,ele:t,title:_?t._def.keyName?p(t._def.keyName,[...i,t.name]):c+" #"+(t.name+1):t.name,icon:b.a,path:i,children:(0,s.jsx)("div",{className:q,children:Object.keys(r.shape()).map((e,_)=>{let c=r.shape();return(0,s.jsx)("div",{className:(0,L.concatClassName)(" _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0  "+(_?" _mt-1316330238":U)),children:es({ele:{...c[e],name:e},icon:a,i:0,x:0,data:l,setData:o,mode:n,customFields:d,path:[...i,t.name]})},_)})})})},ee=e=>{let{ele:t,icon:r,i:a,inArray:i,eleArray:l,formData:o,generatedOptions:n,setFormData:d}=e,_=["ZodNumber","ZodString","ZodLiteral"],c=l.map(e=>_.includes(e.typeName)?String(e.value):JSON.stringify(e.value));return(0,s.jsx)(J,{ele:t,icon:r,i:a,inArray:i,children:(0,s.jsx)(z,{choices:n.length?n:c,defaultSelections:o,onSetSelections:e=>d(t.name,e)})})},et=e=>{let{ele:t,inArray:r,recordData:a,elementDef:n,icon:d,data:_,setData:c,mode:p,customFields:x,path:m,setFormData:f}=e,[u,h]=(0,A.useState)(!1),[v,g]=(0,A.useState)(""),j=(0,A.useRef)(null),[y,N]=(0,A.useContext)(ei);(0,A.useEffect)(()=>{if(u){let e=setTimeout(()=>{var e;null===(e=j.current)||void 0===e||e.focus()},100);return()=>clearTimeout(e)}},[u]);let k=async()=>{let e=K(t._def.valueType._def.typeName),r=[...m,t.name,v].join("/");h(!1),g(""),N(function(e,t){let r=t.substring(0,t.lastIndexOf("/")+1),s=e.filter(e=>!e.startsWith(r)||e===r);return s.push(t),s}(y,r)),f(t.name,{...a,[v]:e})};return(0,s.jsxs)(er,{ele:t,title:r?" #"+(t.name+1):"...",icon:b.a,path:m,children:[(0,s.jsx)("div",{className:q,children:a?Object.keys(a).map((e,r)=>(0,s.jsx)("div",{className:(0,L.concatClassName)(""+(B+(r?V:U))),children:es({ele:{...n.valueType,name:e},icon:d,i:0,x:0,data:_,setData:c,mode:p,customFields:x,path:[...m,t.name]})},r)):null}),(0,s.jsx)(w.a,{acceptCaption:"Add field",setOpen:h,open:u,onAccept:k,title:"Add new field",description:"",children:(0,s.jsx)(l.FA,{f:1,id:"eo-add-field-input",alignItems:"center",mt:"$6",justifyContent:"center",children:(0,s.jsx)(o.II,{f:1,value:v,onChangeText:e=>g(e),textAlign:"center",id:"name",placeholder:"Field name...",ref:j,onKeyPress:e=>{"Enter"===e.key&&k()}})})}),("edit"==p||"add"==p)&&(0,s.jsx)(i.zx,{id:"eo-obj-comp-btn",mt:"$5",onPress:()=>{h(!0)},children:" Add field"})]})},er=e=>{let{ele:t,title:r,children:a,icon:i,simple:o=!1,path:_}=e,[c,p]=(0,A.useContext)(ei),x=[..._,t.name].join("/"),m=(0,s.jsx)(l.sL,{mb:"$2",id:"eo-formgroup",br:"$5",f:1,elevation:c.includes(x)?10:0,hoverStyle:{elevation:10},children:(0,s.jsx)(n.U,{value:c,onValueChange:e=>p(e),onPress:e=>e.stopPropagation(),type:"multiple",boc:"$gray6",f:1,children:(0,s.jsxs)(n.U.Item,{br:"$5",bw:1,boc:"$gray6",value:x,children:[(0,s.jsx)(n.U.Trigger,{p:0,px:8,height:43,bc:"$transparent",focusStyle:{bc:"$transparent"},br:c.includes(x)?"$0":"$5",btlr:"$5",btrr:"$5",bw:"$0",flexDirection:"row",ai:"center",children:e=>{let{open:t}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.I,{children:o?A.createElement(i,G):(0,s.jsx)(s.Fragment,{})}),(0,s.jsx)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-1481558214 _ff-299667014 _fow-233016140 _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto font_body ",children:r}),(0,s.jsx)("span",{className:"  is_Spacer _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-1316330176 _miw-1316330176 _fs-1 _w-1316330176 _h-1316330176 _pe-none _fg-1 "}),(0,s.jsx)(d.b,{animation:"quick",rotate:t?"180deg":"0deg",children:(0,s.jsx)(f._,{size:"$1"})})]})}}),(0,s.jsx)(n.U.Content,{br:"$5",children:a})]})})});return o?m:(0,s.jsx)(J,{ele:t,icon:i,i:0,children:m})},es=e=>{var t,r,a,i,l,n;let{ele:d,icon:c,i:p,x,data:m,setData:f,mode:u,customFields:h={},path:b=[],inArray:v=!1,arrayName:w=""}=e,y=null!==(a=null===(r=d._def)||void 0===r?void 0:null===(t=r.innerType)||void 0===t?void 0:t._def)&&void 0!==a?a:d._def,k=(e,t)=>{let r=m;b.forEach(e=>{Array.isArray(r)||r.hasOwnProperty(e)||(r[e]={}),r=r[e]}),r[e]=t,f({data:m})},S=(e,t)=>{let r=null!=m?m:{};for(let e of null!=t?t:b)("object"==typeof r&&r.hasOwnProperty(e)||Array.isArray(r)&&r.length>e)&&(r=r[e]);return"string"==typeof r?r:r&&r.hasOwnProperty(e)?r[e]:""},P=y.typeName;if("ZodLazy"==P){let e=y.getter();y=e._def,P=e.constructor.name,e.name=d.name,d=e}if(h.hasOwnProperty(d.name)||h.hasOwnProperty("*")){let e=h.hasOwnProperty(d.name)?h[d.name]:h["*"],t="function"==typeof e.component?e.component(b,S(d.name),e=>k(d.name,e),u,m):e.component;if(t)return e.hideLabel?t:(0,s.jsx)(J,{ele:d,icon:c,i:p,inArray:v,children:t})}if("ZodUnion"==P&&"preview"!=u){let e=y.displayOptions?y.displayOptions:y.options.map(e=>e._def.value),t=y.options.map(e=>e._def.value);d._def.dependsOn&&m&&m[d._def.dependsOn]&&"function"==typeof d._def.generateOptions&&(t=[...e=d._def.generateOptions(m)]);let r=d._def.dependsOn,a=d._def.dependsOnValue;return(0,s.jsx)(J,{ele:d,icon:c,i:p,inArray:v,children:r?m[r]?a?a==m[r]?(0,s.jsx)(j.E,{f:1,data:m,title:d.name,elements:e,value:e[t.indexOf(S(d.name))],setValue:r=>k(d.name,t[e.indexOf(r)])}):(0,s.jsx)(o.II,{focusStyle:{outlineWidth:1},disabled:!0,placeholder:d._def.hint?d._def.hint:"Fill "+r+" property first",bc:"$backgroundTransparent"}):(0,s.jsx)(j.E,{f:1,data:m,title:d.name,elements:e,value:e[t.indexOf(S(d.name))],setValue:r=>k(d.name,t[e.indexOf(r)])}):(0,s.jsx)(o.II,{focusStyle:{outlineWidth:1},disabled:!0,placeholder:d._def.hint?d._def.hint:"Fill "+r+" property first",bc:"$backgroundTransparent"}):(0,s.jsx)(j.E,{f:1,data:m,title:d.name,elements:e,value:e[t.indexOf(S(d.name))],setValue:r=>k(d.name,t[e.indexOf(r)])})})}if("ZodNumber"==P&&"preview"!=u){if(y.checks){let e=y.checks.find(e=>"min"==e.kind),t=y.checks.find(e=>"max"==e.kind);if(e&&t)return(0,s.jsx)(J,{ele:d,icon:c,i:p,inArray:v,children:(0,s.jsx)(g.I,{children:(0,s.jsx)("div",{className:W,children:(0,s.jsx)(N,{onValueChange:e=>k(d.name,e),value:[null!==(i=S(d.name))&&void 0!==i?i:e.value],width:190,min:e.value,max:t.value})})})})}}else if("ZodObject"==P)return(0,s.jsx)(Y,{ele:d,elementDef:y,icon:c,path:b,data:m,setData:f,mode:u,customFields:h,inArray:v,arrayName:w,getFormData:S});else if("ZodArray"==P){let e=S(d.name)?S(d.name):[],t=[];"function"==typeof d._def.generateOptions&&(t=d._def.generateOptions(m));let r=!d._def.innerType&&"ZodUnion"===d._def.type._def.typeName;return r?(0,s.jsx)(ee,{ele:d,icon:c,i:p,inArray:v,eleArray:d._def.type._def.options,formData:e,generatedOptions:t,setFormData:k}):(0,s.jsx)(Q,{data:m,setData:f,mode:u,ele:d,elementDef:y,icon:c,customFields:h,path:b,arrData:e||t,getElement:es,setFormData:k})}else if("ZodRecord"==P){let e=S(d.name);return(0,s.jsx)(et,{ele:d,inArray:v,recordData:e,elementDef:y,icon:c,data:m,setData:f,mode:u,customFields:h,path:b,setFormData:k})}else if("ZodBoolean"==P){let e=S(d.name);return(0,s.jsx)(J,{ele:d,icon:c,i:p,inArray:v,children:(0,s.jsx)(g.I,{children:(0,s.jsx)("div",{className:W,children:(0,s.jsx)(_.rs,{disabled:"add"!=u&&"edit"!=u,checked:e,onCheckedChange:e=>k(d.name,e),size:"$2",children:(0,s.jsx)(_.rs.Thumb,{animation:"quick"})})})})})}let I="";return"function"!=typeof d._def.generateOptions||(I=d._def.generateOptions(),S(d.name)||k(d.name,I)),(0,s.jsx)(J,{ele:d,icon:c,i:p,inArray:v,children:(0,s.jsx)("div",{className:M,children:(0,s.jsx)(o.II,{id:"editable-object-input-"+(null==d?void 0:d.name),..."edit"!=u&&"add"!=u?{bw:0,forceStyle:"hover"}:{},focusStyle:{outlineWidth:1},disabled:"view"==u||"preview"==u||"edit"==u&&d._def.static||d._def.dependsOn&&!m[d._def.dependsOn],secureTextEntry:d._def.secret,value:I&&!S(d.name)?I:S(d.name),onChangeText:e=>k(d.name,"ZodNumber"==d._def.typeName?e.replace(/[^0-9.-]/g,""):e),placeholder:m?null!==(n=null!==(l=d._def.hint)&&void 0!==l?l:d._def.label)&&void 0!==n?n:"number"==typeof d.name?"...":d.name:"",autoFocus:0==x&&0==p,onBlur:()=>{if("ZodNumber"==d._def.typeName){let e=parseFloat(S(d.name));isNaN(e)||k(d.name,e)}},bc:"$backgroundTransparent"})})})},ea=e=>{let{index:t,data:r,width:a}=e,i=r.ele._def.size||1;return(0,s.jsx)(l.sL,{f:1,width:a*i+(1===i?r.columnMargin/2:(i-1)*r.columnMargin),children:es({ele:r.ele,icon:r.icon,i:r.i,x:r.x,data:r.data||r.defaultData,setData:r.setData,mode:r.mode,customFields:r.customFields})},r.x)},ei=(0,A.createContext)([[],e=>{}]),el=e=>{let{externalErrorHandling:t,error:r,setError:a,data:o,setData:n,autoWidth:d=!1,columnMargin:_=30,columnWidth:f=350,extraMenuActions:h,disableToggleMode:b,name:v,initialData:j,loadingTop:y,spinnerSize:N,loadingText:z,title:W,sourceUrl:B=null,onSave:G,mode:J="view",model:X,icons:K={},extraFields:Q={},numColumns:Y=1,objectId:ee,onDelete:et=()=>{},deleteable:er=()=>!0,customFields:es={},...el}=e,[eo,en]=(0,A.useState)(null!=j?j:(0,k.E)("pending")),[ed,e_]=(0,A.useState)(J),[ec,ep]=(0,A.useState)(""),[ex,em]=(0,A.useState)(eo),ef=o&&n;o&&n||(o=ex,n=em);let[eu,eh]=(0,A.useState)(!1),[eb,ev]=(0,A.useState)();r&&a||t||(r=eb,a=ev);let[eg,ew]=(0,A.useState)(!1),[ej,ey]=(0,A.useState)(!1),[eN,ek]=(0,A.useState)(!1),eS=(0,A.useRef)(),[eP,eI]=(0,A.useState)([]);(0,S.a)(e=>{"add"!=J&&P.bl.get(B,e)},en,j),(0,A.useEffect)(()=>{eo.data&&n(eo)},[eo]),(0,Z.rf)(()=>e_(J),[J]),(0,Z.rf)(()=>{eN?ey(!0):ek(!0)},[o]);let eC=(0,A.useMemo)(()=>{let e=X.load(o.data),t=F.U.load(D.V_.object(Q)),r=e.getObjectSchema().isDisplay(ed).merge(t).getLayout(1),s={},a={};return r.forEach((e,t)=>e.forEach((e,r)=>{var i,l;let d=K[e.name]?K[e.name]:"edit"==ed||"add"==ed?x.z:m.V,c=null!==(i=e._def.group)&&void 0!==i?i:0;s.hasOwnProperty(c)||(s[c]=[]),e._def.hasOwnProperty("defaultValue")&&(a[e.name]=e._def.defaultValue),s[c].push({id:t+"_"+r,icon:d,i:r,x:t,ele:e,data:o.data,setData:n,mode:ed,size:null!==(l=e._def.size)&&void 0!==l?l:1,numColumns:Y,customFields:es,columnMargin:_,defaultData:a})})),s},[Q,o,X,_,Y,ed,J,eo]),e$=(0,A.useMemo)(()=>Object.keys(eC).map((e,t)=>(0,s.jsxs)(l.sL,{ref:eS,width:d?"100%":f*Y+(Y>1?Y:1)*_,f:1,children:[(0,s.jsx)("div",{className:M,children:(0,s.jsx)(I.rj,{masonry:!1,containerRef:eS,spacing:_/2,data:eC[e],card:ea,itemMinWidth:f,columns:Y})}),"preview"==ed&&(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _t-1316333121 ",children:(0,s.jsx)(T.o,{type:"item",sourceUrl:B,onDelete:et,deleteable:er,element:X.load(o.data),extraMenuActions:h})})]})),[_,eC,f,Y]),{tint:eO}=(0,R.d5)();return(0,s.jsx)(ei.Provider,{value:[eP,eI],children:(0,s.jsxs)(c.Stack,{width:"100%",...el,children:[(0,s.jsx)(w.a,{showCancel:!0,acceptCaption:"Discard",cancelCaption:"Keep editing",onAccept:async()=>{let e=await P.bl.get(B);en(e),e_("view")},cancelTint:eO,acceptTint:"red",open:eg,setOpen:ew,title:"Are you sure you want to leave?",description:"",children:(0,s.jsx)(C.Z,{mt:"$5",children:"All unsaved changes will be lost"})}),(0,s.jsx)($.Z,{forceLoad:"add"==ed||o.data,waitForLoading:1e3,spinnerSize:N,loadingText:null!=z?z:"Loading "+ee,top:null!=y?y:-30,atom:o,children:(0,s.jsxs)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _w-10037 ",children:[(0,s.jsxs)("div",{className:"  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ai-center ",children:[(0,s.jsx)(l.sL,{id:"eo-dlg-title",children:null!=W?W:(0,s.jsxs)("h3",{className:"  is_H3 _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _tt-230632984 _ff-299667014 _fow-233016264 _ls-167744183 _fos-229441344 _lh-222976697 _ussel-auto font_heading ",children:[(0,s.jsx)(g.I,{children:(0,s.jsx)("h3",{className:"  is_H3 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _col-549765294 _tt-230632984 _ff-299667014 _fow-233016264 _ls-167744183 _fos-229441344 _lh-222976697 _ussel-auto font_heading ",children:H(J)})})," ".concat(H(v))]})}),!b&&("view"==ed||"edit"==ed)&&(0,s.jsx)("div",{onClick:async()=>{"edit"==ed&&ej?ew(!0):(ep(ed),e_("view"==ed?"edit":"view"))},className:"  _o-0active-0d0t846 _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0  _cur-pointer ",children:(0,s.jsx)(g.I,{children:(0,s.jsx)("div",{className:q,children:"view"==ed?(0,s.jsx)(x.z,{color:"var(--color8)"}):"view"==ec?(0,s.jsx)(u.X,{color:"var(--color8)"}):null})})})]}),(0,s.jsxs)("div",{className:(0,L.concatClassName)(" _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _w-10037 _fg-1  _ai-center _jc-center  "+(W?V:U)),children:[r&&(0,s.jsx)(O.q,{children:(0,s.jsx)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-233016140 _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto font_body ",children:(0,E.e)(r.error)})}),e$,"preview"!=ed&&(0,s.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _mt-1316330145 _pt-1481558214 _pr-1481558214 _pb-1316330238 _pl-1481558214 _w-10037 _fg-1 _als-center ",children:("add"==ed||"edit"==ed)&&!ef&&(0,s.jsx)(g.I,{children:(0,s.jsx)(i.zx,{f:1,onPress:async()=>{eh(!0);try{await G(eo.data,o.data),ec!=ed&&e_(ec)}catch(e){a(e),console.log("e: ",e)}eh(!1)},children:eu?(0,s.jsx)(p.$,{}):"add"==ed?"Create":"Save"})})})]})]})})]})})};r(44419)},99553:function(e,t,r){"use strict";r.d(t,{rj:function(){return x}});var s=r(52322),a=r(52026),i=r(8939),l=r(2784),o=r(23724),n=r(11667),d=r(23510);let _={width:0,height:0},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],[r,s]=(0,l.useState)(_);return(0,l.useLayoutEffect)(()=>{let{current:t}=e;if(t){let e=()=>{let e=getComputedStyle(t),r=parseFloat,a=t.clientWidth-r(e.paddingTop)-r(e.paddingBottom),i=t.clientHeight-r(e.paddingLeft)-r(e.paddingRight);s({height:i,width:a})};return e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}}},t.concat(e.current)),r},p=e=>{let[t,r]=(0,l.useState)(!1),[s,a]=(0,l.useState)(0);return(0,l.useLayoutEffect)(()=>{let t;let{current:r}=e;if(r){let e=()=>{t||(t=window.requestAnimationFrame(()=>{a(r.scrollTop),t=void 0}))};return r.addEventListener("scroll",e),()=>{r.removeEventListener("scroll",e),t&&window.cancelAnimationFrame(t)}}},[e.current]),(0,l.useLayoutEffect)(()=>{r(!0);let e=window.setTimeout(()=>{r(!1)},1e3/6);return()=>window.clearTimeout(e)},[s]),{scrollTop:s,isScrolling:t}},x=l.forwardRef((e,t)=>{let{overScanBy:r=5,masonry:_=!0,containerRef:x,rightGap:m=0,spacing:f,children:u,data:h,card:b,columns:v,itemMinWidth:g=200,gap:w}=e;if(a.isWeb&&h&&b){if(_&&x){var j,y;let e={current:(null===(j=x.current)||void 0===j?void 0:j.container)?null==x?void 0:null===(y=x.current)||void 0===y?void 0:y.container.firstChild:x.current},{width:t,height:s}=c(e),{scrollTop:a,isScrolling:i}=p(e),l=(0,o.G)({width:Math.max(0,t-m),columnGutter:f,columnWidth:g}),_=(0,n.y)(l);return(0,d.$)({positioner:l,scrollTop:a,isScrolling:i,height:s,items:h,overscanBy:r,resizeObserver:_,render:b})}return(0,s.jsx)(i.sL,{flexWrap:"wrap",children:h.map((e,t)=>(0,s.jsxs)(a.Stack,{m:f/2,children:[" ",l.createElement(b,{index:e.index,data:{...e},width:g})," "]},t))})}if(a.isWeb)return(0,s.jsx)("div",{ref:t,style:{gap:w,display:"grid",gridTemplateColumns:"repeat( auto-fill, minmax(".concat(g,"px, 1fr) )")},children:u});let N=l.Children.toArray(u);return(0,s.jsx)(i.sL,{alignItems:"center",justifyContent:"center",flexWrap:"wrap",children:N.map((e,t)=>e?(0,s.jsx)(i.sL,{flex:1,minWidth:g,marginRight:w,marginBottom:w,children:e},t):null)})})},96455:function(e,t,r){"use strict";r.d(t,{o:function(){return x}});var s=r(52322),a=r(8939),i=r(52026),l=r(86838),o=r(51813),n=r(2784),d=r(91838),_=r(10281),c=r(13742),p=r(71932);let x=e=>{let{type:t,sourceUrl:r="",enableAddToInitialData:x=!1,onDelete:m,element:f,deleteable:u,extraMenuActions:h=[],hideDeleteButton:b,...v}=e,[g,w]=(0,n.useState)(!1),[j,y]=(0,n.useState)(!1),N=e=>{let{id:t="",type:r,text:i,Icon:l,onPress:o,disabled:n}=e;return(0,s.jsxs)(a.sL,{id:t,ml:"$1",o:1,br:"$5",p:"$3",als:"flex-start",cursor:n?"default":"pointer",pressStyle:n?{}:{o:.7},hoverStyle:n?{}:{bc:"$color5"},onPress:e=>{n||(o("global"===r?"*":f,e),w(!1))},children:[(0,s.jsx)(l,{size:"$1",color:n?"var(--gray9)":"var(--color9)",strokeWidth:2}),(0,s.jsx)("span",{className:"  _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-1481558152 ",children:i})]})};return(0,s.jsxs)(i.Stack,{...v,children:[(0,s.jsx)(o.a,{acceptCaption:"Delete",setOpen:y,open:j,onAccept:async e=>{await m(r),e(!1)},title:"Delete ",description:"Are you sure want to delete this item?",w:280,children:(0,s.jsx)("div",{className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 _jc-center _ai-center "})}),(0,s.jsxs)(l.J2,{onOpenChange:w,open:g,placement:"bottom",children:[(0,s.jsx)(l.J2.Trigger,{children:(0,s.jsx)(p.z,{id:"more-btn-".concat(r.split("/").slice(-1)),Icon:_.h,onPress:e=>{e.stopPropagation(),w(!0)},ml:"$3"})}),(0,s.jsx)(l.J2.Content,{padding:0,space:0,left:"$7",top:"$2",bw:1,boc:"$borderColor",bc:"$color1",children:(0,s.jsx)(d.I,{children:(0,s.jsx)("div",{onClick:e=>e.stopPropagation(),className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ai-center _jc-center _pt-1481558152 _pr-1481558152 _pb-1481558152 _pl-1481558152 ",children:(0,s.jsxs)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 ",children:[h.map((e,a)=>{var i;return(!e.menus&&"item"===t||e.menus&&(null===(i=e.menus)||void 0===i?void 0:i.includes(t)))&&e.isVisible&&e.isVisible(f)&&(0,s.jsx)(N,{id:"more-btn-".concat(r.split("/").slice(-1),"-option-").concat(a+1),type:t,text:"function"==typeof e.text?e.text(t):e.text,Icon:e.icon,onPress:e.action},a)}),!1,b?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(N,{type:t,text:"Delete",id:"more-btn-".concat(r.split("/").slice(-1),"-delete"),Icon:c.V,disabled:!u(f),onPress:(e,t)=>{t.stopPropagation(),y(!0),w(!1)}})]})})})})]})]})};r(66286)},26887:function(e,t,r){"use strict";r.d(t,{a:function(){return a}});var s=r(57643);let a=(e,t,r)=>(0,s.qR)(()=>{r&&"pending"!=r.status?t(r):e(t)})},82695:function(e,t,r){"use strict";r.d(t,{N:function(){return o},v:function(){return l}});var s=r(5632),a=r(57643);let i=(e,t)=>{let{[t]:r,...s}=e;return s},l=e=>{let{query:t}=(0,s.useRouter)();(0,a.rf)(()=>{e(t)},[t])},o=e=>{let{replace:t,push:r,query:a}=(0,s.useRouter)(),l=()=>Object.keys(null!=e?e:{}).reduce((t,r)=>""!==e[r]?{...t,[r]:e[r]}:t,{});return{push:function(e,t){let s=!(arguments.length>2)||void 0===arguments[2]||arguments[2];r({query:{...a,...l(),[e]:t}},void 0,{shallow:s})},mergePush:e=>{r({query:{...a,...l(),...e}},void 0,{shallow:!0})},removePush:e=>{r({query:i(a,e)},void 0,{shallow:!0})},removeReplace:e=>{t({query:i(a,e)},void 0,{shallow:!0})},replace:(e,r)=>{t({query:{...a,...l(),[e]:r}},void 0,{shallow:!0})},mergeReplace:r=>{t({query:{...l(),...e,...r}},void 0,{shallow:!0})}}}},48478:function(){},44419:function(){},12219:function(){},5006:function(){},66286:function(){},9807:function(){},94611:function(){},51185:function(){}}]);