"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7146],{72555:function(e,t,i){i.r(t),t.default={src:"/admin/_next/static/media/logo.12766b1b.png",height:572,width:572,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAdVBMVEUBAgIAAgIBAQEAAQEBAgIBAQEBAQEAAQEAAQEAAQEAAQEBAgIBAQEBAgIBAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQGs73SBAAAAJ3RSTlMAAAAAAQEEBgcNDxsbHR0vMTU2P0BKX2RmZ3J0e31/goiQkpaXnZ4UCFX1AAAARUlEQVR42gVABRKAIBBcXQM74QxEDPz/Ex3EbJ+3IZBKGMYgCYwHCW+wzJlz+bRCdHSckRaIZVHSCtR+V/W1KZD9FzryB5lZBEw3DyQBAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8}},67346:function(e,t,i){i.d(t,{W:function(){return A},B:function(){return C}});var l=i(52322),n=i(25237),r=i.n(n);let o=r()(()=>i.e(9831).then(i.bind(i,99831)),{loadableGenerated:{webpack:()=>[99831]}}),a=r()(()=>i.e(2522).then(i.bind(i,22522)),{loadableGenerated:{webpack:()=>[22522]}}),s=r()(()=>i.e(4110).then(i.bind(i,54110)),{loadableGenerated:{webpack:()=>[54110]}});r()(()=>i.e(9786).then(i.bind(i,49786)),{loadableGenerated:{webpack:()=>[49786]}});let d=r()(()=>i.e(3179).then(i.bind(i,43179)),{loadableGenerated:{webpack:()=>[43179]}}),p=r()(()=>i.e(7256).then(i.bind(i,47256)),{loadableGenerated:{webpack:()=>[47256]}}),c=r()(()=>i.e(3393).then(i.bind(i,73393)),{loadableGenerated:{webpack:()=>[73393]}}),u=r()(()=>i.e(4838).then(i.bind(i,24838)),{loadableGenerated:{webpack:()=>[24838]}}),f=r()(()=>i.e(1342).then(i.bind(i,81342)),{loadableGenerated:{webpack:()=>[81342]}}),h=r()(()=>i.e(612).then(i.bind(i,90612)),{loadableGenerated:{webpack:()=>[90612]}}),g=r()(()=>i.e(5385).then(i.bind(i,65385)),{loadableGenerated:{webpack:()=>[65385]}});r()(()=>i.e(2973).then(i.bind(i,42973)),{loadableGenerated:{webpack:()=>[42973]}}),r()(()=>i.e(2633).then(i.bind(i,92633)),{loadableGenerated:{webpack:()=>[92633]}});let x=[{id:"esp32dev",type:"ArrayLiteralExpression",check:(e,t)=>"ArrayLiteralExpression"==e.type&&'"esp32dev"'==t["element-1"],getComponent:(e,t,i)=>(0,l.jsx)(a,{node:e,nodeData:t,children:i}),getInitialData:()=>({to:'"esp32dev"'}),hidden:!0,nonDeletable:!0},{id:"Wifi",type:"CallExpression",check:(e,t)=>{var i;return"CallExpression"==e.type&&(null===(i=t.to)||void 0===i?void 0:i.startsWith("wifi"))},getComponent:(e,t,i)=>(0,l.jsx)(o,{node:e,nodeData:t,children:i}),getInitialData:()=>({to:"wifi",param1:'"SSID"',param2:'"PASSWORD"',param3:'"none"'})},{id:"Mqtt",type:"CallExpression",check:(e,t)=>{var i;return"CallExpression"==e.type&&(null===(i=t.to)||void 0===i?void 0:i.startsWith("mqtt"))},getComponent:(e,t,i)=>(0,l.jsx)(s,{node:e,nodeData:t,children:i}),getInitialData:()=>({to:"mqtt",param1:'"BROKERADDRESS"',param2:'""'})},{id:"Relay",type:"CallExpression",check:(e,t)=>{var i;return"CallExpression"==e.type&&(null===(i=t.to)||void 0===i?void 0:i.startsWith("relay"))},getComponent:(e,t,i)=>(0,l.jsx)(c,{node:e,nodeData:t,children:i}),getInitialData:()=>({to:"relay",param1:'""',param2:'"ALWAYS_OFF"'})},{id:"BinarySensor",type:"CallExpression",check:(e,t)=>{var i;return"CallExpression"==e.type&&(null===(i=t.to)||void 0===i?void 0:i.startsWith("binarySensor"))},getComponent:(e,t,i)=>(0,l.jsx)(d,{node:e,nodeData:t,children:i}),getInitialData:()=>({to:"binarySensor",param1:'""'})},{id:"NeopixelsBus",type:"CallExpression",check:(e,t)=>{var i;return"CallExpression"==e.type&&(null===(i=t.to)||void 0===i?void 0:i.startsWith("neopixelsBus"))},getComponent:(e,t,i)=>(0,l.jsx)(p,{node:e,nodeData:t,children:i}),getInitialData:()=>({to:"neopixelsBus",param1:'""',param2:"16",param3:'"GRB"',param4:'"WS2811"',param5:'"ALWAYS_ON"',param6:'"1s"',param7:"0",param8:!1,param9:!1,param10:!1,param11:!1,param12:!1,param13:!1,param14:!1,param15:!1,param16:!1,param17:!1,param18:!1})},{id:"ADCSensor",type:"CallExpression",check:(e,t)=>{var i;return"CallExpression"==e.type&&(null===(i=t.to)||void 0===i?void 0:i.startsWith("adcSensor"))},getComponent:(e,t,i)=>(0,l.jsx)(u,{node:e,nodeData:t,children:i}),getInitialData:()=>({to:"adcSensor",param1:'"analogic"',param2:'"30s"',param3:'"auto"'})},{id:"I2cBus",type:"CallExpression",check:(e,t)=>{var i;return"CallExpression"==e.type&&(null===(i=t.to)||void 0===i?void 0:i.startsWith("i2cBus"))},getComponent:(e,t,i)=>(0,l.jsx)(f,{node:e,nodeData:t,children:i}),getInitialData:()=>({to:"i2cBus",param1:'""',param2:"22",param3:!0})},{id:"PCA9685",type:"CallExpression",check:(e,t)=>{var i;return"CallExpression"==e.type&&(null===(i=t.to)||void 0===i?void 0:i.startsWith("pca9685"))},getComponent:(e,t,i)=>(0,l.jsx)(h,{node:e,nodeData:t,children:i}),getInitialData:()=>({to:"pca9685",param1:'""',param2:"1000",param3:!1,param4:"0x40",param5:'""'})},{id:"Ethernet",type:"CallExpression",check:(e,t)=>{var i;return"CallExpression"==e.type&&(null===(i=t.to)||void 0===i?void 0:i.startsWith("ethernet"))},getComponent:(e,t,i)=>(0,l.jsx)(g,{node:e,nodeData:t,children:i}),getInitialData:()=>({to:"ethernet",param1:'"LAN8720"',param2:"23",param3:"18",param4:'"GPIO17_OUT"',param5:"0",param6:"12"})}];var m=x.map(e=>({...e,capabilities:["esphome"]})),y=JSON.parse('[{"id":"Container","title":"Container","path":"*","type":"JsxElement","filter":{"name":"Container"},"body":[{"type":"custom-field","data":[{"label":"backgroundColor","field":"prop-backgroundColor","type":"color","fieldType":"prop"},{"label":"flexDirection","field":"prop-flexDirection","type":"alignment-flex","fieldType":"prop"},{"label":"justifyContent","field":"prop-justifyContent","type":"alignment-content","fieldType":"prop"},{"label":"alignItems","field":"prop-alignItems","type":"alignment-items","fieldType":"prop"}]},{"type":"child","data":[{"label":"Child1","field":"child-1","fieldType":"child","type":"child"}]}]},{"id":"Center","title":"Center","path":"*","type":"JsxElement","filter":{"name":"Center"},"body":[{"type":"custom-field","data":[{"label":"backgroundColor","field":"prop-backgroundColor","type":"color","fieldType":"prop"},{"label":"flexDirection","field":"prop-flexDirection","type":"alignment-flex","fieldType":"prop"},{"label":"justifyContent","field":"prop-justifyContent","type":"alignment-content","fieldType":"prop"},{"label":"alignItems","field":"prop-alignItems","type":"alignment-items","fieldType":"prop"}]},{"type":"child","data":[{"label":"Child1","field":"child-1","fieldType":"child","type":"child"}]}]},{"id":"Image","title":"Image","path":"*","type":"JsxElement","filter":{"name":"Image"},"body":[{"type":"custom-field","data":[{"label":"width","field":"prop-width","fieldType":"prop"},{"label":"height","field":"prop-height","fieldType":"prop"},{"label":"opacity","field":"prop-opacity","fieldType":"prop"}]},{"type":"prop","data":[{"label":"url","field":"prop-url","fieldType":"prop","static":true}]}]},{"id":"Page","title":"Page","path":"*","type":"JsxElement","filter":{"name":"Page"},"body":[{"type":"custom-field","data":[{"label":"backgroundColor","field":"prop-backgroundColor","type":"color","fieldType":"prop"},{"label":"flexDirection","field":"prop-flexDirection","type":"alignment-flex","fieldType":"prop"},{"label":"justifyContent","field":"prop-justifyContent","type":"alignment-content","fieldType":"prop"},{"label":"alignItems","field":"prop-alignItems","type":"alignment-items","fieldType":"prop"}]},{"type":"prop","data":[{"label":"title","field":"prop-title","fieldType":"prop","static":true}],"disableAdd":false},{"type":"child","data":[{"label":"Child1","field":"child-1","fieldType":"child","type":"child"}]}]},{"id":"BigTitle","title":"BigTitle","path":"*","type":"JsxElement","filter":{"name":"BigTitle"},"body":[{"type":"child","data":[{"label":"caption","field":"child-1","fieldType":"child","type":"child"}],"disableAdd":true},{"type":"custom-field","data":[{"label":"color","field":"prop-color","type":"color","fieldType":"prop"},{"label":"flexDirection","field":"prop-flexDirection","type":"alignment-flex","fieldType":"prop"},{"label":"padding","field":"prop-padding","fieldType":"prop"},{"label":"margin","field":"prop-margin","fieldType":"prop"}]},{"type":"prop","data":[]}]},{"id":"Head1","title":"Head1","path":"*","type":"JsxElement","filter":{"name":"Head1"},"body":[{"type":"child","data":[{"label":"caption","field":"child-1","fieldType":"child","type":"child"}],"disableAdd":true},{"type":"custom-field","data":[{"label":"color","field":"prop-color","type":"color","fieldType":"prop"},{"label":"textAlign","field":"prop-textAlign","type":"alignment-text","fieldType":"prop"},{"label":"alignSelf","field":"prop-alignSelf","type":"alignment-items","fieldType":"prop"},{"label":"margin","field":"prop-margin","fieldType":"prop"},{"label":"padding","field":"prop-padding","fieldType":"prop"}]},{"type":"prop","data":[]}]},{"id":"Head2","title":"Head2","path":"*","type":"JsxElement","filter":{"name":"Head2"},"body":[{"type":"child","data":[{"label":"caption","field":"child-1","fieldType":"child","type":"child"}],"disableAdd":true},{"type":"custom-field","data":[{"label":"color","field":"prop-color","type":"color","fieldType":"prop"},{"label":"textAlign","field":"prop-textAlign","type":"alignment-text","fieldType":"prop"},{"label":"alignSelf","field":"prop-alignSelf","type":"alignment-items","fieldType":"prop"},{"label":"margin","field":"prop-margin","fieldType":"prop"},{"label":"padding","field":"padding","fieldType":"prop"},{"label":"padding","field":"prop-padding","fieldType":"prop"}]},{"type":"prop","data":[]}]},{"id":"Head3","title":"Head3","path":"*","type":"JsxElement","filter":{"name":"Head3"},"body":[{"type":"child","data":[{"label":"caption","field":"child-1","fieldType":"child","type":"child"}],"disableAdd":true},{"type":"custom-field","data":[{"label":"color","field":"prop-color","type":"color","fieldType":"prop"},{"label":"textAlign","field":"prop-textAlign","type":"alignment-text","fieldType":"prop"},{"label":"alignSelf","field":"prop-alignSelf","type":"alignment-items","fieldType":"prop"},{"label":"margin","field":"prop-margin","fieldType":"prop"},{"label":"padding","field":"prop-padding","fieldType":"prop"}]},{"type":"prop","data":[]}]},{"id":"RainbowText","title":"RainbowText","path":"*","type":"JsxElement","filter":{"name":"RainbowText"},"body":[{"type":"child","data":[{"label":"caption","field":"child-1","fieldType":"child","type":"child"}],"disableAdd":true},{"type":"custom-field","data":[{"label":"textAlign","field":"prop-textAlign","type":"alignment-text","fieldType":"prop"},{"label":"margin","field":"prop-margin","fieldType":"prop"},{"label":"padding","field":"prop-padding","fieldType":"prop"}]},{"type":"prop","data":[]}]},{"id":"DefaultLayout","title":"DefaultLayout","path":"*","type":"JsxElement","filter":{"name":"DefaultLayout"},"body":[{"type":"prop","data":[{"label":"title","field":"prop-title","fieldType":"prop","static":true,"type":"input"},{"label":"description","field":"prop-description","fieldType":"prop","static":true}]},{"type":"child","data":[{"label":"Child1","field":"child-1","fieldType":"child","type":"child"}]}]},{"id":"MainButton","title":"MainButton","path":"*","type":"JsxElement","filter":{"name":"MainButton"},"body":[{"type":"child","data":[{"label":"caption","field":"child-1","fieldType":"child","type":"child"}],"disableAdd":true},{"type":"custom-field","data":[{"label":"margin","field":"prop-margin","fieldType":"prop"},{"label":"padding","field":"prop-padding","fieldType":"prop"}]},{"type":"prop","data":[{"label":"color","field":"prop-color","fieldType":"prop","static":true,"type":"colorPicker"},{"label":"textColor","field":"prop-textColor","fieldType":"prop","static":true,"type":"colorPicker"}]}]},{"id":"BlockTitle","title":"BlockTitle","path":"*","type":"JsxElement","filter":{"name":"BlockTitle"},"body":[{"type":"prop","data":[{"label":"title","field":"prop-title","fieldType":"prop","static":true},{"label":"subtitle","field":"prop-subtitle","fieldType":"prop","static":true}],"disableAdd":true},{"type":"custom-field","data":[{"label":"margin","field":"prop-margin","fieldType":"prop"},{"label":"padding","field":"prop-padding","fieldType":"prop"}]}]}]'),v=[],b=i(53993);let E={devices:["devices","deviceDefinitions","deviceBoards","deviceCores","deviceSdks"],visualui:["visualui"]},C=(e,t)=>{let i=e.split("/"),l=i[i.length-1],n=JSON.stringify(t);return E.devices.includes(l)?m:(E.visualui.includes(l)||n&&E.visualui.find(e=>n.includes(e)),[])},A=(e,t)=>{let i=e.split("/"),l=i[i.length-1],n=JSON.stringify(t);return E.visualui.includes(l)||n&&E.visualui.find(e=>n.includes(e))?[...y,...v,...b.BaseJSMasks]:[...v]}},51745:function(e,t,i){var l=i(52322),n=i(2784),r=i(13296),o=i(18827),a=i.n(o),s=i(57643);t.Z=(0,n.memo)(e=>{let{borderLess:t,rightPanelSize:i,setRightPanelSize:o,rightPanelStyle:d={},rightPanelWidth:p=0,actionContent:c,rightPanelContent:u,leftPanelContent:f,centerPanelContent:h,rightPanelResizable:g=!1,rightPanelVisible:x=!0,openPanel:m,setOpenPanel:y=()=>{}}=e,v=(0,n.useRef)(),b=(0,n.useRef)(),E=(0,n.useRef)(),C=(0,n.useRef)(null),A=(0,s.iP)(),j=()=>{let e=Math.max(400,A.width);return 350/e*100},w=()=>{if(i)return i;let e=Math.max(400,A.width);return 400/e*100},k=()=>{b.current,E.current&&(E.current.style.display="flex")},S=()=>{clearTimeout(C.current),b.current&&b.current.isDragging||!E.current||(E.current.style.display="none")};return(0,n.useEffect)(()=>{v.current&&v.current.resize(p||w(),"percentages")},[g]),(0,l.jsxs)("div",{style:{flex:1,display:"flex"},children:[f&&(0,l.jsx)("div",{id:"sidebar-panel-container",style:{flex:1,display:m?"flex":"none",position:"absolute",width:j(),zIndex:99999999},children:(0,l.jsx)(a(),{type:"left",isOpen:!0,size:j(),backdropClicked:()=>y(!1),children:f},"sidebar")}),c&&(0,l.jsx)("div",{id:"left-actions-container",style:{display:m?"none":"flex",position:"fixed",zIndex:1e20,flexDirection:"column",left:"20px",top:"calc(50vh - 80px)"},children:c}),(0,l.jsxs)(r.eh,{direction:"horizontal",style:{height:"100%",display:"flex"},children:[(0,l.jsx)(r.s_,{children:(0,l.jsx)("div",{style:{display:"flex",flex:1,height:"100vh"},children:h})}),(0,l.jsx)(r.OT,{onDragging:e=>{b.current&&(b.current.isDragging=e),e||S()},children:(0,l.jsx)("div",{ref:b,onMouseEnter:()=>{C.current=setTimeout(()=>{k()},50)},onMouseLeave:S,style:{backgroundColor:t?"transparent":"#252526",display:x&&g?"flex":"none",width:"4px",height:"100%",alignItems:"center",justifyContent:"center"},children:(0,l.jsx)("div",{ref:E,style:{height:"60px",width:"4px",backgroundColor:"white",borderRadius:"20px",display:"none"}})})}),(0,l.jsx)(r.s_,{onResize:e=>o?o(e):null,ref:v,maxSize:80,defaultSize:p||w(),style:{position:x?"relative":"absolute",zIndex:x?1e5:-10,display:"flex",...d},children:(0,l.jsx)("div",{style:{height:"100%",display:"flex",flexDirection:"column",width:"100%"},children:u})})]})]})})},17146:function(e,t,i){let l,n,r;i.r(t),i.d(t,{default:function(){return eT},newVisualUiContext:function(){return eE},useVisualUi:function(){return eA},useVisualUiAtom:function(){return eC}});var o=i(52322),a=i(2784),s=i(5632),d=i(8293),p=i(7771),c=i(18299),u=i(28316),f=i(60163),h=i(50637),g=i(40178),x=i(81267),m=i(32678);let y=e=>{let{render:t}=e,{id:i}=(0,d.Zo)(),{actions:l,query:n,isActive:r}=(0,d.jE)((e,t)=>({isActive:t.getEvent("selected").contains(i)})),{isHover:s,dom:p,name:y,moveable:v,deletable:b,connectors:{drag:E},parent:C,childs:A,nodeAndSiblings:j,nodeId:w,unknown:k}=(0,d.Zo)(e=>{var t,i,l;return{unknown:null!==(l=e.data.custom.unknown)&&void 0!==l&&l,nodeId:e.id,isHover:e.events.hovered,dom:e.dom,name:e.data.custom.displayName||e.data.displayName,moveable:n.node(e.id).isDraggable(),deletable:n.node(e.id).isDeletable()&&n.node(e.id).isDraggable(),parent:e.data.parent,props:e.data.props,childs:e.data.nodes,nodeAndSiblings:(null===(t=e.data)||void 0===t?void 0:t.parent)?n.node(null===(i=e.data)||void 0===i?void 0:i.parent).childNodes():void 0}}),S=k?"#EF9364":"#2680EB",T="1px solid gray",I=(0,a.useRef)();(0,a.useEffect)(()=>{p&&(r?p.style.boxShadow="inset 0px 0px 0px 2px "+S:s?p.style.boxShadow="inset 0px 0px 0px 1px "+S:p.style.boxShadow="")},[p,r,s]);let J=(0,a.useCallback)(e=>{let{top:t,left:i,bottom:l}=e?e.getBoundingClientRect():{top:0,left:0,bottom:0};return{top:"".concat(t>10?t-60:l+10,"px"),left:"".concat(i,"px")}},[]),D=(0,a.useCallback)(()=>{let{current:e}=I;if(!e)return;let{top:t,left:i}=J(p);e.style.top=t,e.style.left=i},[p,J]);return(0,a.useEffect)(()=>{var e,t;return null===(t=document)||void 0===t||null===(e=t.querySelector(".craftjs-renderer"))||void 0===e||e.addEventListener("scroll",D),()=>{var e,t;null===(t=document)||void 0===t||null===(e=t.querySelector(".craftjs-renderer"))||void 0===e||e.removeEventListener("scroll",D)}},[D]),(0,a.useEffect)(()=>{var e;let t=e=>{e.preventDefault(),e.stopPropagation()};return null===(e=document.getElementById("editor-layout"))||void 0===e||e.addEventListener("click",t),()=>{var e;return null===(e=document.getElementById("editor-layout"))||void 0===e?void 0:e.removeEventListener("click",t)}},[]),(0,o.jsxs)(o.Fragment,{children:[r?u.createPortal((0,o.jsxs)("div",{id:"my-renderedNode",ref:I,style:{left:J(p).left,top:J(p).top,zIndex:1e31,position:"fixed",backgroundColor:"#252526",border:T,padding:"16px",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center",height:"50px",pointerEvents:"auto",gap:20},children:[(0,o.jsxs)("div",{style:{fontSize:14,color:"white"},children:[y,k?" (Unknown)":""]}),(0,o.jsx)("div",{style:{height:"50px",borderLeft:T}}),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"row",flex:1,gap:"20px"},children:[v?(0,o.jsx)("div",{ref:E,style:{cursor:"grab"},title:"Move",children:(0,o.jsx)(f.Z,{color:"white",size:20})}):null,i!==c.QS&&"ROOT"!=C?(0,o.jsx)("div",{style:{cursor:"pointer"},title:"Select parent",children:(0,o.jsx)(h.Z,{onMouseDown:e=>{l.selectNode(C),e.stopPropagation()},color:"white",size:20})}):null,A.length?(0,o.jsx)("div",{style:{cursor:"pointer"},title:"Select first child",children:(0,o.jsx)(g.Z,{onMouseDown:e=>{l.selectNode(A[0]),e.stopPropagation()},color:"white",size:20})}):null,(null==j?void 0:j.length)>1?(0,o.jsx)("div",{style:{cursor:"pointer"},title:"Select next sibling",children:(0,o.jsx)(x.Z,{onMouseDown:e=>{let t=j.indexOf(w),i=(t+1)%j.length,n=j[i];l.selectNode(n),e.stopPropagation()},color:"white",size:20})}):null,b?(0,o.jsx)("div",{style:{cursor:"pointer"},title:"Delete",id:"render-node-delete-btn",onClick:e=>{e.stopPropagation(),l.delete(i)},children:(0,o.jsx)(m.Z,{color:"white",size:20})}):null]})]}),document.querySelector(".page-container")):null,t]})},v=e=>(0,o.jsx)(o.Fragment,{});v.craft={props:{},related:{settings:()=>(0,o.jsx)("div",{})}};let b=e=>(0,o.jsx)(o.Fragment,{children:e.children});b.craft={props:{},related:{settings:()=>(0,o.jsx)("div",{})}};let E=e=>{var t;let{connectors:{connect:i},setProp:l}=(0,d.Zo)(e=>({selected:e.events.selected,custom:e.data.custom}));return(0,o.jsx)("div",{ref:i,style:{minHeight:"30px"},children:null!==(t=e.children)&&void 0!==t?t:"Unknown"})};E.craft={props:{},related:{settings:()=>(0,o.jsx)("div",{})}};var C={craft:{Root:b,Unknown:E,ReactCode:v}},A=i(97729),j=i.n(A),w=i(45054),k=i(85067),S=i.n(k),T=i(20477);class I{static parse(e){let t=new T.IKL({useInMemoryFileSystem:!0,manipulationSettings:{indentationText:T.xI4.Tab},compilerOptions:{target:T.H7j.Latest,scriptKind:T.hVH.TSX,languageVariant:T.C$L.JSX}});return new I(t.createSourceFile("_temp2.tsx",e,{overwrite:!0}))}data(e){e&&this.identifyElements(e);let t=this.getContent(),i=I.toCraftNodes(t);return this.addCustomProps(i)}getContent(){return this.getFirstDescendant("JsxElement")}getFirstDescendant(e){var t,i;let l=T.lGB[e];return e?null===(t=this.ast)||void 0===t?void 0:t.getFirstDescendantByKind(l):null===(i=this.ast)||void 0===i?void 0:i.getFirstDescendant()}static getAllJsxElements(e){let t=this.getAllJsxChildren(e),i=[e,...t];return i}static getAttributes(e){let t=this.isKind(e,"JsxElement"),i=this.isKind(e,"JsxSelfClosingElement"),l=this.isKind(e,"JsxExpression");if(!e||!t&&!i&&!l)throw"Not valid node to get attributes";return t?this.getJsxElementAttributes(e):i?this.getJsxSelfClosingElementAttributes(e):l?[]:void 0}static getJsxAttribute(e,t){if(!e||!this.isKind(e,"JsxElement")&&!this.isKind(e,"JsxSelfClosingElement"))throw"Error node provided is not a JsxElement or JsxSelfClosingElement, can't get the specified attribute";let i=this.getAttributes(e).find(e=>e.getNameNode().getText()==t);if(!i)throw"Can't get attribute ".concat(t);return i}static getAttributeKey(e){if(!e||!this.isKind(e,"JsxAttribute"))throw"Can't get attribute key, the node provided isn't a JsxAttribute";return e.getNameNode().getText()}static getAttributeValue(e){if(!e||!this.isKind(e,"JsxAttribute"))throw"Can't get attribute value, the node provided isn't a JsxAttribute";return e.getInitializer()}static getJsxElementAttributes(e){if(!e||!this.isKind(e,"JsxElement"))throw"Error node provided is not a JsxElement, can't get its attributes";return e.getOpeningElement().getAttributes()}static getJsxSelfClosingElementAttributes(e){if(!e||!this.isKind(e,"JsxSelfClosingElement"))throw"Error node provided is not a JsxSelfClosingElement, can't get its attributes";return e.getAttributes()}static getJsxElementName(e){let t=this.isKind(e,"JsxElement"),i=this.isKind(e,"JsxSelfClosingElement"),l=this.isKind(e,"JsxExpression");if(!e||!t&&!i&&!l)throw"Not valid node to get Name";return t?this.getJsxElementIdentifier(e):i?this.getJsxSelfClosingElementIdentifier(e):l?{name:"ReactCode"}:void 0}static getJsxElementIdentifier(e){if(!e||!this.isKind(e,"JsxElement"))throw"Error node provided is not a JsxElement, can't get its Identifier";let t=e.getOpeningElement(),i=t.getTagNameNode(),l=i.getText();return{node:i,name:l}}static getJsxSelfClosingElementIdentifier(e){if(!e||!this.isKind(e,"JsxSelfClosingElement"))throw"Error node provided is not a JsxSelfClosingElement, can't get its Identifier";let t=e.getTagNameNode(),i=t.getText();return{node:t,name:i}}static getJsxChildren(e){if(this.isKind(e,"JsxSelfClosingElement"))throw"Can't obtain children from JsxSelfClosingElement";if(!e||!this.isKind(e,"JsxElement"))throw"Can't obtain node children";let t=e.getChildrenOfKind(T.lGB.SyntaxList)[0],i=t.getChildren();return i}static getJsxTextOfJsxElement(e){if(this.isKind(e,"JsxExpression")||this.isKind(e,"JsxSelfClosingElement"))return;let t=this.getJsxChildren(e);if(t.length&&this.isKind(t[0],"JsxText"))return t[0]}static getJsxChildrenFirstLevel(e){if(!(this.isKind(e,"JsxSelfClosingElement")||this.isKind(e,"JsxExpression")))return this.getJsxChildren(e).filter(e=>this.isKind(e,"JsxElement")||this.isKind(e,"JsxSelfClosingElement")||this.isKind(e,"JsxExpression"))}static getAllJsxChildren(e){var t;let i;try{(i=this.getJsxChildrenFirstLevel(e)).forEach(e=>{i=[...i,...this.getAllJsxChildren(e)]})}catch(e){}return null!==(t=null==i?void 0:i.sort((e,t)=>e.getPos()-t.getPos()))&&void 0!==t?t:[]}static isKind(e,t){return t==e.getKindName()}static getNodeData(e){let t=this.getJsxElementName(e).name,i=this.getAttributes(e),l={},n={_nodeType:e.getKindName()};i.forEach(e=>{let t=this.getAttributeKey(e),i=this.getAttributeValue(e),{value:r,nodeKind:o}=this.nodeValueFactory(i);r&&t&&(l={...l,[t]:r}),o&&t&&(n={...n,[t]:o})});let r=this.getJsxTextOfJsxElement(e);return r&&r.getText()&&(l={...l,children:r.getText()},n={...n,children:"StringLiteral"}),{type:{resolvedName:t},isCanvas:!0,props:l,displayName:t,custom:n,hidden:!1,nodes:[],linkedNodes:{}}}static flatten(e,t,i){var l;if(!e||!this.isKind(e,"JsxElement")&&!this.isKind(e,"JsxSelfClosingElement")&&!this.isKind(e,"JsxExpression"))return;let n=null!==(l=I.getIdentifier(e))&&void 0!==l?l:this.getIdFromSourceCode(e),r=this.getNodeData(e),o=[],a=this.getJsxChildrenFirstLevel(e);for(let e=0;e<(null==a?void 0:a.length);e++){let i=a[e];o.push(this.flatten(i,t,n))}let s={...r,nodes:o,parent:i};return t[n]=s,n}static getNodes(e){if(!e||!this.isKind(e,"JsxElement"))throw"Can't getNodes from the give node that has no kind of type JsxElement";let t={};if(this.flatten(e,t,"ROOT"),!e||!this.isKind(e,"JsxElement"))throw"Can't getNodes from the give node that has no kind of type JsxElement";return t}static toCraftNodes(e){var t;let i={type:{resolvedName:"Root"},isCanvas:!0,props:{"data-cy":"root-container"},displayName:"Root",custom:{},hidden:!1,nodes:[],linkedNodes:{}},l=this.getNodes(e),n=null===(t=Object.keys(l))||void 0===t?void 0:t.find(e=>"ROOT"==l[e].parent),r={};return n?(i={...i,nodes:[...i.nodes,n]},r={...l,ROOT:i}):r={ROOT:i},r}addCustomProps(e){let t=this.getImportDeclarations(),i={};return Object.keys(e).forEach(l=>{let n=e[l],r=I.getDisplayNameInNamedImports(n.displayName,t),o={...n,custom:{...n.custom,...r}};i={...i,[l]:o}}),i}getImportDeclarations(){let e=this.ast.getImportDeclarations(),t=[];return e.forEach(e=>{var i,l;let n=e.getNamedImports().length?e.getNamedImports():void 0,r=null==n?void 0:n.map(e=>{var t;return{name:e.getName(),alias:null===(t=e.getAliasNode())||void 0===t?void 0:t.getText()}}),o=null===(i=e.getDefaultImport())||void 0===i?void 0:i.getText(),a=null===(l=e.getModuleSpecifier())||void 0===l?void 0:l.getText();t=[...t,{namedImports:r,defaultImport:o,moduleSpecifier:a}]}),t}static getDisplayNameInNamedImports(e,t){for(let i=0;i<(null==t?void 0:t.length);i++){let l=t[i],n=null==l?void 0:l.namedImports,r=null==l?void 0:l.defaultImport,o=null==l?void 0:l.moduleSpecifier;if(r===e)return{defaultImport:e,moduleSpecifier:o};if(n)for(let t=0;t<(null==n?void 0:n.length);t++){let i=n[t],l=null==i?void 0:i.name,r=null==i?void 0:i.alias;if(r===e||l===e)return{namedImportName:l,namedImportAlias:r,moduleSpecifier:o}}}return{}}identifyElements(e){let t=I.getAllJsxElements(this.getContent());for(let i=0;i<t.length;i++){let l,n="";t=I.getAllJsxElements(this.getContent());let r=I.getAttributes(t[i]);try{I.getJsxAttribute(t[i],"_nodeId")}catch(l){n+=' _nodeId="'.concat(e?e():I.getSameIdAsFlows(t[i]),'" ')}l=r.length?r[0].getStart():I.getJsxElementName(t[i]).node.getEnd(),this.ast.insertText(l,e=>e.write(n))}return this}static getIdentifier(e){try{let t=I.getJsxAttribute(e,"_nodeId"),i=I.getAttributeValue(t);return this.nodeValueFactory(i).value}catch(e){console.error("Could not find node identifier")}}unidentifyElements(){let e=I.getAllJsxElements(this.getContent());for(let t=0;t<e.length;t++){e=I.getAllJsxElements(this.getContent());try{let i=I.getJsxAttribute(e[t],"_nodeId");this.ast.removeText(i.getStart(),i.getEnd())}catch(e){}}return this}static getJsxElementByIdentifier(e,t){let i=this.getAllJsxElements(e),l=i.find(e=>this.getIdentifier(e)==t);if(!l)throw'Could not find element specified with uuid "'.concat(t,'" in the provided node');return l}convertJsxExpressionToJsxElement(){let e=()=>{let e=this.getContent();return I.getAllJsxElements(e).filter(e=>"JsxExpression"==e.getKindName())},t=i=>{i.length&&(this.ast.replaceText([i[0].getPos(),i[0].getEnd()],""),t(e()))};return t(e()),this}static reactElementFactory(e,t){let i;let l=e.displayName;if("ReactCode"===l){let t=e.props.codeBlock;i="".concat(t)}else{let n,r="";if(Object.keys(e.props).filter(e=>!["_nodeId"].includes(e)).forEach(t=>{let i=e.props[t];if("StringLiteral"==e.custom[t]&&"children"!=t&&(i='"'.concat(i,'"')),"children"==t){n=i;return}void 0===i?r+=" ".concat(t):r+=" ".concat(t,"=").concat(i)}),"JsxSelfClosingElement"===e.custom._nodeType){let e=n?' children="'.concat(n,'"'):"";i="<"+"".concat(l)+r+e+"/>"}else i="<"+"".concat(l)+r+">"+"".concat(null!=n?n:"")+t+"</"+"".concat(l)+">"}return i}static nodeValueFactory(e){let t;var i=null==e?void 0:e.getKindName();if("StringLiteral"===i)t=null==e?void 0:e.getLiteralValue();else{let l=null==e?void 0:e.getExpression(),n=null==l?void 0:l.getKindName();switch(n){case"StringLiteral":case"NumericLiteral":case"TrueKeyword":case"FalseKeyword":t=l.getLiteralValue(),i=n;break;case"ObjectLiteralExpression":let r=l.getProperties().reduce((e,t)=>{var i,l,n=t.getName();try{i=null===(l=t.getInitializer())||void 0===l?void 0:l.getLiteralValue()}catch(e){i=t.getInitializer().getText()}return{...e,[n]:i}},{});t=r,i=n;break;default:t=null==e?void 0:e.getText()}}return{value:t,nodeKind:i}}static getIdFromSourceCode(e){try{return e.getKindName()+"_"+e._compilerNode.pos+"_"+e._compilerNode.end}catch(t){return e}}constructor(e){this.ast=e}}var J=i(64509),D=i(52026),N=i(8939);class z extends a.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){if(this.state.hasError){var e;return(0,o.jsx)(D.Stack,{style:{height:"100vh",justifyContent:"center",alignItems:"center"},children:(0,o.jsxs)(N.FA,{width:"80%",maxWidth:"600px",alignItems:"center",children:[(0,o.jsx)(D.Text,{children:"Can not render Visual UI frame due the following error:"}),(0,o.jsx)(D.Text,{color:"red",marginTop:"10px",children:null===(e=this.state.error)||void 0===e?void 0:e.message})]})})}return this.props.children}constructor(e){super(e),this.state={hasError:!1}}}var O=i(28261),P=i.n(O),B=i(29691),K=i.n(B);let L=(e,t,i)=>{e.debounce?(r=setTimeout(()=>{t(ej+"/ui",e)},1e3),l&&e.nodeId==l.nodeId&&clearTimeout(n),l=e,n=r):t(ej+"/ui",e),i&&i()},R=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"customCode.tsx",i=new T.IKL({useInMemoryFileSystem:!0,manipulationSettings:{indentationText:T.xI4.Tab},compilerOptions:{target:T.H7j.Latest,scriptKind:T.hVH.TSX,languageVariant:T.C$L.JSX}}),l=i.createSourceFile(t,e,{overwrite:!0});return l},Q=(e,t,i)=>{var l,n;let r=null===(l=e.filter(e=>"ImportDeclaration"==e.type))||void 0===l?void 0:l.map(e=>e.id),o=null===(n=e.filter(e=>["JsxElement","JsxSelfClosingElement"].includes(e.type)))||void 0===n?void 0:n.map(e=>e.id),a=[];r.forEach(e=>{let i=t[e],l=i.module;Object.keys(i).forEach(e=>{let t;"default"==e&&i[e]?(t={defaultImport:i.default,moduleSpecifier:l},a.push(t)):e.startsWith("import-")&&i[e]&&(t={namedImports:[{name:i[e],alias:void 0}],moduleSpecifier:l},a.push(t))})});let s=[];function d(e){for(let t of a){if(t.defaultImport===e)return!0;if(t.namedImports){for(let i of t.namedImports)if(i.name===e)return!0}}return!1}e.forEach(e=>{o.includes(e.id)&&s.push({...e.data,tagName:t[e.id].name})});let p=function(){let e=[];for(let t of s){let{tagName:i,namedImports:l,defaultImport:n}=t;d(i)||l||n||e.push({defaultImport:i}),!d(i)&&(l||n)&&e.push(t)}return e}();return p};var F=i(60545),Z=i(30361),M=i.n(Z),W=(0,J.Ic)(e=>{var t;let{children:l,topics:n,currentPageContent:r,resolveComponentsDir:s,onReady:p=()=>{}}=e,c=(0,a.useRef)(),[u,f]=(0,a.useState)(!0),[h,g]=(0,a.useState)({}),[x,m]=(0,a.useState)({}),[y,v]=(0,a.useState)(),{publish:b,data:E}=n,{actions:C,query:A,connectors:k}=(0,d.jE)((e,i)=>{let l=JSON.parse(i.serialize()),n=S().diff(h,JSON.parse(i.serialize()));v(null===(a=e.events.selected)||void 0===a?void 0:a.keys().next().value);let r=(null==n?void 0:n.length)>0,o=S().diff(x,l);if(!i.getOptions().skipTopic&&(null==o?void 0:o.length)&&JSON.stringify(o)!=t){var a,s,d={};if(1==o.filter(e=>"N"==e.kind).length){let e=o.find(e=>"N"==e.kind).path[0],t=l[e].parent,i=l[t].nodes.findIndex(t=>t==e),n=l[e].custom;L(d={action:"add-node",nodeId:e,nodeName:l[e].displayName,parent:t,childrenPos:i,data:n,nodeProps:l[e].props},b)}else if(o.find(e=>"D"==e.kind)){let e=o.filter(e=>"D"==e.kind).map(e=>e.path[0]),t=o.find(e=>"A"==e.kind).path[0];L(d={action:"delete-node",deletedNodes:e,parent:t},b)}else if(o.find(e=>"E"==e.kind)){let e=o.find(e=>"E"==e.kind&&"parent"==e.path[1]),t=o.find(e=>"E"==e.kind&&"children"==e.path[2]);if(t){let e=t.path[0],i=M().decode(t.rhs);d={action:"edit-node",nodeId:e,newChildValue:i,debounce:!0}}else if(e){let t=e.path[0],i=e.rhs,l=e.lhs,n=x[l].nodes.findIndex(e=>e==t),r=o.find(e=>"E"==e.kind&&e.path[0]==i&&e.rhs==t),a=null!==(s=null==r?void 0:r.path[2])&&void 0!==s?s:-1;d={action:"move-node",isSameParent:!1,nodeId:t,oldParentId:l,newParentId:i,newPos:a,oldPos:n}}else{let e=o.find(e=>"E"==e.kind&&"nodes"==e.path[1]),t=e.path[0],i=o.sort((e,t)=>e.path[2]-t.path[2]).map(e=>e.rhs),l=x[t].nodes,n=function(e,t){let i=[],l={};for(let t=0;t<e.length;t++)l[e[t]]=t;for(let e=0;e<t.length;e++){let n=t[e];i.push(l[n])}return i}(l,i);d={action:"move-node",isSameParent:!0,parent:t,childrenIndexes:n}}L(d,b)}t=JSON.stringify(o),m(l)}return{hasChanges:r,currentEditorNodes:l,enabled:e.options.enabled}}),T=(e,t,i,l,n)=>(e[t]=i,e[l].nodes.splice(n,0,t),e);(0,a.useEffect)(()=>{y&&b("zoomToNode",{id:y})},[y]),(0,a.useEffect)(()=>{let e=E["flow/editor"],t=e.action,i=e.nodeId,l=e.value,n=e.param;switch(t){case"delete-node":var r;if("JsxElement"!=e.deletedNodeType)return;C.setOptions(e=>e.skipTopic=!0),null===(r=e.nodesToDelete)||void 0===r||r.forEach(e=>C.delete(e)),m(JSON.parse(A.serialize()));break;case"delete-data":if(!n)return;try{C.setOptions(e=>e.skipTopic=!0),C.setProp(i,e=>(delete e[n],e)),m(JSON.parse(A.serialize()))}catch(e){console.error("error deleting data. ",e)}break;case"edit-data":if(!n)return;try{C.setOptions(e=>e.skipTopic=!0),C.setProp(i,e=>e[n]=l),C.setCustom(i,e=>e[n]="JsxText");let t=null==e?void 0:e.deleteKey;t&&C.setProp(i,e=>(delete e[t],e)),m(JSON.parse(A.serialize()))}catch(e){console.error("error editing data. ",e)}break;case"add-data":let o=JSON.parse(A.serialize());if(!o[i])return;try{o[i]={...o[i],props:{...o[i].props,[n]:l}},C.setOptions(e=>e.skipTopic=!0),C.setProp(i,e=>e[n]=l),m(o)}catch(e){console.error("error adding data. ",e)}break;case"add-node":let a=e.type,d=e.childrenPos,p=e.nodeName,c=e.parent;if("JsxElement"==a){let e={displayName:p,props:{},custom:{defaultImport:p,moduleSpecifier:'"'.concat(s).concat(p,'"'),_nodeType:"JsxElement"},hidden:!1,isCanvas:!0,parent:c,type:{resolvedName:p},nodes:[]},t=JSON.parse(A.serialize());if(!c||!t)return;try{let l=T(t,i,e,c,d);C.setOptions(e=>e.skipTopic=!0),C.deserialize(l),m(JSON.parse(A.serialize()))}catch(e){console.error("error adding node (JsxElement). ",e)}}else try{let t=e.data;if(!(null==t?void 0:t.isAncestorJsxElement))return;C.setOptions(e=>e.skipTopic=!0),C.setProp(c,e=>e[t.key]=t.value),m(JSON.parse(A.serialize()))}catch(e){console.error("error adding node (Not a JsxElement). ",e)}}},[E["flow/editor"]]),(0,a.useEffect)(()=>{C.setOptions(e=>e.skipTopic=!1)},[x]);let J=async()=>{let e=I.parse(r),t=e.data();g(t);let i=null!==(o=null==A?void 0:null===(n=A.getOptions())||void 0===n?void 0:n.resolver)&&void 0!==o?o:{},l=Object.keys(i);try{var n,o,a={};Object.keys(t).forEach(e=>{if(!l.includes(t[e].displayName)){let i={...t[e],custom:{...t[e].custom,unknown:!0},type:{...t[e].type,resolvedName:"Unknown"}};a[e]=i}}),C.deserialize({...t,...a})}catch(e){throw"Error loading editor nodes"}};return(0,w.Z)(["z","Z","s","S","c","C","Delete","Backspace"],e=>{var t,i;let l=(null===(i=c.current)||void 0===i?void 0:null===(t=i.getBoundingClientRect())||void 0===t?void 0:t.height)>0;if(l){if(("z"==e.key||"Z"==e.key)&&(e.ctrlKey||e.metaKey)&&e.shiftKey){try{C.history.redo()}catch(e){console.error("can not redone action")}return}if(("z"==e.key||"Z"==e.key)&&(e.ctrlKey||e.metaKey)){try{C.history.undo()}catch(e){console.error("can not undone action")}return}}}),(0,a.useEffect)(()=>{let e=async t=>{try{await J()}catch(i){t<10?(setTimeout(()=>e(t+1),5e3),f(!0)):console.error("Max retry reached! Error deserializing editor nodes (CraftJS nodes). Error: ".concat(i)),console.error("Error deserializing editor nodes (CraftJS nodes). Error: ".concat(i))}};r&&(f(!1),e(0))},[r]),(0,o.jsxs)("div",{style:{backgroundColor:"rgb(50, 50, 50)",overflow:"hidden",flex:1,display:"flex",flexDirection:"column"},children:[(0,o.jsxs)(j(),{children:[(0,o.jsx)("title",{children:"Platform UI"}),(0,o.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:i(72555)})]}),u?(0,o.jsx)(D.Stack,{style:{height:"100vh",justifyContent:"center",alignItems:"center",zIndex:100,backgroundColor:"#f0f0f0"},children:(0,o.jsx)(F.$,{size:"large"})}):null,(0,o.jsx)("div",{onLoad:()=>f(!1),className:"page-container",style:{width:"100%",height:"100%"},children:(0,o.jsx)("div",{id:"editor",className:"craftjs-renderer",ref:e=>{c.current=e,k.select(k.hover(e,null),null)},style:{flex:1,position:"relative",overflow:"auto",color:"black",backgroundColor:"#f0f0f0",margin:"0 auto",left:0,right:0,width:"100%",height:"100%"},children:(0,o.jsx)(z,{children:(0,o.jsx)("div",{id:"editor-frame-container",children:(0,o.jsx)(d.RQ,{})})})})})]})},{topics:["flow/editor"]}),V=i(34466),_=i(70549),H=e=>{var t;let{name:i,color:l,size:n}=e,r=null!==(t=V[i])&&void 0!==t?t:_.Z;return(0,o.jsx)(r,{color:l,size:n})},U=i(38880),G=i(88724);let q=e=>{let{palettes:t,sendMessage:i,currentPage:l}=e,n=a.useRef(null),[r,s]=a.useState(""),{connectors:p,query:c}=(0,d.jE)(),u=Object.keys(t).reduce((e,i)=>{let l=t[i]?Object.keys(t[i]).filter(e=>{var l,n;return!(null===(n=t[i][e].craft)||void 0===n?void 0:null===(l=n.custom)||void 0===l?void 0:l.hidden)}).reduce((e,l)=>{var n,r,o,a;return{...e,[l]:{dropable:!0,element:t[i][l],icon:(n=t[i][l],a="Component",(null==n?void 0:null===(r=n.craft)||void 0===r?void 0:r.custom)&&(null==n?void 0:null===(o=n.craft)||void 0===o?void 0:o.custom.icon)&&(a=n.craft.custom.icon),a)}}},{}):{...e};return{...e,[i]:l}},{}),f=r?Object.keys(u).reduce((e,t)=>{let i=u[t],l=Object.keys(i),n=l.filter(e=>e.toLocaleLowerCase().includes(r.toLocaleLowerCase())).reduce((e,t)=>({...e,[t]:i[t]}),{});var o={};return Object.keys(n).length&&(o={[t]:n}),{...e,...o}},{}):u,h=Object.keys(f).filter(e=>"craft"!=e);function g(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];let e=.95*window.innerHeight;n.current&&(n.current.style.height=e+"px",n.current.style.maxHeight=e+"px")}return a.useEffect(()=>(g(),window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)),[]),(0,o.jsx)("div",{className:"visualui-sidebar",style:{backgroundColor:"rgb(37, 37, 38)"},children:(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",flex:1,padding:"4px"},children:(0,o.jsxs)("div",{ref:n,style:{padding:"4px",display:"flex",flexDirection:"column",flex:1},children:[(0,o.jsx)("p",{style:{padding:"18px 0px 0px 14px",fontSize:"18px",color:"white",fontWeight:"400"},children:"Components"}),(0,o.jsxs)("div",{style:{display:"flex",margin:"18px 12px 18px 2px",position:"relative"},children:[(0,o.jsx)("input",{style:{fontFamily:"Jost-Regular",padding:"8px 8px 8px 36px",display:"flex",boxSizing:"border-box",fontSize:"14px",backgroundColor:"#323232",borderRadius:"10px",borderWidth:"0px",outline:"none",color:"white",flex:1},value:r,onChange:e=>s(e.target.value),placeholder:"Search..."}),(0,o.jsx)(U.Z,{color:"grey",size:20,style:{position:"absolute",top:"8px",left:"10px"}}),r?(0,o.jsx)(G.Z,{onClick:()=>s(""),color:"white",size:20,style:{position:"absolute",top:"8px",right:"10px",cursor:"pointer"}}):null]}),(0,o.jsx)("div",{className:"visualui-sidebar-list",style:{overflow:"auto",overflowX:"hidden",display:"flex",flexDirection:"column",flex:1},children:h.map((e,t)=>(0,o.jsxs)("div",{style:{flexDirection:"column",display:"flex",marginBottom:"25px"},children:[(0,o.jsx)("p",{style:{paddingLeft:"16px",marginBottom:"10px",fontSize:"12px",color:"grey"},children:e.toUpperCase()}),(0,o.jsx)("div",{className:"visualui-sidebar-list",style:{flex:1,display:"flex",justifyContent:"flex-start",flexWrap:"wrap",alignContent:"flex-start",gap:"8px"},children:Object.keys(f[e]).map((t,i)=>{let l=f[e][t];return(null==l?void 0:l.nonDeletable)?null:(0,o.jsx)("div",{onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#FFFFFF10"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=""},title:t,style:{display:"flex",cursor:"grab",borderRadius:"6px"},children:(0,o.jsxs)("div",{ref:e=>p.create(e,()=>l.dropable?(0,o.jsx)(d.W_,{is:l.element,canvas:!0}):a.createElement(l.element)),id:"drag-element-"+t,className:"draggable-element",style:{textAlign:"center",paddingTop:"10px",paddingBottom:"10px",width:"100px",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,o.jsx)(H,{name:l.icon,color:"#a8a29e",size:32}),(0,o.jsx)("div",{style:{marginTop:"14px"},children:(0,o.jsx)("p",{style:{fontSize:"12px",width:"100%",color:"white",padding:"5px"},children:t.length>12?t.substring(0,9)+"...":t})})]})},i)})})]},t))})]})})})};var X=i(51745),$=i(27911),Y=e=>{let{sourceCode:t,onChange:i,onSave:l,onEscape:n}=e;return l&&(0,w.Z)(["s","S"],e=>{if(("s"==e.key||"S"==e.key)&&(e.ctrlKey||e.metaKey)&&l)return e.preventDefault(),l()}),n&&(0,w.Z)(["Escape"],e=>{if("Escape"==e.key&&n)return e.preventDefault(),n()}),(0,o.jsx)($.ZP,{theme:"vs-dark",defaultLanguage:"javascript",value:t,onChange:e=>i(e)})},ee=i(56839),et=i(53544),ei=i(1674),el=i(50664),en=i(91425),er=i(43748),eo=i(8219),ea=i(89285),es={nodeBackgroundColor:"#252526",borderColor:"grey",blockPort:"grey",flowPort:"grey",dataPort:"grey",textColor:"#CCCCCC",dataOutputColor:"grey",nodeBorderColor:"grey",edgeColor:"grey",titleColor:"black"},ed=i(66306),ep=i(64973),ec=i(73235),eu=i(17788),ef=i(11001),eh=i(81395);function eg(){let e=(0,ec._)(["\n  height: ",";\n  flex: ",";\n  color: #545454;\n"]);return eg=function(){return e},e}let ex=eu.default.div(eg(),e=>e.visible&&e.height&&"full"!==e.height?"".concat(e.height):"auto",e=>e.visible&&e.height&&"full"===e.height?"1":"unset"),em=e=>{let{visible:t,icon:i,title:l,children:n,height:r,onChange:s}=e;return(0,o.jsxs)(ex,{visible:t,height:r,style:{display:"flex",flexDirection:"column"},children:[(0,o.jsxs)("div",{onClick:()=>{s&&s(!t)},style:{cursor:"pointer",backgroundColor:"#191919",borderBottom:"1px solid #cccccc20",alignItems:"center",padding:"10px",flexDirection:"row",display:"flex"},children:[(0,o.jsxs)("div",{style:{display:"flex",flex:1,alignItems:"center"},children:[a.createElement(i,{size:18,color:"white"}),(0,o.jsx)("div",{style:{fontSize:18,marginLeft:"10px",color:"white"},children:l})]}),t?(0,o.jsx)(ef.Z,{size:18}):(0,o.jsx)(eh.Z,{size:18})]}),(0,o.jsx)(N.FA,{style:{display:t?"flex":"none",flex:1,flexDirection:"column",overflowY:"scroll"},children:n})]})};var ey=i(67346),ev=i(53993),eb=i(752);function eE(e){return(0,d._i)(e)}function eC(e){let t=null!=e?e:null;return t?(0,eb.KO)(t):[null,null]}function eA(e,t,i){let[l,n]=(0,a.useState)(i),[r]=(0,eb.KO)(e);return(0,a.useEffect)(()=>{r&&r.subscribe&&r.subscribe(e=>{n(e=>{let i=t(e,r);return null!=i?i:e})},()=>{})},[r]),{state:l,visualUiData:r,set:"baby"}}let ej="flows-ui",ew=(0,ev.FlowConstructor)(ej),ek=e=>{let{id:t,children:i,onClick:l,disabled:n=!1}=e;return(0,o.jsx)("div",{id:t,onClick:n?()=>null:l,style:{marginBottom:20,backgroundColor:"black",opacity:n?.2:1,borderRadius:"100%",justifyContent:"center",alignItems:"center",width:"40px",height:"40px",display:"flex",cursor:"pointer"},children:i})};var eS=(0,a.memo)((0,J.Ic)(function(e){let{isActive:t=!0,sourceCode:i="",sendMessage:l,currentPage:n="",userPalettes:r={},resolveComponentsDir:c="",topics:u,metadata:f={},setContext:h}=e,g=(0,a.useRef)(),[x,m]=(0,a.useState)(!1),[v,b]=(0,a.useState)(""),[E,A]=(0,a.useState)(v),[j,w]=(0,a.useState)(!1),[k,S]=(0,a.useState)("preview"),[T,I]=(0,a.useState)(!1),[J,D]=(0,a.useState)(!0),[z,O]=(0,a.useState)(!1),P=(0,s.useRouter)(),{publish:B}=u,{data:K}=u,[L,F]=a.useState(!1),Z="preview"==k;(0,a.useEffect)(()=>{let e=()=>F(!1);return window.addEventListener("dragenter",e),()=>{window.removeEventListener("dragenter",e)}},[]);let M={...C,...r},V=Object.keys(M).reduce((e,t)=>e={...e,...M[t]},{}),H=async()=>{b(i)},U=async(e,t,i)=>{var n=t;switch(e){case"monaco":l({type:"save",data:{content:n=E}});break;case"flows":if(!i)break;let r=R(n),o=r.getImportDeclarations(),a=Q(i.nodes,i.nodesData,c);if(a.length){let e=a.reduce((e,t)=>{var i,l,n,r,o;let a;let s=t.moduleSpecifier;if(s){if(null===(i=t.namedImports)||void 0===i?void 0:i.length){let e=(null===(l=t.namedImports[0])||void 0===l?void 0:l.alias)?(null===(n=t.namedImports[0])||void 0===n?void 0:n.name)+" as "+(null===(r=t.namedImports[0])||void 0===r?void 0:r.alias):null===(o=t.namedImports[0])||void 0===o?void 0:o.name;a="import {"+e+'} from "'+s+'";\n'}else t.defaultImport&&(a="import "+t.defaultImport+' from "'+s+'";\n')}else a="";return e+a},"\n"),t=o?o[o.length-1].getEnd():0,i=r.insertText(t,e);n=i.getText()}l({type:"save",data:{content:n}})}};(0,a.useEffect)(()=>{A(v)},[v]),(0,a.useEffect)(()=>{H()},[i]),(0,a.useEffect)(()=>{var e;(null===(e=K.zoomToNode)||void 0===e?void 0:e.id)&&!T&&I(!0)},[K.zoomToNode]);let $=(0,o.jsx)("div",{style:{display:"flex",width:"100%",top:T?0:-1e12,position:T?"relative":"absolute",height:"100%"},children:(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100vh"},children:[(0,o.jsxs)("div",{style:{padding:"10px",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",zIndex:999999,backgroundColor:"#252526",borderBottom:"1px solid #cccccc20"},children:[(0,o.jsx)(N.sL,{theme:"dark",children:(0,o.jsx)(ed.zx,{onPress:e=>{I(!1),m(!1),e.stopPropagation()},hoverStyle:{opacity:1},opacity:.7,size:"$3",chromeless:!0,circular:!0,noTextWrap:!0,children:(0,o.jsx)(ee.Z,{fillOpacity:0,style:{alignSelf:"center"},opacity:.5,color:"var(--color)"})})}),(0,o.jsxs)(N.sL,{display:j?"flex":"none",theme:"dark",marginVertical:"$1",children:[(0,o.jsx)(ed.zx,{size:"$3",chromeless:!0,circular:!0,marginRight:"$2",onPress:()=>{A(v),w(!1)},children:(0,o.jsx)(G.Z,{})}),(0,o.jsx)(ed.zx,{size:"$3",chromeless:!0,circular:!0,onPress:()=>U("monaco",E),children:(0,o.jsx)(et.Z,{fillOpacity:0})})]}),(0,o.jsxs)(ep.t,{display:j?"none":"flex",theme:"dark",type:"single",defaultValue:"preview",disableDeactivation:!0,children:[(0,o.jsx)(ep.t.Item,{value:"code",onPress:()=>{S(void 0),m(!0)},children:(0,o.jsx)(ei.Z,{})}),(0,o.jsx)(ep.t.Item,{value:"flow",onPress:()=>{S("flow"),m(!1)},children:(0,o.jsx)(el.Z,{})}),(0,o.jsx)(ep.t.Item,{value:"flow-preview",onPress:()=>{S("flow-preview"),m(!1)},children:(0,o.jsx)(en.Z,{})}),(0,o.jsx)(ep.t.Item,{value:"preview",onPress:()=>{S("preview"),m(!1)},children:(0,o.jsx)(er.Z,{})})]})]}),(0,o.jsx)("div",{style:{display:x?"flex":"none",flex:1},children:(0,o.jsx)(Y,{onChange:e=>{A(e),v!=e?w(!0):w(!1)},sourceCode:E})}),(0,o.jsxs)("div",{style:{opacity:1,marginRight:0,flex:1,display:x?"none":"flex",flexDirection:"column",backgroundColor:"#252526"},children:[(0,o.jsx)(em,{icon:eo.Z,title:"Customize",height:z?"55%":"full",visible:J,onChange:e=>D(e),children:(0,o.jsx)(ew,{disableDots:!t||Z,sourceCode:v,setSourceCode:b,customComponents:(0,ey.B)(P.pathname,P.query),onSave:(e,t,i)=>U("flows",e,i),enableCommunicationInterface:!0,config:{masks:(0,ey.W)(P.pathname,P.query)},zoomOnDoubleClick:!Z,flowId:ej,themeMode:"dark",bgColor:"#252526",theme:es,nodePreview:k,metadata:f})}),(0,o.jsx)(em,{icon:ea.Z,title:"Layers",visible:z,onChange:e=>O(e),height:J?"55%":"full",children:(0,o.jsx)(p.S9,{})})]})]})},"auxiliarySidebar"),ec=(0,o.jsx)("div",{style:{display:"flex",flex:1,height:"100%"},children:(0,o.jsx)(q,{palettes:M,sendMessage:l,currentPage:n})},"sidebar"),eu=(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ek,{id:"components-to-drag-btn",onClick:()=>F(!0),children:(0,o.jsx)(_.Z,{color:"white"})}),(0,o.jsx)(ek,{id:"save-nodes-btn",onClick:()=>B("savenodes",{value:"visual-ui"}),children:(0,o.jsx)(et.Z,{color:"white"})}),(0,o.jsx)(ek,{onClick:()=>{P.push({query:{}})},children:(0,o.jsx)(G.Z,{color:"white"})})]}),ef=(0,o.jsx)("div",{id:"editor-layout",style:{flex:1,display:"flex",minWidth:"280px",borderRight:"2px solid #424242",borderLeft:"2px solid #424242"},children:(0,o.jsx)(W,{currentPageContent:v,onSave:()=>null,resolveComponentsDir:c})});function eh(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];let e=window.innerHeight;g.current&&(g.current.style.height=e+"px")}(0,a.useEffect)(()=>(eh(),window.addEventListener("resize",eh),()=>window.removeEventListener("resize",eh)),[]);let eg={resolver:V,onRender:y},ex=eE(eg);return h&&h(ex),(0,o.jsx)("div",{ref:g,style:{display:"flex",flex:1,width:"100%"},children:(0,o.jsx)(d.ML,{...eg,parentContext:ex,children:(0,o.jsx)("div",{style:{display:"flex",flex:1,flexDirection:"row"},children:(0,o.jsx)(X.Z,{openPanel:L,setOpenPanel:F,actionContent:eu,leftPanelContent:ec,centerPanelContent:ef,rightPanelContent:$,rightPanelResizable:!Z,rightPanelWidth:Z?0:50,rightPanelVisible:T})})})})},{topics:["zoomToNode"]})),eT=e=>{let{userPalettes:t={},_sourceCode:i="",_resolveComponentsDir:l="@/uikit",_currentPage:n="",onSave:r=()=>null,metadata:s={},contextAtom:d}=e,[p,c]=eC(d),[u,f]=(0,a.useState)(n),h=async e=>{let t=e.type,i=e.data;switch(t){case"loadPage":let l=i.pageName;f(l);break;case"save":let n=i.content;r(function(e){let t;try{t=K().format(e,{bracketSameLine:!0,jsxBracketSameLine:!0,singleAttributePerLine:!1,printWidth:1e3,quoteProps:"consistent",jsxSingleQuote:!1,parser:"typescript",plugins:[P()]})}catch(e){console.error("Could not format text. Error: "+e)}return null!=t?t:e}(n))}};return(0,o.jsx)(J.US,{children:i?(0,o.jsx)(eS,{sourceCode:i,currentPage:u,userPalettes:t,sendMessage:h,resolveComponentsDir:"".concat(l,"/"),metadata:s,setContext:c}):null})}}}]);