(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4935],{54283:function(e,t,s){"use strict";s.d(t,{$:function(){return l},J:function(){return n}});var r=s(94801),a=s(55858),i=s(53596);let o=(0,i.j)();class n{get(e,t){var s;return null!==(s=this.data[e])&&void 0!==s?s:t}getObjectSchema(){return this.objectSchema}getModelName(){return this.modelName}getLocation(){let e=this.objectSchema.is("location").getFields();if(!e.length)throw"Model error: "+this.getModelName()+" doesn't have location information";let t=e[0],s=this.objectSchema.getFieldKeyDefinition(t,"latKey"),r=this.objectSchema.getFieldKeyDefinition(t,"lonKey");if(this.data[t])return{lat:this.data[t][s],lon:this.data[t][r]}}getId(){return this.data[this.idField]}getNotificationsTopic(e){return"notifications/".concat(this.getModelName(),"/").concat(e,"/").concat(this.getId())}getNotificationsPayload(){return this.serialize()}setId(e,t){return new this.constructor({...t||this.data,[this.idField]:e},this.session,this.modelName)}isVisible(){return!this.isDeleted()}isDeleted(){return!!this.data._deleted}list(e,t,s){if(!e)return this.read();{let{parsed:t,searchWithoutTags:s}=function(e){let t;let s=/(\w+):("[^"]+"|\S+)/g,r={},a=e;for(;null!==(t=s.exec(e));){let e=t[1].toLowerCase(),s=t[2].replace(/"/g,"").toLowerCase();r[e]=s,a=a.replace(t[0],"")}return{parsed:r,searchWithoutTags:a=a.trim()}}(e);for(let[e,s]of Object.entries(t))if(!this.data.hasOwnProperty(e)||this.data[e]!=s){o.debug({data:this.data[e]},"discarded: ".concat(JSON.stringify(this.data[e])));return}let a=this.objectSchema.is("search").getFields();for(var r=0;r<a.length;r++)if((this.data[a[r]]+"").toLowerCase().includes(s.toLowerCase()))return this.read()}}async listTransformed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=this.list(e,s,r);if(a)return await this.getObjectSchema().apply("list",a,t)}create(e){let t=this.getData(e);return o.debug({transformed:t},"Creating object: ".concat(JSON.stringify(t))),new this.constructor(t,this.session,this.modelName).validate()}async createTransformed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=await this.getObjectSchema().apply("create",{...this.data},e);return this.create(t)}read(e){return{...this.data}}async readTransformed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,s=await this.getObjectSchema().apply("read",this.read(t),e);return s}update(e,t){return e.setId(this.getId(),{...t||e.data})}async updateTransformed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=await this.getObjectSchema().apply("update",{...e.data},t,{...this.data});return this.update(e,s)}delete(e){return new this.constructor({_deleted:!0,...e||this.data},this.session,this.modelName)}async deleteTransformed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=await this.getObjectSchema().apply("delete",{...this.data},e);return this.delete(t)}validate(){return this.schema.parse(this.data),this}serialize(){return JSON.stringify(this.data)}static getApiOptions(){throw Error("Derived class must implement getApiOptions")}static _newInstance(e,t){throw Error("Derived class must implement _newInstance.")}static unserialize(e,t){return this._newInstance(JSON.parse(e),t)}static load(e,t){return this._newInstance(e,t)}static sort(e,t,s){return e.sort((e,r)=>e[t]>r[t]?"asc"===s?1:-1:e[t]<r[t]?"asc"===s?-1:1:0)}getData(e){return{...this.getObjectSchema().applyGenerators(null!=e?e:this.data)}}constructor(e,t,s,i){var o,n;this.data=e,this.session=null!=s?s:(0,r.ed)(),this.schema=t,this.objectSchema=a.U.load(this.schema),this.modelName=null!==(o=null==i?void 0:i.toLowerCase())&&void 0!==o?o:"unknown";let l=this.objectSchema.is("id");l.getFields().length>1&&(l=l.isNot("fallbackId")),this.idField=null!==(n=l.getFirst("id"))&&void 0!==n?n:"id"}}class l extends n{static _newInstance(e,t){throw Error("Derived class must implement _newInstance.")}static createDerived(e,t,s,r){class a extends l{static _newInstance(e,t){return new a(e,t)}static getApiOptions(){return{name:s,prefix:r}}constructor(s,r){super(s,t,r,e.substring(0,e.length-5).toLowerCase())}}return a.schemaInstance=t,Object.defineProperty(a,"name",{value:e,writable:!1}),a}constructor(e,t,s,r){super(e,t,s,r)}}},55858:function(e,t,s){"use strict";s.d(t,{U:function(){return a}});var r=s(34406);class a{getFields(){return Object.keys(this.shape)}getFieldKeyDefinition(e,t){return this.shape[e]?this.shape[e]._def[t]:void 0}applyGenerators(e){let t={...e};return Object.keys(this.shape).forEach(s=>{if(this.shape[s]._def.generate){let r=this.shape[s]._def.generate;(!e[s]||r.force)&&(t[s]="function"==typeof r.generator?r.generator(e):r.generator)}}),t}async apply(e,t,s,a){let i={...t},o=this.is("events"),n=Object.keys(o.shape);for(var l=0;l<n.length;l++){let t=n[l],c=o.shape[t],_=void 0!==r&&r.versions&&r.versions.node,p=c._def.events.filter(t=>t.eventName==e&&(!t.eventContext||"client"==t.eventContext&&!_||"server"==t.eventContext&&_));for(var d=0;d<p.length;d++){let e=p[d];s[e.eventHandler]&&(i=await s[e.eventHandler](t,e,i,a))}}return i}getLayout(e){let t=[[]],s=0;return Object.keys(this.shape).forEach(r=>{let a=this.shape[r];t[s].length==e&&(t.push([]),s++),t[s].push({...a,name:r})}),t}getFirst(e){return Object.keys(this.shape).find(t=>{if(this.shape[t]._def[e])return t})}isDisplay(e){let t={};return Object.keys(this.shape).forEach(s=>{(!this.shape[s]._def.display||this.shape[s]._def.display.includes("*")||this.shape[s]._def.display.includes(e))&&(t[s]=this.shape[s])}),new a(t)}is(e){let t={};return Object.keys(this.shape).forEach(s=>{this.shape[s]._def[e]&&(t[s]=this.shape[s])}),new a(t)}isNot(e){let t={};return Object.keys(this.shape).forEach(s=>{this.shape[s]._def[e]||(t[s]=this.shape[s])}),new a(t)}isAfter(e){let t={};return Object.keys(this.shape).forEach(s=>{var r;(null===(r=this.shape[s]._def)||void 0===r?void 0:r.after)&&this.shape[s]._def.after==e&&(t[s]=this.shape[s])}),new a(t)}isBefore(e){let t={};return Object.keys(this.shape).forEach(s=>{var r;(null===(r=this.shape[s]._def)||void 0===r?void 0:r.before)&&this.shape[s]._def.before==e&&(t[s]=this.shape[s])}),new a(t)}merge(e){let t={};return Object.keys(this.shape).forEach(s=>{let r=e.isBefore(s);(t={...t,...r.shape})[s]=this.shape[s];let a=e.isAfter(s);t={...t,...a.shape}}),new a(t)}static load(e){return new a(e.shape)}constructor(e){this.shape=e}}},10347:function(e,t,s){"use strict";s.d(t,{t:function(){return i}});var r=s(52322),a=s(2784);let i=(0,a.createContext)({active:0,setActive:e=>{}}),o=a.forwardRef((e,t)=>{let{initialState:s=0,children:o}=e,[n,l]=(0,a.useState)(s);return(0,r.jsx)(i.Provider,{value:{active:n,setActive:l},children:o})});t.Z=o},91681:function(e,t,s){"use strict";var r=s(52322),a=s(2784),i=s(10347),o=s(17277);let n=a.forwardRef((e,t)=>{let{activeId:s,onSetActive:n=e=>{},...l}=e,{active:d,setActive:c}=(0,a.useContext)(i.t);return(0,r.jsx)(o.Z,{onPress:()=>{n(s),c(s)},theme:s===d?"active":null,chromeless:s!==d,...l})});t.Z=n},61667:function(e,t,s){"use strict";var r=s(52322),a=s(2784),i=s(10347),o=s(93559);let n=a.forwardRef((e,t)=>{let{activeId:s,fast:n=!1,children:l,...d}=e,{active:c}=(0,a.useContext)(i.t),_=c==s;return n?(0,a.useMemo)(()=>(0,r.jsx)(o.Stack,{ref:t,position:"absolute",top:_?0:-1e4,...d,children:l}),[_]):_?(0,r.jsx)(o.Stack,{...d,ref:t,children:l}):null});t.Z=n},50897:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var r=s(52322);s(2784);var a=s(25237),i=s.n(a);let o=i()(()=>Promise.all([s.e(7788),s.e(2881)]).then(s.bind(s,90704)).then(e=>e.default),{loadableGenerated:{webpack:()=>[90704]},ssr:!1}),n=i()(()=>s.e(4210).then(s.bind(s,4210)).then(e=>e.default),{loadableGenerated:{webpack:()=>[4210]},ssr:!1}),l={component:e=>{let{pagination:t,conditionalRowStyles:s,rowsPerPage:a,columns:i,rows:l,onRowPress:d,handlePerRowsChange:c,handlePageChange:_,totalRows:p,currentPage:m,handleSort:x}=e;return(0,r.jsx)(n,{print:!1,export:!1,filter:!1,columns:i,data:l,children:(0,r.jsx)(o,{conditionalRowStyles:s,responsive:!0,striped:!0,pointerOnHover:!0,columns:i,data:l,defaultSortField:"created",defaultSortAsc:!1,onRowClicked:d,onChangeRowsPerPage:c,onChangePage:_,paginationTotalRows:p,paginationDefaultPage:m,pagination:t,paginationServer:!0,sortServer:!0,paginationPerPage:a,onSort:x,paginationRowsPerPageOptions:[10,15,20,25,50,100,500,1e3]})})},column:function(e,t,s,r,a){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return{name:e,selector:t,sortable:s,cell:r,grow:a,minWidth:i}},columns:function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t}}},13997:function(e,t,s){"use strict";s.d(t,{V:function(){return ep},p:function(){return e_}});var r=s(52322),a=s(8939),i=s(89929),o=s(66306),n=s(48115),l=s(2784),d=s(39684),c=s(26887);let _=(e,t,s,r)=>{let[a,i]=(0,l.useState)(e);(0,c.a)(e=>t(e),i,a);let{message:o}=(0,d.mU)(s);return console.log("subscribed to topic for changes: ",s),(0,l.useEffect)(()=>{if(o&&o.message){let e="string"==typeof o.message?o.message:JSON.stringify(o.message),[,,s]=(JSON.parse(e),o.topic.split("/"));t(i)}},[o]),[a,i]};var p=s(93559),m=s(99553),x=s(24066),u=s(6289),h=s(40914),f=s(94484);let b=e=>{let{index:t,data:s,width:a}=e,i=s.element.data,o=s.model.load(i),n=(0,f.d5)();return s.getCard?s.getCard(i,a):(0,r.jsx)(h.q,{height:s.itemHeight,cursor:"pointer",topBarOutSideScrollArea:!1,backgroundColor:"$color1",elevation:"$0",hoverStyle:{o:.8,backgroundColor:"$"+n.tint+"1",elevation:"$1"},borderWidth:1,pointerEvents:"none",pointerEventsControls:"none",onPress:()=>s.onSelectItem(o),...s.getPicture?{image:s.getPicture(i,a),hasPicture:!0}:{},children:s.getBody?s.getBody(i,a):(0,r.jsx)(p.Stack,{mb:"$4",width:a,children:(0,r.jsx)(x.G,{initialData:s.element,name:o.getId(),spinnerSize:75,loadingText:(0,r.jsxs)("div",{className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ai-center _jc-center ",children:["Loading data...",(0,r.jsx)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-bold _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto font_body "})]}),objectId:o.getId(),sourceUrl:s.sourceUrl+"/"+o.getId(),mode:"preview",model:s.model,extraFields:s.extraFields,icons:s.icons,customFields:s.customFields,columnWidth:a-s.contentMargin,onDelete:s.onDelete,deleteable:s.deleteable,extraMenuActions:s.extraMenuActions})},i.key)})},v=e=>{let{overScanBy:t=5,gridElementCard:s,itemMinWidth:a=400,itemHeight:i,rightGap:o=30,contentMargin:n=50,onSelectItem:d=e=>{},extraMenuActions:c,spacing:_=20,getPicture:x,getBody:h,getCard:f,model:v,items:g,sourceUrl:w,customFields:j,onDelete:y,deleteable:N,extraFields:S,icons:P,children:I,...k}=e,C=(0,l.useRef)(null),O=g.map((e,t)=>({id:"item_"+t,element:(0,u.E)("loaded",e),model:v,sourceUrl:w,customFields:j,extraFields:S,icons:P,itemMinWidth:a,getPicture:x,getBody:h,getCard:f,spacing:_,contentMargin:n,onSelectItem:d,onDelete:y,deleteable:N,itemHeight:i,extraMenuActions:c}));return(0,r.jsxs)(p.Stack,{f:1,ref:C,...k,children:[(0,r.jsx)(m.rj,{overScanBy:t,rightGap:o,containerRef:C,spacing:_,data:O,card:null!=s?s:b,itemMinWidth:a},O.length),I]})};s(18190);var g=s(43260);let w=e=>{let{index:t,data:s,width:a}=e,i=s.element,o=s.model.load(i),n=s.onDelete;return(0,r.jsx)(p.Stack,{width:a,children:(0,r.jsx)(g.I,{compact:!0,innerContainerProps:{mb:"$3",mt:"$5",mx:"$3"},onDelete:n,json:i,name:o.getId(),isTemplate:!1})},i.key)},j=e=>{var t,s;let{itemMinWidth:a=400,rightGap:i=30,contentMargin:o=40,spacing:n=20,...d}=e,c=(0,l.useRef)(null),{items:_,model:x}=(0,l.useContext)(e_),u=null==_?void 0:null===(s=_.data)||void 0===s?void 0:null===(t=s.items)||void 0===t?void 0:t.map((e,t)=>({id:"item_"+t,element:e,model:x,onDelete:d.onDelete}));return(0,r.jsx)(p.Stack,{ml:"$5",ref:c,f:1,...d,children:(0,r.jsx)(m.rj,{rightGap:i,containerRef:c,spacing:n,data:u,card:w,itemMinWidth:a},u.length)})};var y=s(41473),N=s(2715),S=s(16399),P=s(91838),I=s(10836),k=s(34406);let C=e=>{let{...t}=e,{resolvedTheme:i}=(0,S.P)(),o=(0,l.useRef)(null),n=(0,l.useContext)(e_),{tint:d}=(0,f.d5)(),[c,_]=(0,l.useState)({location:{lat:"",lon:""}}),m=n.items.data.items.map(e=>{let t=n.model.load(e);return{modelItem:t,location:t.getLocation()}}).filter(e=>e.location),h=(0,l.useMemo)(()=>m.map((e,t)=>(0,r.jsx)(N.Jx,{color:"var(--"+d+"10)",longitude:e.location.lon,latitude:e.location.lat,anchor:"bottom",onClick:t=>{t.originalEvent.stopPropagation(),_(e)}},"marker-".concat(t))),[n.items.data.items,d]);return(0,r.jsx)(p.Stack,{ref:o,f:1,...t,children:k.env.NEXT_PUBLIC_MAPBOX_TOKEN&&"PUT_HERE_YOUR_API_KEY"!==k.env.NEXT_PUBLIC_MAPBOX_TOKEN?(0,r.jsxs)(N.ZP,{mapboxAccessToken:k.env.NEXT_PUBLIC_MAPBOX_TOKEN,mapLib:s.e(2538).then(s.t.bind(s,30517,23)),initialViewState:{latitude:41.3947846,longitude:2.1939663,zoom:12},style:{},mapStyle:"dark"==i?"mapbox://styles/mapbox/dark-v9":"mapbox://styles/mapbox/light-v9",children:[(0,r.jsx)(N.$j,{position:"top-right"}),(0,r.jsx)(N.ot,{position:"top-right"}),(0,r.jsx)(N.Pv,{position:"top-right"}),(0,r.jsx)(P.I,{children:h}),c&&c.modelItem&&(0,r.jsx)(N.GI,{style:{minWidth:"320px"},anchor:"top",longitude:Number(c.location.lon),latitude:Number(c.location.lat),onClose:()=>_({location:{lat:"",lon:""}}),closeButton:!1,children:(0,r.jsx)("div",{className:"  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 _ai-center ",children:(0,r.jsx)(x.G,{initialData:(0,u.E)("loaded",c.modelItem.read()),name:c.modelItem.getId(),spinnerSize:15,loadingText:(0,r.jsxs)("div",{className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ai-center _jc-center ",children:["Loading data...",(0,r.jsx)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-bold _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto font_body "})]}),objectId:c.modelItem.getId(),sourceUrl:n.sourceUrl+"/"+c.modelItem.getId(),mode:"preview",model:n.model,extraFields:n.extraFields,icons:n.icons,customFields:n.customFields,columnWidth:270,onDelete:n.onDelete,deleteable:n.deleteable,extraMenuActions:n.extraMenuActions})})})]}):(0,r.jsx)(a.FA,{flex:1,alignItems:"center",justifyContent:"center",space:"$4",mt:"$-10",children:(0,r.jsxs)(I.Z,{children:[(0,r.jsx)(y.u,{size:"$7"}),(0,r.jsxs)("h2",{className:"  is_H2 _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-1316330269 _mr-0px _mb-0px _ml-0px _tt-230633015 _ff-299667014 _fow-233016295 _ls-167744214 _fos-229441375 _lh-222976728 _ussel-auto font_heading ",children:[(0,r.jsx)("span",{className:"  _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px ",children:"Missing "}),(0,r.jsx)(P.I,{children:(0,r.jsx)("span",{className:"  _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _col-137137640 ",children:"API Key"})})]}),(0,r.jsx)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-1316330269 _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-233016233 _ls-167744152 _fos-229441313 _lh-222976666 _ussel-auto _ta-center font_body ",children:"Map rendering is unavailable without a Mapbox access token."}),(0,r.jsx)(P.I,{children:(0,r.jsxs)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-233016233 _ls-167744152 _fos-229441313 _lh-222976666 _ussel-auto _ta-center font_body ",children:["Please visit ",(0,r.jsx)("a",{style:{fontWeight:"bold",color:"var(--color10)"},href:"https://www.mapbox.com",target:"_blank",rel:"noopener noreferrer",children:"Mapbox"})," to create your token and enable map features."]})})]})})})};s(51185);var O=s(96666),$=s(10347),A=s(51813),E=s(65126),F=s(91681),D=s(53726),T=s(68604),Z=s(81815),L=s(99062),z=s(57909),M=s(57441),R=s(40641),U=s(62624),q=s(42738),W=s(30195),B=s(53763),V=s(9393),G=s(57643),J=s(82695),H=s(94038),X=s(26879),K=s(50897),Q=s(1963),Y=s(61773),ee=s(96455);let et=e=>{var t,s,a;let{sourceUrl:i,onDelete:o=()=>{},deleteable:n=()=>{},extraMenuActions:d=[],enableAddToInitialData:c}=e,{items:_,model:p,selected:m,setSelected:x,state:u,push:h,replace:f,mergePush:b,tableColumns:v,rowIcon:g,onSelectItem:w}=(0,l.useContext)(e_),j=[{when:e=>m.some(t=>t.id===p.load(e).getId()),style:{backgroundColor:"var(--color4)"},"&:hover":{backgroundColor:"var(--color4)"}}],y=p.load({}),N=y.getObjectSchema().isDisplay("table"),S=["ZodString","ZodNumber","ZodBoolean"],I=null!=v?v:K.Z.columns(...Object.keys(N.shape).filter(e=>{var t;return S.includes(null===(t=N.shape[e]._def)||void 0===t?void 0:t.typeName)}).map(e=>{var t;return K.Z.column(null!==(a=null===(t=N.shape[e]._def)||void 0===t?void 0:t.label)&&void 0!==a?a:e,e,!0)}));return(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _pt-1481558276 _fw-wrap ",children:(0,r.jsx)(P.I,{children:(0,r.jsx)(K.Z.component,{pagination:!1,conditionalRowStyles:j,rowsPerPage:u.itemsPerPage?u.itemsPerPage:25,handleSort:(e,t)=>b({orderBy:e.selector,orderDirection:t}),handlePerRowsChange:e=>h("itemsPerPage",e),handlePageChange:e=>h("page",parseInt(e,10)-1),currentPage:(isNaN(parseInt(u.page,10))?0:parseInt(u.page,10))+1,totalRows:null==_?void 0:null===(t=_.data)||void 0===t?void 0:t.total,columns:[K.Z.column((0,r.jsx)(H.Q2,{reset:!0,children:(0,r.jsxs)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 ",children:[(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mt-1481558214 _ml-1481558152 _o-0d0t846 ",children:(0,r.jsx)(X.XZ,{focusStyle:{outlineWidth:0},checked:m.length>1,onPress:e=>{if(m.length)x([]);else{var t,s;console.log("selection all: ",null==_?void 0:null===(t=_.data)||void 0===t?void 0:t.items),x(null==_?void 0:null===(s=_.data)||void 0===s?void 0:s.items)}},children:(0,r.jsx)(X.XZ.Indicator,{children:(0,r.jsx)(Q.G,{})})})}),m.length>1&&(0,r.jsx)(ee.o,{enableAddToInitialData:c,type:"bulk",mt:"1px",ml:"-5px",element:m,sourceUrl:i,deleteable:n,onDelete:o,extraMenuActions:d})]})}),"",!1,e=>(0,r.jsx)(H.Q2,{reset:!0,children:(0,r.jsxs)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ml-1481558152 _o-0d0t846 ",children:[(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mt-1481558214 ",children:(0,r.jsx)(X.XZ,{focusStyle:{outlineWidth:0},onPress:()=>{let t=e=>p.load(e).getId(),s=t(e),r=m.some(e=>t(e)===s);r?x(m.filter(e=>t(e)!==s)):x([...m,e])},checked:m.some(t=>p.load(t).getId()===p.load(e).getId()),children:(0,r.jsx)(X.XZ.Indicator,{children:(0,r.jsx)(Y.J,{})})})}),(0,r.jsx)(ee.o,{enableAddToInitialData:c,type:"item",ml:"-5px",mt:"1px",element:p.load(e),sourceUrl:i+"/"+p.load(e).getId(),deleteable:n,onDelete:o,extraMenuActions:d}),g&&(0,r.jsx)(P.I,{children:(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _o-0d0t846 _ml-1481558214 _t-6px ",children:l.createElement(g,{size:"$1",color:"$color7"})})})]})}),!0,g?"115px":"75px"),...I],rows:null==_?void 0:null===(s=_.data)||void 0===s?void 0:s.items,onRowPress:e=>w?w(p.load(e)):f("item",p.load(e).getId())})})})};s(1435);var es=s(61667),er=s(48859),ea=s(95753),ei=s(46835),eo=s(71932),en=s(5632);let el="  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ml-1316330238 _ai-center ",ed="  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ai-center _ml-1481558152 ",ec="  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-233016140 _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto font_body ",e_=(0,l.createContext)({items:(0,u.E)("pending"),model:null,selected:[],setSelected:e=>null,onSelectItem:void 0,state:{},push:()=>null,mergePush:()=>null,removePush:()=>null,replace:()=>null,tableColumns:[],rowIcon:null,sourceUrl:""});function ep(e){let{onSelectItem:t,itemData:s,rowIcon:d,disableViewSelector:c=!1,initialItems:p,sourceUrl:m,numColumnsForm:h=1,name:f,pluralName:b,entityName:g,hideAdd:w=!1,enableAddToInitialData:y=!1,pageState:N,icons:S={},model:k,extraFields:H={},columns:X,onEdit:K=e=>e,onDelete:Q=e=>e,onAdd:Y=e=>e,views:ep,extraViews:em=[],openMode:ex="edit",disableToggleMode:eu,customFields:eh={},dataTableRawProps:ef={},dataTableListProps:eb={},dataTableGridProps:ev={},dataMapProps:eg={},extraFieldsForms:ew={},extraFieldsFormsEdit:ej={},extraFieldsFormsAdd:ey={},customFieldsForms:eN={},defaultView:eS="list",disableViews:eP=[],toolBarContent:eI=null,onAddButton:ek,extraMenuActions:eC=[],deleteable:eO=()=>!0,objectProps:e$={},refreshOnHotReload:eA=!1}=e,eE=null!==(e6=null!=g?g:b)&&void 0!==e6?e6:f+"s",{query:eF}=(0,en.useRouter)(),[eD,eT]=(0,l.useState)(null!=N?N:eF),eZ=async e=>{let t=await n.bl.get({url:m,...eD});e(t)},[eL,ez]=_(p,eZ,"notifications/"+k.load({}).getModelName()+"/#",k),[eM,eR]=(0,l.useState)(null!=p?p:(0,u.E)("pending")),[eU,eq]=(0,l.useState)(!1),{push:eW,mergePush:eB,removePush:eV,replace:eG}=(0,J.N)(eD),[eJ,eH]=(0,l.useState)([]),[eX,eK]=(0,l.useState)(s),{search:eQ,setSearch:eY,setSearchName:e0}=(0,l.useContext)(ei.c),e1=eC&&eC.some(e=>e.menus&&e.menus.includes("global"));(0,J.v)(eT),(0,l.useEffect)(()=>{},[]),(0,l.useEffect)(()=>{eL&&eL.isLoaded&&eR(eL)},[eL]),(0,G.rf)(()=>{eQ?eW("search",eQ,!1):eV("search")},[eQ]),(0,l.useEffect)(()=>{e0(eE)}),(0,G.rf)(()=>{eZ(ez)},[eD.orderBy+"_"+eD.itemsPerPage+"_"+eD.page+"_"+eD.search+"_"+eD.orderDirection]);let e2=(0,B.Py)();var e4,e5,e3,e6,e9,e7,e8,te=[{name:"list",icon:L.a,component:et,props:{sourceUrl:m,deleteable:eO,onDelete:async e=>{if(Array.isArray(eJ)&&eJ.length&&m){let e=eJ.map(e=>n.bl.get("".concat(m,"/").concat(k.load(e).getId(),"/delete")));await Promise.all(e),eH([])}else m&&await n.bl.get("".concat(e,"/delete"));Q({sourceUrl:e,selected:eJ})},enableAddToInitialData:y,extraMenuActions:eC,...eb}},{name:"grid",icon:Z.J,component:v,props:{mt:"$8",model:k,items:null==eL?void 0:null===(e4=eL.data)||void 0===e4?void 0:e4.items,sourceUrl:m,customFields:eh,extraFields:H,icons:S,ml:"$5",deleteable:eO,onDelete:async e=>{await n.bl.get(e+"/delete"),Q({sourceUrl:e,selected:eJ})},onSelectItem:t||(e=>eG("item",e.getId())),extraMenuActions:eC,...ev}},{name:"raw",icon:z.S,component:j,props:{mt:"$8",onDelete:async e=>{await n.bl.get("".concat(m,"/").concat(e,"/delete")),Q({sourceUrl:m,selected:eJ,key:e})},...ef}}];let tt={name:"map",icon:q.$,component:C,props:{mt:"$3",onDelete:async e=>{await n.bl.get("".concat(m,"/").concat(e,"/delete"))},...eg}},ts=k.load({}).getObjectSchema().is("location");ts.getFields().length&&(te=[...te,tt]);let tr=(null!=ep?ep:[...te,...em]).filter(e=>!eP.includes(e.name)),ta=-1!=tr.findIndex(e=>e.name==eD.view)?tr.findIndex(e=>e.name==eD.view):tr.findIndex(e=>e.name==eS),ti=e=>{let t=e.split("/");return t.pop()},to=eM&&eM.isLoaded?Math.ceil((null===(e5=eM.data)||void 0===e5?void 0:e5.total)/(null===(e3=eM.data)||void 0===e3?void 0:e3.itemsPerPage)):0;return eL&&eL.isError?(0,r.jsxs)(I.Z,{children:["Error: ",eL.error&&eL.error.error?eL.error.error:eL.error]}):(0,r.jsx)(O.Z,{atom:eM,children:(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _h-10037 _fg-1 ",children:(0,r.jsx)(e_.Provider,{value:{items:eM,sourceUrl:m,model:k,selected:eJ,setSelected:eH,onSelectItem:t,state:eD,push:eW,mergePush:eB,removePush:eV,replace:eG,tableColumns:X,rowIcon:d},children:(0,r.jsxs)($.Z,{initialState:-1==ta?0:ta,children:[(0,r.jsx)(A.a,{integratedChat:!0,p:"$0",hideAccept:!0,setOpen:e=>{eV("editFile")},open:eD.editFile,children:(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _pt-1316330145 _h-90vh _w-90vw ",children:(0,r.jsx)(er.l,{id:"file-widget-"+ti(null!==(e9=eD.editFile)&&void 0!==e9?e9:"").split(".")[0],isFull:!1,hideCloseIcon:!1,isModified:!1,setIsModified:()=>{},icons:[(0,r.jsx)(ea.q,{onPress:()=>{eV("editFile")},children:(0,r.jsx)(M.X,{color:"var(--color)",size:"$1"})})],currentFileName:ti(null!==(e7=eD.editFile)&&void 0!==e7?e7:""),currentFile:eD.editFile})})}),(0,r.jsx)(A.a,{integratedChat:!0,p:"$2",pt:"$5",pl:"$5",setOpen:eq,open:eU,hideAccept:!0,description:"",children:(0,r.jsx)(a.FA,{f:1,jc:"center",ai:"center",id:"admin-dataview-create-dlg",children:(0,r.jsx)(i.p,{maxHeight:"90vh",children:(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mr-1316330238 ",children:(0,r.jsx)(x.G,{id:"admin-eo",name:f,numColumns:h,mode:"add",onSave:async(e,t)=>{try{let e=k.load(t),s=eL.data.items.find(t=>t.id===e.getId());if(s)throw{error:"This id already exists"};let r=await n.bl.post(m,Y(e.create().getData()));if(r.isError)throw r.error;eq(!1),e2.show(f+" created",{message:e.getId()})}catch(e){throw console.log("original error: ",e,e.flatten()),(0,u.E)("error",null,e instanceof W.z.ZodError?e.flatten():e)}},model:k,extraFields:{...H,...ew,...ey},icons:S,customFields:{...eh,...eN},...e$})})})})}),(0,r.jsx)(A.a,{integratedChat:!0,p:"$1",pt:"$5",pl:"$5",hideAccept:!0,acceptCaption:"Save",setOpen:e=>{eK(void 0),eV("item")},open:eD.item,description:"",children:(0,r.jsx)("div",{className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 _jc-center _ai-center ",children:(0,r.jsx)(i.p,{maxHeight:"90vh",children:(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mr-1316330238 ",children:(0,r.jsx)(x.G,{disableToggleMode:eu,initialData:eX,name:f,spinnerSize:75,loadingText:(0,r.jsxs)("div",{className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ai-center _jc-center ",children:["Loading data for ",f,(0,r.jsx)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-bold _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto font_body ",children:eD.item})]}),objectId:eD.item,sourceUrl:m+"/"+eD.item,numColumns:h,mode:ex,onSave:async(e,t)=>{try{eK(void 0);let s=k.load(t).getId(),r=await n.bl.post(m+"/"+s,K(k.load(e).update(k.load(t)).getData()));if(r.isError)throw r.error;let{item:a,...i}=eD;eT(i),e2.show(f+" updated",{message:"Saved new settings for: "+s})}catch(e){throw(0,u.E)("error",null,e instanceof W.z.ZodError?e.flatten():e)}},model:k,extraFields:{...H,...ew,...ej},icons:S,customFields:{...eh,...eN},...e$})})})})}),(0,r.jsxs)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _pt-1481558152 _pr-1316330300 _pl-1316330300 _mb-1481558276 ",children:[(0,r.jsxs)("div",{className:"  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _l--12px _fg-1 _ai-center ",children:[(0,r.jsx)("p",{className:ec,children:(0,r.jsx)("span",{className:"  _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _fos-229441251 _col-137137671 ",children:b?b.charAt(0).toUpperCase()+b.slice(1):f.charAt(0).toUpperCase()+f.slice(1)+"s"})}),e1?(0,r.jsx)(P.I,{children:(0,r.jsx)(ee.o,{type:"global",sourceUrl:"",hideDeleteButton:!0,element:"",extraMenuActions:eC})}):(0,r.jsx)(r.Fragment,{}),eI]}),(0,r.jsxs)("div",{className:"  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ai-center ",children:[(0,r.jsx)("div",{className:ed,children:eM.isLoaded&&(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ml-1481558214 ",children:(0,r.jsxs)("div",{className:el,children:[(0,r.jsx)("div",{className:el,children:(0,r.jsxs)("span",{className:"  _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _fos-14px _col-137137640 ",children:[eM.data.itemsPerPage*eM.data.page+1,"-",Math.min(eM.data.total,eM.data.itemsPerPage*(eM.data.page+1))," of ",eM.data.total]})}),(0,r.jsxs)(P.I,{children:[(0,r.jsx)(eo.z,{Icon:R.s,onPress:e=>{e.stopPropagation(),eM.data.page>0&&eW("page",eM.data.page-1)},ml:"$3",disabled:!(eM.data.page>0)}),(0,r.jsx)("span",{className:"  is_Spacer _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-1481558152 _miw-1481558152 _fs-0 _pe-none _w-1481558152 _h-1481558152 "}),(0,r.jsx)(eo.z,{Icon:U._,onPress:e=>{e.stopPropagation(),eM.data.page<to-1&&eW("page",eM.data.page+1)},ml:"$3",disabled:!(eM.data.page<to-1)})]})]})})}),(0,r.jsxs)("div",{className:ed,children:[!c&&(0,r.jsx)(E.Z,{marginRight:"$3",children:tr.map((e,t)=>(0,r.jsx)(F.Z,{onSetActive:()=>eW("view",e.name),activeId:t,children:l.createElement(e.icon,{size:"$1",strokeWidth:1})},t))}),!w&&(0,r.jsx)(P.I,{children:(0,r.jsx)(o.zx,{id:"admin-dataview-add-btn",hoverStyle:{o:1},o:.7,circular:!0,onPress:()=>{ek?ek():eq(!0)},chromeless:!0,children:(0,r.jsx)(T.v,{color:"$color10"})})})]})]})]}),eL&&eL.isError&&(0,r.jsx)(D.q,{children:(0,r.jsx)("p",{className:ec,children:(0,V.e)(eL.error)})}),(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 ",children:(0,r.jsx)(O.Z,{atom:eM,children:tr.map((e,t)=>(0,r.jsx)(es.Z,{height:"100%",activeId:t,children:l.createElement(e.component,{...e.props})},t))})})]})})})})}s(42937)},24066:function(e,t,s){"use strict";s.d(t,{G:function(){return eo}});var r=s(52322),a=s(80939),i=s(66306),o=s(8939),n=s(84291),l=s(45734),d=s(59928),c=s(36907),_=s(93559),p=s(60545),m=s(89560),x=s(32627),u=s(60166),h=s(57441),f=s(7324),b=s(99062),v=s(57909),g=s(91838),w=s(51813),j=s(48715),y=s(4273);function N(e){let{showLabel:t=!0,containerProps:s,defaultValue:a,children:i,...n}=e;return(0,r.jsxs)(o.sL,{f:1,...s,children:[(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 ",children:(0,r.jsxs)(y.iR,{f:1,defaultValue:[50],min:0,max:100,step:1,...n,children:[(0,r.jsx)(y.iR.Track,{f:1,children:(0,r.jsx)(y.iR.TrackActive,{})}),(0,r.jsx)(y.iR.Thumb,{index:0,size:"$1",circular:!0,elevate:!0}),i]})}),t&&(0,r.jsx)("div",{className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _fs-0 _ai-flex-end _miw-40px _t--8px ",children:n.value})]})}s(5006);var S=s(6289),P=s(26887),I=s(48115),k=s(99553),C=s(10836),O=s(96666),$=s(53726),A=s(2784),E=s(9393),F=s(55858),D=s(75370),T=s(57643),Z=s(94484),L=s(96455);function z(e){let{choices:t,defaultSelections:s=[],onSetSelections:a,maxHeight:i="150px"}=e,n=(0,A.useRef)(null),[l,d]=(0,A.useState)(!1),[c,_]=(0,A.useState)(s),p=(e,s)=>{let r=t[t.indexOf(s)];if(c.includes(r)){let e=c.filter(e=>e!==r);a(e),_(e)}else{let e=c.concat(r);a(e),_(e)}};return(0,r.jsx)(g.I,{children:(0,r.jsxs)("div",{ref:n,onClick:()=>d(e=>!e),className:"  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0  _bg-115898854 _w-10037 _h-797770429 _jc-441309761 _ai-center _pr-10px _pl-10px _pt-7px _pb-7px _btlr-6px _btrr-6px _bbrr-6px _bblr-6px _outlineColor-791969495 _outlineWidth-1px _outlineStyle-solid _btc-791969495 _brc-791969495 _bbc-791969495 _blc-791969495 _cur-pointer ",children:[(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fw-wrap _h-797770429 _ox-hidden _oy-hidden _fg-1 _gap-1481558245 ",children:c.length>0?c.map((e,t)=>(0,r.jsx)("p",{onClick:t=>p(t,e),className:"  is_Paragraph _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-233016140 _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto font_body  _pr-7px _pl-7px _pt-4px _pb-4px _bg-549765356 _btlr-4px _btrr-4px _bbrr-4px _bblr-4px _col-white ",children:e},t)):(0,r.jsx)("p",{className:"  is_Paragraph _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _col-791969557 _ff-299667014 _fow-233016140 _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto _pr-7px _pl-7px _pt-4px _pb-4px _btlr-4px _btrr-4px _bbrr-4px _bblr-4px font_body ",children:"Select"})}),(0,r.jsx)(u._,{}),l?(0,r.jsx)(o.FA,{zIndex:999,position:"absolute",top:"130%",left:"0%",width:"100%",backgroundColor:"$gray1",paddingHorizontal:"7px",paddingVertical:"7px",borderRadius:4,outlineColor:"$gray6",outlineWidth:1,outlineStyle:"solid",borderColor:"$borderColor",maxHeight:i,gap:"$1.5",overflow:"scroll",children:t.map((e,t)=>c.includes(e)?(0,r.jsx)("p",{onClick:t=>p(t,e),className:"  is_Paragraph _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ussel-auto   _cur-0hover-pointer _pr-10px _pl-10px _pt-7px _pb-7px _btlr-4px _btrr-4px _bbrr-4px _bblr-4px _fos-229441220 _col-675002279 _ff-299667014 _fow-233016140 _ls-167744059 _lh-222976573 _bg-549765356 font_body ",children:e},t):(0,r.jsx)("p",{onClick:t=>p(t,e),className:"  is_Paragraph _bg-0hover-744986709 _cur-0hover-pointer _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _col-675002279 _ff-299667014 _fow-233016140 _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto _pr-10px _pl-10px _pt-7px _pb-7px _btlr-4px _btrr-4px _bbrr-4px _bblr-4px font_body ",children:e}))}):null]})})}s(94611);var M=s(70396);let R="  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 ",U="  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 _mt-1316330145 ",q=" _mt-1481558400",W=" _mt-1481558214",B=" _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0  _ml-1481558276  ",V="  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 ",G=e=>e&&e[0].toUpperCase()+e.slice(1),J={color:"var(--color9)",size:"$1",strokeWidth:1},H=e=>{var t;let{ele:s,i,icon:o,children:n,inArray:l=!1}=e;return(0,r.jsxs)("fieldset",{className:(0,M.concatClassName)("  is_Fieldset _ai-stretch _dsp-flex _fd-column _bxs-border-box _pos-relative _mih-0px _miw-0px  _gap-1481558214 _fg-1 _fs-1 _fb-auto  "+(i?" _ml-1316330238":" _ml-1481558400")),children:[!l&&(0,r.jsxs)(a.__,{fontWeight:"bold",children:[(0,r.jsx)(g.I,{children:(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mr-1481558214 ",children:A.createElement(o,J)})}),null!==(t=s._def.label)&&void 0!==t?t:s.name]}),l&&(0,r.jsx)("span",{className:"  is_Spacer _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-1481558276 _miw-1481558276 _fs-0 _pe-none _w-1481558276 _h-1481558276 "}),n]},i)},X={ZodString:"",ZodNumber:"0",ZodBoolean:!0,default:""},K=e=>X.hasOwnProperty(e)?X[e]:"ZodArray"==e?[]:"ZodObject"==e?{}:X.default,Q=e=>{var t;let{ele:s,elementDef:a,icon:o,path:n,arrData:l,getElement:d,setFormData:c,data:_,setData:p,mode:x,customFields:u}=e;return(0,r.jsxs)(es,{ele:s,title:" ("+l.length+")",icon:v.S,path:n,children:[(0,r.jsx)("div",{className:V,children:l.map((e,t)=>(0,r.jsxs)("div",{className:(0,M.concatClassName)(""+(B+(t?W:q))),children:["ZodObject"!=a.type._def.typeName&&(0,r.jsx)(g.I,{children:(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _mr-1481558214 _t-20px ",children:"edit"==x||"add"==x?(0,r.jsx)(m.z,{...J}):(0,r.jsx)(f.$,{...J})})}),d({ele:{...a.type._def,_def:a.type._def,name:t},icon:o,i:0,x:0,data:_,setData:p,mode:x,customFields:u,path:[...n,s.name],inArray:!0,arrayName:s.name}),("edit"==x||"add"==x)&&(0,r.jsx)("div",{onClick:()=>{l.splice(t,1),c(s.name,[...l])},className:(0,M.concatClassName)(" _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ml-1481558214 _t-13px _btlr-1307610029 _btrr-1307610029 _bbrr-1307610029 _bblr-1307610029 _pt-1481558214 _pr-1481558214 _pb-1481558214 _pl-1481558214 _als-flex-start _cur-pointer  _bg-0hover-312414245 _o-0active-0d0t746  "+("ZodObject"!=a.type._def.typeName?" ":"  _pos-absolute _r-1316330269 _t-6px")),children:(0,r.jsx)(h.X,{color:"var(--red7)",strokeWidth:2,size:20})})]},t))}),("edit"==x||"add"==x)&&(0,r.jsxs)(i.zx,{mt:"$4",onPress:()=>{let e="ZodLazy"==s._def.typeName?s._def.getter()._def:s._def;"ZodOptional"==e.typeName?e.innerType._def.type._def.typeName:e.type._def.typeName,c(s.name,[...l,K(a.type._def.typeName)])},children:["Add",null!==(t=s._def.label)&&void 0!==t?t:s.name]})]})},Y=e=>{let{ele:t,elementDef:s,icon:a,path:i,data:o,setData:n,mode:l,customFields:d,inArray:c,arrayName:_,getFormData:p}=e;return(0,r.jsx)(es,{simple:!0,ele:t,title:c?t._def.keyName?p(t._def.keyName,[...i,t.name]):_+" #"+(t.name+1):t.name,icon:b.a,path:i,children:(0,r.jsx)("div",{className:V,children:Object.keys(s.shape()).map((e,c)=>{let _=s.shape();return(0,r.jsx)("div",{className:(0,M.concatClassName)(" _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0  "+(c?" _mt-1316330238":q)),children:er({ele:{..._[e],name:e},icon:a,i:0,x:0,data:o,setData:n,mode:l,customFields:d,path:[...i,t.name]})},c)})})})},ee=e=>{let{ele:t,icon:s,i:a,inArray:i,eleArray:o,formData:n,generatedOptions:l,setFormData:d}=e,c=["ZodNumber","ZodString","ZodLiteral"],_=o.map(e=>c.includes(e.typeName)?String(e.value):JSON.stringify(e.value));return(0,r.jsx)(H,{ele:t,icon:s,i:a,inArray:i,children:(0,r.jsx)(z,{choices:l.length?l:_,defaultSelections:n,onSetSelections:e=>d(t.name,e)})})},et=e=>{let{ele:t,inArray:s,recordData:a,elementDef:l,icon:d,data:c,setData:_,mode:p,customFields:m,path:x,setFormData:u}=e,[h,f]=(0,A.useState)(!1),[v,g]=(0,A.useState)(""),j=(0,A.useRef)(null),[y,N]=(0,A.useContext)(ei);(0,A.useEffect)(()=>{if(h){let e=setTimeout(()=>{var e;null===(e=j.current)||void 0===e||e.focus()},100);return()=>clearTimeout(e)}},[h]);let S=async()=>{let e=K(t._def.valueType._def.typeName),s=[...x,t.name,v].join("/");f(!1),g(""),N(function(e,t){let s=t.substring(0,t.lastIndexOf("/")+1),r=e.filter(e=>!e.startsWith(s)||e===s);return r.push(t),r}(y,s)),u(t.name,{...a,[v]:e})};return(0,r.jsxs)(es,{ele:t,title:s?" #"+(t.name+1):"...",icon:b.a,path:x,children:[(0,r.jsx)("div",{className:V,children:a?Object.keys(a).map((e,s)=>(0,r.jsx)("div",{className:(0,M.concatClassName)(""+(B+(s?W:q))),children:er({ele:{...l.valueType,name:e},icon:d,i:0,x:0,data:c,setData:_,mode:p,customFields:m,path:[...x,t.name]})},s)):null}),(0,r.jsx)(w.a,{acceptCaption:"Add field",setOpen:f,open:h,onAccept:S,title:"Add new field",description:"",children:(0,r.jsx)(o.FA,{f:1,id:"eo-add-field-input",alignItems:"center",mt:"$6",justifyContent:"center",children:(0,r.jsx)(n.II,{f:1,value:v,onChangeText:e=>g(e),textAlign:"center",id:"name",placeholder:"Field name...",ref:j,onKeyPress:e=>{"Enter"===e.key&&S()}})})}),("edit"==p||"add"==p)&&(0,r.jsx)(i.zx,{id:"eo-obj-comp-btn",mt:"$5",onPress:()=>{f(!0)},children:" Add field"})]})},es=e=>{let{ele:t,title:s,children:a,icon:i,simple:n=!1,path:c}=e,[_,p]=(0,A.useContext)(ei),m=[...c,t.name].join("/"),x=(0,r.jsx)(o.sL,{mb:"$2",id:"eo-formgroup",br:"$5",f:1,elevation:_.includes(m)?10:0,hoverStyle:{elevation:10},children:(0,r.jsx)(l.U,{value:_,onValueChange:e=>p(e),onPress:e=>e.stopPropagation(),type:"multiple",boc:"$gray6",f:1,children:(0,r.jsxs)(l.U.Item,{br:"$5",bw:1,boc:"$gray6",value:m,children:[(0,r.jsx)(l.U.Trigger,{p:0,px:8,height:43,bc:"$transparent",focusStyle:{bc:"$transparent"},br:_.includes(m)?"$0":"$5",btlr:"$5",btrr:"$5",bw:"$0",flexDirection:"row",ai:"center",children:e=>{let{open:t}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.I,{children:n?A.createElement(i,J):(0,r.jsx)(r.Fragment,{})}),(0,r.jsx)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-1481558214 _ff-299667014 _fow-233016140 _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto font_body ",children:s}),(0,r.jsx)("span",{className:"  is_Spacer _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-1316330176 _miw-1316330176 _fs-1 _w-1316330176 _h-1316330176 _pe-none _fg-1 "}),(0,r.jsx)(d.b,{animation:"quick",rotate:t?"180deg":"0deg",children:(0,r.jsx)(u._,{size:"$1"})})]})}}),(0,r.jsx)(l.U.Content,{br:"$5",children:a})]})})});return n?x:(0,r.jsx)(H,{ele:t,icon:i,i:0,children:x})},er=e=>{var t,s,a,i,o,l;let{ele:d,icon:_,i:p,x:m,data:x,setData:u,mode:h,customFields:f={},path:b=[],inArray:v=!1,arrayName:w=""}=e,y=null!==(a=null===(s=d._def)||void 0===s?void 0:null===(t=s.innerType)||void 0===t?void 0:t._def)&&void 0!==a?a:d._def,S=(e,t)=>{let s=x;b.forEach(e=>{Array.isArray(s)||s.hasOwnProperty(e)||(s[e]={}),s=s[e]}),s[e]=t,u({data:x})},P=(e,t)=>{let s=null!=x?x:{};for(let e of null!=t?t:b)("object"==typeof s&&s.hasOwnProperty(e)||Array.isArray(s)&&s.length>e)&&(s=s[e]);return"string"==typeof s?s:s&&s.hasOwnProperty(e)?s[e]:""},I=y.typeName;if("ZodLazy"==I){let e=y.getter();y=e._def,I=e.constructor.name,e.name=d.name,d=e}if(f.hasOwnProperty(d.name)||f.hasOwnProperty("*")){let e=f.hasOwnProperty(d.name)?f[d.name]:f["*"],t="function"==typeof e.component?e.component(b,P(d.name),e=>S(d.name,e),h,x):e.component;if(t)return e.hideLabel?t:(0,r.jsx)(H,{ele:d,icon:_,i:p,inArray:v,children:t})}if("ZodUnion"==I&&"preview"!=h){let e=y.displayOptions?y.displayOptions:y.options.map(e=>e._def.value),t=y.options.map(e=>e._def.value);d._def.dependsOn&&x&&x[d._def.dependsOn]&&"function"==typeof d._def.generateOptions&&(t=[...e=d._def.generateOptions(x)]);let s=d._def.dependsOn,a=d._def.dependsOnValue;return(0,r.jsx)(H,{ele:d,icon:_,i:p,inArray:v,children:s?x[s]?a?a==x[s]?(0,r.jsx)(j.E,{f:1,data:x,title:d.name,elements:e,value:e[t.indexOf(P(d.name))],setValue:s=>S(d.name,t[e.indexOf(s)])}):(0,r.jsx)(n.II,{focusStyle:{outlineWidth:1},disabled:!0,placeholder:d._def.hint?d._def.hint:"Fill "+s+" property first",bc:"$backgroundTransparent"}):(0,r.jsx)(j.E,{f:1,data:x,title:d.name,elements:e,value:e[t.indexOf(P(d.name))],setValue:s=>S(d.name,t[e.indexOf(s)])}):(0,r.jsx)(n.II,{focusStyle:{outlineWidth:1},disabled:!0,placeholder:d._def.hint?d._def.hint:"Fill "+s+" property first",bc:"$backgroundTransparent"}):(0,r.jsx)(j.E,{f:1,data:x,title:d.name,elements:e,value:e[t.indexOf(P(d.name))],setValue:s=>S(d.name,t[e.indexOf(s)])})})}if("ZodNumber"==I&&"preview"!=h){if(y.checks){let e=y.checks.find(e=>"min"==e.kind),t=y.checks.find(e=>"max"==e.kind);if(e&&t)return(0,r.jsx)(H,{ele:d,icon:_,i:p,inArray:v,children:(0,r.jsx)(g.I,{children:(0,r.jsx)("div",{className:U,children:(0,r.jsx)(N,{onValueChange:e=>S(d.name,e),value:[null!==(i=P(d.name))&&void 0!==i?i:e.value],width:190,min:e.value,max:t.value})})})})}}else if("ZodObject"==I)return(0,r.jsx)(Y,{ele:d,elementDef:y,icon:_,path:b,data:x,setData:u,mode:h,customFields:f,inArray:v,arrayName:w,getFormData:P});else if("ZodArray"==I){let e=P(d.name)?P(d.name):[],t=[];"function"==typeof d._def.generateOptions&&(t=d._def.generateOptions(x));let s=!d._def.innerType&&"ZodUnion"===d._def.type._def.typeName;return s?(0,r.jsx)(ee,{ele:d,icon:_,i:p,inArray:v,eleArray:d._def.type._def.options,formData:e,generatedOptions:t,setFormData:S}):(0,r.jsx)(Q,{data:x,setData:u,mode:h,ele:d,elementDef:y,icon:_,customFields:f,path:b,arrData:e||t,getElement:er,setFormData:S})}else if("ZodRecord"==I){let e=P(d.name);return(0,r.jsx)(et,{ele:d,inArray:v,recordData:e,elementDef:y,icon:_,data:x,setData:u,mode:h,customFields:f,path:b,setFormData:S})}else if("ZodBoolean"==I){let e=P(d.name);return(0,r.jsx)(H,{ele:d,icon:_,i:p,inArray:v,children:(0,r.jsx)(g.I,{children:(0,r.jsx)("div",{className:U,children:(0,r.jsx)(c.rs,{disabled:"add"!=h&&"edit"!=h,checked:e,onCheckedChange:e=>S(d.name,e),size:"$2",children:(0,r.jsx)(c.rs.Thumb,{animation:"quick"})})})})})}let k="";return"function"!=typeof d._def.generateOptions||(k=d._def.generateOptions(),P(d.name)||S(d.name,k)),(0,r.jsx)(H,{ele:d,icon:_,i:p,inArray:v,children:(0,r.jsx)("div",{className:R,children:(0,r.jsx)(n.II,{id:"editable-object-input-"+(null==d?void 0:d.name),..."edit"!=h&&"add"!=h?{bw:0,forceStyle:"hover"}:{},focusStyle:{outlineWidth:1},disabled:"view"==h||"preview"==h||"edit"==h&&d._def.static||d._def.dependsOn&&!x[d._def.dependsOn],secureTextEntry:d._def.secret,value:k&&!P(d.name)?k:P(d.name),onChangeText:e=>S(d.name,"ZodNumber"==d._def.typeName?e.replace(/[^0-9.-]/g,""):e),placeholder:x?null!==(l=null!==(o=d._def.hint)&&void 0!==o?o:d._def.label)&&void 0!==l?l:"number"==typeof d.name?"...":d.name:"",autoFocus:0==m&&0==p,onBlur:()=>{if("ZodNumber"==d._def.typeName){let e=parseFloat(P(d.name));isNaN(e)||S(d.name,e)}},bc:"$backgroundTransparent"})})})},ea=e=>{let{index:t,data:s,width:a}=e;s.ele._def.size,s.ele._def.numColumns;let i=s.ele._def.size||1;return(0,r.jsx)(o.sL,{f:1,width:a*i+(i-1)*(s.columnMargin/i),children:er({ele:s.ele,icon:s.icon,i:s.i,x:s.x,data:s.data||s.defaultData,setData:s.setData,mode:s.mode,customFields:s.customFields})},s.x)},ei=(0,A.createContext)([[],e=>{}]),eo=e=>{let{externalErrorHandling:t,error:s,setError:a,data:n,setData:l,EditIconNearTitle:d=!1,autoWidth:c=!1,columnMargin:u=30,columnWidth:f=350,extraMenuActions:b,disableToggleMode:v,name:j,initialData:y,loadingTop:N,spinnerSize:z,loadingText:U,title:W,sourceUrl:B=null,onSave:J,mode:H="view",model:X,icons:K={},extraFields:Q={},numColumns:Y=1,objectId:ee,onDelete:et=()=>{},deleteable:es=()=>!0,customFields:er={},...eo}=e,[en,el]=(0,A.useState)(null!=y?y:(0,S.E)("pending")),[ed,ec]=(0,A.useState)(H),[e_,ep]=(0,A.useState)(""),[em,ex]=(0,A.useState)(en),eu=n&&l;n&&l||(n=em,l=ex);let[eh,ef]=(0,A.useState)(!1),[eb,ev]=(0,A.useState)();s&&a||t||(s=eb,a=ev);let[eg,ew]=(0,A.useState)(!1),[ej,ey]=(0,A.useState)(!1),[eN,eS]=(0,A.useState)(!1),eP=(0,A.useRef)(),[eI,ek]=(0,A.useState)([]);(0,P.a)(e=>{"add"!=H&&I.bl.get(B,e)},el,y),(0,A.useEffect)(()=>{en.data&&l(en)},[en]),(0,T.rf)(()=>ec(H),[H]),(0,T.rf)(()=>{eN?ey(!0):eS(!0)},[n]);let eC=(0,A.useMemo)(()=>{let e=X.load(n.data),t=F.U.load(D.V_.object(Q)),s=e.getObjectSchema().isDisplay(ed).merge(t).getLayout(1),r={},a={};return s.forEach((e,t)=>e.forEach((e,s)=>{var i,o;let d=K[e.name]?K[e.name]:"edit"==ed||"add"==ed?m.z:x.V,c=null!==(i=e._def.group)&&void 0!==i?i:0;r.hasOwnProperty(c)||(r[c]=[]),e._def.hasOwnProperty("defaultValue")&&(a[e.name]=e._def.defaultValue),r[c].push({id:t+"_"+s,icon:d,i:s,x:t,ele:e,data:n.data,setData:l,mode:ed,size:null!==(o=e._def.size)&&void 0!==o?o:1,numColumns:Y,customFields:er,columnMargin:u,defaultData:a})})),r},[Q,n,X,u,Y,ed,H,en]),eO=(0,A.useMemo)(()=>Object.keys(eC).map((e,t)=>(0,r.jsxs)(o.sL,{ref:eP,mt:"$0",width:c?"100%":f*Y+u,f:1,children:[(0,r.jsx)("div",{className:R,children:(0,r.jsx)(k.rj,{masonry:!1,containerRef:eP,spacing:u/2,data:eC[e],card:ea,itemMinWidth:f,columns:Y})}),"preview"==ed&&(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _t-1316333121 ",children:(0,r.jsx)(L.o,{type:"item",sourceUrl:B,onDelete:et,deleteable:es,element:X.load(n.data),extraMenuActions:b})})]})),[u,eC,f,Y]),{tint:e$}=(0,Z.d5)();return(0,r.jsx)(ei.Provider,{value:[eI,ek],children:(0,r.jsxs)(_.Stack,{width:"100%",...eo,children:[(0,r.jsx)(w.a,{showCancel:!0,acceptCaption:"Discard",cancelCaption:"Keep editing",onAccept:async()=>{let e=await I.bl.get(B);el(e),ec("view")},cancelTint:e$,acceptTint:"red",open:eg,setOpen:ew,title:"Are you sure you want to leave?",description:"",children:(0,r.jsx)(C.Z,{mt:"$5",children:"All unsaved changes will be lost"})}),(0,r.jsx)(O.Z,{forceLoad:"add"==ed||n.data,waitForLoading:1e3,spinnerSize:z,loadingText:null!=U?U:"Loading "+ee,top:null!=N?N:-30,atom:n,children:(0,r.jsxs)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _w-10037 ",children:[(0,r.jsxs)("div",{className:"  _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ai-center ",children:[(0,r.jsx)(o.sL,{mt:"preview"==ed?"$4":void 0,ml:"preview"==ed?"$4":void 0,id:"eo-dlg-title",children:(0,r.jsxs)("h3",{className:"  is_H3 _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _tt-230632984 _ff-299667014 _fow-233016264 _ls-167744183 _fos-229441344 _lh-222976697 _ussel-auto font_heading ",children:[(0,r.jsx)(g.I,{children:(0,r.jsx)("h3",{className:"  is_H3 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _col-549765294 _tt-230632984 _ff-299667014 _fow-233016264 _ls-167744183 _fos-229441344 _lh-222976697 _ussel-auto font_heading ",children:G(H)})})," ".concat(G(j))]})}),W&&(0,r.jsx)("div",{className:(0,M.concatClassName)(" _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0  _mr-1316330238  "+(d?" _fg-0 _fs-1 _fb-auto":" _fg-1 _fs-1 _fb-auto")),children:(0,r.jsxs)("span",{className:"  _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _fow-bold _fos-40px ",children:[(0,r.jsx)(g.I,{children:(0,r.jsx)("span",{className:"  _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _col-549765294 ",children:G(ed)})}),(0,r.jsxs)("span",{className:"  _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _col-137137671 ",children:[" ",G(j)]})]})}),!v&&("view"==ed||"edit"==ed)&&(0,r.jsx)("div",{onClick:async()=>{"edit"==ed&&ej?ew(!0):(ep(ed),ec("view"==ed?"edit":"view"))},className:"  _o-0active-0d0t846 _ai-stretch _dsp-flex _fd-row _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0  _cur-pointer ",children:(0,r.jsx)(g.I,{children:(0,r.jsx)("div",{className:V,children:"view"==ed?(0,r.jsx)(m.z,{color:"var(--color8)"}):"view"==e_?(0,r.jsx)(h.X,{color:"var(--color8)"}):null})})})]}),(0,r.jsxs)("div",{className:(0,M.concatClassName)(" _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _w-10037 _fg-1  _ai-center _jc-center  "+(W?" _mt-1316330300":q)),children:[s&&(0,r.jsx)($.q,{children:(0,r.jsx)("p",{className:"  is_Paragraph _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-0px _ff-299667014 _fow-233016140 _ls-167744059 _fos-229441220 _lh-222976573 _ussel-auto font_body ",children:(0,E.e)(s.error)})}),eO,"preview"!=ed&&(0,r.jsx)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _mt-1316330145 _pt-1481558214 _pr-1481558214 _pb-1316330238 _pl-1481558214 _w-10037 _fg-1 _als-center ",children:("add"==ed||"edit"==ed)&&!eu&&(0,r.jsx)(g.I,{children:(0,r.jsx)(i.zx,{f:1,onPress:async()=>{ef(!0);try{await J(en.data,n.data),e_!=ed&&ec(e_)}catch(e){a(e),console.log("e: ",e)}ef(!1)},children:eh?(0,r.jsx)(p.$,{}):"add"==ed?"Create":"Save"})})})]})]})})]})})};s(31851)},99553:function(e,t,s){"use strict";s.d(t,{rj:function(){return x}});var r=s(52322),a=s(34612),i=s(8939),o=s(2784),n=s(93559),l=s(23724),d=s(11667),c=s(23510);let _={width:0,height:0},p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],[s,r]=(0,o.useState)(_);return(0,o.useLayoutEffect)(()=>{let{current:t}=e;if(t){let e=()=>{let e=getComputedStyle(t),s=parseFloat,a=t.clientWidth-s(e.paddingTop)-s(e.paddingBottom),i=t.clientHeight-s(e.paddingLeft)-s(e.paddingRight);r({height:i,width:a})};return e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}}},t.concat(e.current)),s},m=e=>{let[t,s]=(0,o.useState)(!1),[r,a]=(0,o.useState)(0);return(0,o.useLayoutEffect)(()=>{let t;let{current:s}=e;if(s){let e=()=>{t||(t=window.requestAnimationFrame(()=>{a(s.scrollTop),t=void 0}))};return s.addEventListener("scroll",e),()=>{s.removeEventListener("scroll",e),t&&window.cancelAnimationFrame(t)}}},[e.current]),(0,o.useLayoutEffect)(()=>{s(!0);let e=window.setTimeout(()=>{s(!1)},1e3/6);return()=>window.clearTimeout(e)},[r]),{scrollTop:r,isScrolling:t}},x=o.forwardRef((e,t)=>{let{overScanBy:s=5,masonry:_=!0,containerRef:x,rightGap:u=0,spacing:h,children:f,data:b,card:v,columns:g,itemMinWidth:w=200,gap:j}=e;if(a.$L&&b&&v){if(_&&x){var y,N;let e={current:(null===(y=x.current)||void 0===y?void 0:y.container)?null==x?void 0:null===(N=x.current)||void 0===N?void 0:N.container.firstChild:x.current},{width:t,height:r}=p(e),{scrollTop:a,isScrolling:i}=m(e),o=(0,l.G)({width:Math.max(0,t-u),columnGutter:h,columnWidth:w}),n=(0,d.y)(o);return(0,c.$)({positioner:o,scrollTop:a,isScrolling:i,height:r,items:b,overscanBy:s,resizeObserver:n,render:v})}return(0,r.jsx)(i.sL,{flexWrap:"wrap",children:b.map((e,t)=>(0,r.jsxs)(n.Stack,{m:h/2,children:[" ",o.createElement(v,{index:e.index,data:{...e},width:w})," "]},t))})}if(a.$L)return(0,r.jsx)("div",{ref:t,style:{gap:j,display:"grid",gridTemplateColumns:"repeat( auto-fill, minmax(".concat(w,"px, 1fr) )")},children:f});let S=o.Children.toArray(f);return(0,r.jsx)(i.sL,{alignItems:"center",justifyContent:"center",flexWrap:"wrap",children:S.map((e,t)=>e?(0,r.jsx)(i.sL,{flex:1,minWidth:w,marginRight:j,marginBottom:j,children:e},t):null)})})},96455:function(e,t,s){"use strict";s.d(t,{o:function(){return x}});var r=s(52322),a=s(8939),i=s(93559),o=s(86838),n=s(51813),l=s(2784),d=s(91838),c=s(10281),_=s(13742),p=s(71932),m=s(13997);let x=e=>{let{type:t,sourceUrl:s="",enableAddToInitialData:x=!1,onDelete:u,element:h,deleteable:f,extraMenuActions:b=[],hideDeleteButton:v,...g}=e,[w,j]=(0,l.useState)(!1),[y,N]=(0,l.useState)(!1),{selected:S,setSelected:P,model:I}=(0,l.useContext)(m.p),k=e=>{let{id:t="",type:s,text:i,Icon:o,onPress:n,disabled:l}=e;return(0,r.jsxs)(a.sL,{id:t,ml:"$1",o:1,br:"$5",p:"$3",als:"flex-start",cursor:l?"default":"pointer",pressStyle:l?{}:{o:.7},hoverStyle:l?{}:{bc:"$color5"},onPress:e=>{l||(n("global"===s?"*":h,e),j(!1))},children:[(0,r.jsx)(o,{size:"$1",color:l?"var(--gray9)":"var(--color9)",strokeWidth:2}),(0,r.jsx)("span",{className:"  _col-675002279 _dsp-inline _bxs-border-box _ww-break-word _mt-0px _mr-0px _mb-0px _ml-1481558152 ",children:i})]})};return(0,r.jsxs)(i.Stack,{...g,children:[(0,r.jsx)(n.a,{acceptCaption:"Delete",setOpen:N,open:y,onAccept:async e=>{await u(s),e(!1)},title:"Delete ",description:"Are you sure want to delete this item?",w:280,children:(0,r.jsx)("div",{className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-1 _fg-1 _jc-center _ai-center "})}),(0,r.jsxs)(o.J2,{onOpenChange:j,open:w,placement:"bottom",children:[(0,r.jsx)(o.J2.Trigger,{children:(0,r.jsx)(p.z,{id:"more-btn-".concat(s.split("/").slice(-1)),Icon:c.h,onPress:e=>{e.stopPropagation(),j(!0)},ml:"$3"})}),(0,r.jsx)(o.J2.Content,{padding:0,space:0,left:"$7",top:"$2",bw:1,boc:"$borderColor",bc:"$color1",children:(0,r.jsx)(d.I,{children:(0,r.jsx)("div",{onClick:e=>e.stopPropagation(),className:"  _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 _ai-center _jc-center _pt-1481558152 _pr-1481558152 _pb-1481558152 _pl-1481558152 ",children:(0,r.jsxs)("div",{className:"  _ai-stretch _dsp-flex _fd-column _fb-auto _bxs-border-box _pos-relative _mih-0px _miw-0px _fs-0 ",children:[b.map((e,a)=>{var i;return(!e.menus&&"item"===t||e.menus&&(null===(i=e.menus)||void 0===i?void 0:i.includes(t)))&&e.isVisible&&e.isVisible(h)&&(0,r.jsx)(k,{id:"more-btn-".concat(s.split("/").slice(-1),"-option-").concat(a+1),type:t,text:"function"==typeof e.text?e.text(t):e.text,Icon:e.icon,onPress:e.action},a)}),!1,v?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(k,{type:t,text:"Delete",id:"more-btn-".concat(s.split("/").slice(-1),"-delete"),Icon:_.V,disabled:!f(h),onPress:(e,t)=>{t.stopPropagation(),N(!0),j(!1)}})]})})})})]})]})};s(66286)},1888:function(e,t,s){"use strict";s.d(t,{F7:function(){return o},eq:function(){return n}});var r=s(44499),a=s(6429),i=s(48115);let o=e=>r.l.SSR?e:void 0;function n(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return o(async o=>{var n,l,d,c,_,p;let m={itemsPerPage:parseInt(o.query.itemsPerPage)?parseInt(o.query.itemsPerPage):"",page:parseInt(o.query.page,10)?parseInt(o.query.page,10):"",search:null!==(n=o.query.search)&&void 0!==n?n:"",orderBy:null!==(l=o.query.orderBy)&&void 0!==l?l:"",orderDirection:null!==(d=o.query.orderDirection)&&void 0!==d?d:"",view:null!==(c=o.query.view)&&void 0!==c?c:"",item:null!==(_=o.query.item)&&void 0!==_?_:"",editFile:null!==(p=o.query.editFile)&&void 0!==p?p:"",..."function"==typeof s?await s(o):s},x="function"==typeof e?e(o):e;return(0,a.NA)(o,t,{sourceUrl:x,initialItems:await i.bl.get({url:(0,a.VM)(x,o),...m}),itemData:o.query.item?await i.bl.get((0,a.VM)(x+"/"+o.query.item,o)):"",extraData:{..."function"==typeof r?await r(o):r},pageState:{...m}})})}},26887:function(e,t,s){"use strict";s.d(t,{a:function(){return a}});var r=s(57643);let a=(e,t,s)=>(0,r.qR)(()=>{s&&"pending"!=s.status?t(s):e(t)})},82695:function(e,t,s){"use strict";s.d(t,{N:function(){return n},v:function(){return o}});var r=s(5632),a=s(57643);let i=(e,t)=>{let{[t]:s,...r}=e;return r},o=e=>{let{query:t}=(0,r.useRouter)();(0,a.rf)(()=>{e(t)},[t])},n=e=>{let{replace:t,push:s,query:a}=(0,r.useRouter)(),o=()=>Object.keys(null!=e?e:{}).reduce((t,s)=>""!==e[s]?{...t,[s]:e[s]}:t,{});return{push:function(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];s({query:{...a,...o(),[e]:t}},void 0,{shallow:r})},mergePush:e=>{s({query:{...a,...o(),...e}},void 0,{shallow:!0})},removePush:e=>{s({query:i(a,e)},void 0,{shallow:!0})},removeReplace:e=>{t({query:i(a,e)},void 0,{shallow:!0})},replace:(e,s)=>{t({query:{...a,...o(),[e]:s}},void 0,{shallow:!0})},mergeReplace:s=>{t({query:{...o(),...e,...s}},void 0,{shallow:!0})}}}},31851:function(){},42937:function(){},1435:function(){},5006:function(){},66286:function(){},18190:function(){},94611:function(){},51185:function(){}}]);