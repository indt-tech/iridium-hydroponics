"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3950],{56359:function(e,t,n){n.d(t,{IS:function(){return u},TY:function(){return nV},Tn:function(){return nz},_5:function(){return tT},fy:function(){return ns},mF:function(){return rp},p$:function(){return tC}});var r,i,o,a,l,c,d,u,s,f,p=n(80631),m=n(41547),g=n(39714),b=n.n(g),h=n(2784),v=n(66222),y=n(41699),C=n(65954),S=n(19081),x=n(41791),F=n(75744),E=n(42484),w=n(83112),I=n(52005),k=n(70963),D=n(39477),M=n(43672),A=n(33130),O=n.n(A),N=n(5994),z=n(72921),T=n(31723),L=n(45345),R=n(24126),_=n.n(R),j=n(75824),P=n.n(j),K=n(32297),H=n.n(K),B=n(41156),W=n(72779),V=n.n(W),G=n(88923),Z=n(1292),U=n(97370),q=n(43264),Y=n(77277),X=n(38280),Q=n(86136),$=n(49378),J=n(91991),ee=n(90436),et=n(50581),en=n(31866),er=n(6738),ei=n(36979),eo=n(54506);function ea(){return(ea=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function el(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ec(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return el(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return el(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var ed=function(e,t){var n=(0,h.useState)(e),r=n[0],i=n[1];return(0,h.useEffect)(function(){var n=setTimeout(function(){i(e)},t);return function(){clearTimeout(n)}},[e,t]),[r,i]},eu={},es=function(e){var t=(0,h.useRef)(eu);return t.current===eu&&(t.current=e()),t.current},ef=function(e){var t=(0,h.useRef)(e);return(0,h.useEffect)(function(){t.current=e},[t,e]),t},ep=function(){function e(){}return e.error=function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).error.apply(e,["[Chonky runtime error]"].concat(n))},e.warn=function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).warn.apply(e,["[Chonky runtime warning]"].concat(n))},e.debug=function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).debug.apply(e,["[Chonky runtime debug]"].concat(n))},e.formatBullets=function(e){return"\n- "+e.join("\n- ")},e}(),em=function(){function e(){}return e.isDirectory=function(e){return!!e&&!0===e.isDir},e.isHidden=function(e){return!!e&&!0===e.isHidden},e.isSymlink=function(e){return!!e&&!0===e.isSymlink},e.isEncrypted=function(e){return!!e&&!0===e.isEncrypted},e.isClickable=function(e){return!!e},e.isOpenable=function(e){return!!e&&!1!==e.openable},e.isSelectable=function(e){return!!e&&!1!==e.selectable},e.isDraggable=function(e){return!!e&&!1!==e.draggable},e.isDroppable=function(e){return!!e&&(!!e.isDir&&!1!==e.droppable||!0===e.droppable)},e.isDndOpenable=function(t){return!!e.isOpenable(t)&&(!!t.isDir&&!1!==t.dndOpenable||!0===t.dndOpenable)},e.getModDate=function(t){return t&&null!==t.modDate&&void 0!==t.modDate?e.parseDate(t.modDate):null},e.parseDate=function(e){if("string"==typeof e||"number"==typeof e)try{return new Date(e)}catch(t){ep.error("Could not convert provided string/number into a date: "+t.message+" ","Invalid value:",e)}return e instanceof Date&&!isNaN(e.getTime())?e:(ep.warn("Unsupported date representation:",e),null)},e.getChildrenCount=function(e){return e&&"number"==typeof e.childrenCount?e.childrenCount:null},e}(),eg=function(e,t){var n=[],r=[];if("folderChain"!==e&&"fileActions"!==e||t){if(Array.isArray(t)){for(var i=0,o=0,a=new Set,l=new Set,c=0;c<t.length;++c){var d=t[c];d?"object"!=typeof d?i++:d.id&&("fileActions"===e||d.name)?a.has(d.id)?l.add(d.id):(a.add(d.id),n.push(d)):o++:"fileActions"===e?i++:n.push(null)}if(i&&r.push("Detected "+i+' file(s) of invalid type. Remember that "files" array should contain either objects or nulls.'),o&&r.push("Detected "+o+' file(s) that are missing the required fields. Remember that file object should define an "id" and a "name".'),l.size>0){var u='"'+Array.from(l).join('", "')+'"';r.push("Detected "+l.size+" file IDs that are used multiple times. Remember that each file should have a unique IDs. The following IDs were seen multiple times: "+u)}}else r.push('Expected "'+e+'" prop to be an array, got "'+typeof t+'" instead.')}if(r.length>0){var s,f,p="\n- "+r.join("\n- ");"folderChain"===e?(s="folder chain",f="files"):"fileActions"===e?(s="file actions",f="file actions"):(s="files",f="files"),ep.error("Errors were detected when sanitizing the "+s+" array. Offending "+f+" were removed from the array. Summary of validation errors: "+p)}return{sanitizedArray:n,errorMessages:r}},eb={ShowHiddenFiles:"show_hidden_files",ShowFoldersFirst:"show_folders_first",DarkMode:"dark_mode"};(r=c||(c={})).ASC="asc",r.DESC="desc";var eh=function(e){return e.instanceId},ev=function(e){return e.fileActionMap},ey=function(e){return e.fileActionIds},eC=function(e){return function(t){return ev(t)[e]}},eS=function(e){return e.toolbarItems},ex=function(e){return e.contextMenuItems},eF=function(e){return e.folderChain},eE=function(e){var t=eF(e);return t.length>0?t[t.length-1]:null},ew=function(e){var t=eF(e);return t.length>1?t[t.length-2]:null},eI=function(e){return e.fileMap},ek=function(e){return function(t){return e?eI(t)[e]:null}},eD=function(e){return e.hiddenFileIdMap},eM=function(e){return Object.keys(eD(e)).length},eA=function(e){return e.searchString},eO=function(e){return e.selectionMap},eN=function(e){return Object.keys(eO(e))},ez=function(e){return eN(e).length},eT=function(e){return function(t){return!!e&&!!eO(t)[e]}},eL=function(e){var t=eI(e);return Object.keys(eO(e)).map(function(e){return t[e]})},eR=function(e){return function(t){var n;return null==(n=to(t,e))?void 0:n.length}},e_=function(e){return e.fileViewConfig},ej=function(e){return e.sortActionId},eP=function(e){return e.sortOrder},eK=function(e){return function(t){return t.optionMap[e]}},eH=function(e){return e.thumbnailGenerator},eB=function(e){return e.doubleClickDelay},eW=function(e){return e.disableDragAndDrop},eV=function(e){return e.clearSelectionOnOutsideClick},eG=function(e){return e.contextMenuMounted},eZ=function(e){return e.contextMenuConfig},eU=function(e){var t,n=eZ(e);return n&&n.triggerFileId&&null!=(t=eI(e)[n.triggerFileId])?t:null},eq=function(e){return e.fileActionMap},eY=function(e){return e.optionMap},eX=function(e){return e.fileMap},eQ=function(e){return e.fileIds},e$=function(e){return e.cleanFileIds},eJ=function(e){return e.sortActionId},e0=function(e){return e.sortOrder},e5=function(e){return e.searchString},e1=function(e){return e.lastClick},e8=function(e){return(0,N.P1)([eq,e],function(e,t){return t&&e[t]?e[t]:null})},e3=function(e,t){return void 0===t&&(t=void 0),(0,N.P1)([eY],function(n){var r=n[e];return void 0===r?t:r})},e6=function(e){return(0,N.P1)([eX,e],function(e,t){return t.map(function(t){return t&&e[t]?e[t]:null})})},e2=(0,N.P1)([eQ,e0,e6(eQ),e8(eJ),e3(eb.ShowFoldersFirst,!1)],function(e,t,n,r,i){if(!r)return e;var o=function(e){return function(t){return e(t)}},a=[];if(i&&a.push({desc:o(em.isDirectory)}),r.sortKeySelector){var l,d=t===c.ASC?"asc":"desc";a.push(((l={})[d]=o(r.sortKeySelector),l))}return 0===a.length?e:(0,T.Z)([].concat(n)).by(a).map(function(e){return e?e.id:null})}),e4=(0,N.P1)([e6(e$)],function(e){return new L.Z(e,["name"],{caseSensitive:!1})}),e9=(0,N.P1)([e$,e5,e4],function(e,t,n){return t?n.search(t).map(function(e){return e.id}):e}),e7=(0,N.P1)([e9,e6(e$),e3(eb.ShowHiddenFiles)],function(e,t,n){var r=new Set(e),i={};return t.forEach(function(e){e&&(r.has(e.id)?!n&&em.isHidden(e)&&(i[e.id]=!0):i[e.id]=!0)}),i}),te=(0,N.P1)([e2,e7],function(e,t){return e.filter(function(e){return!e||!t[e]})}),tt=(0,N.P1)([e1,e2],function(e,t){return!e||e.index>t.length-1||e.fileId!=t[e.index]?null:e.index}),tn={getFileActionMap:eq,getOptionMap:eY,getFileMap:eX,getFileIds:eQ,getCleanFileIds:e$,getSortActionId:eJ,getSortOrder:e0,getSearchString:e5,_getLastClick:e1,getSortedFileIds:e2,getSearcher:e4,getSearchFilteredFileIds:e9,getHiddenFileIdMap:e7,getDisplayFileIds:te,getLastClickIndex:tt,makeGetAction:e8,makeGetOptionValue:e3,makeGetFiles:e6},tr=function(e,t){return!!eO(e)[t.id]},ti=function(e){for(var t=e.fileMap,n=Object.keys(e.selectionMap).map(function(e){return t[e]}),r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.reduce(function(e,t){return t?e.filter(t):e},n)},to=function(e,t){return function(e){var n=e.fileActionMap[t];if(n&&n.requiresSelection)return ti(e,n.fileFilter)}(e)},ta=function(){for(var e,t=new Set,n=function(e){return!!t.add(e.id)},r=function(e){return!t.has(e.id)},i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];var l=o.map(function(e){var t=e.filter(r);return t.map(n),t});return(e=[]).concat.apply(e,l)},tl=function(e,t){return function(n){var r,i=eg("fileActions",e),o=i.sanitizedArray,a=i.errorMessages;if(Array.isArray(t)){var l=new Set(t);r=tx.filter(function(e){return!l.has(e.id)})}else r=t?[]:tx;var c=ta(o,tS,r),d={};c.map(function(e){return e.option?d[e.option.id]=e.option.defaultValue:null}),n(tw.setRawFileActions(e)),n(tw.setFileActionsErrorMessages(a)),n(tw.setFileActions(c)),n(tw.setOptionDefaults(d)),n(tc(c))}},tc=function(e){return function(t){for(var n,r=new Set([tC.OpenParentFolder.id]),i=[],o={},a=[],l={},c=function(e,t,n){if(t[n])return t[n];var r={name:n,fileActionIds:[]};return e.push(r),t[n]=r,r},d=ec(e);!(n=d()).done;){var u=n.value,s=u.button;s&&(s.toolbar&&!r.has(u.id)&&(s.group?c(i,o,s.group).fileActionIds.push(u.id):i.push(u.id)),s.contextMenu&&(s.group?c(a,l,s.group).fileActionIds.push(u.id):a.push(u.id)))}t(tw.updateFileActionMenuItems([i,a]))}},td=function(e){return function(t,n){var r=n().fileActionMap,i=e?r[e]:null;i&&i.fileViewConfig&&t(tw.setFileViewConfig(i.fileViewConfig))}},tu=function(e){return function(t,n){if(e){var r=n(),i=r.sortActionId,o=r.sortOrder,a=r.fileActionMap[e];if(a&&a.sortKeySelector){var l=o===c.ASC?c.DESC:c.ASC;i!==e&&(l=c.ASC),t(tw.setSort({actionId:e,order:l}))}}}},ts=function(e,t){return function(n,r){ep.debug("FILE ACTION REQUEST: ["+e.id+"]","action:",e,"payload:",t);var i=r(),o=eh(i);ev(i)[e.id]||ep.warn('The action "'+e.id+'" was requested, but it is not registered. The action will still be dispatched, but this might indicate a bug in the code. Please register your actions by passing them to "fileActions" prop.');var a=eL(i),l=e.fileFilter?a.filter(e.fileFilter):a;if(e.requiresSelection&&0===l.length){ep.warn('Internal components requested the "'+e.id+'" file action, but the selection for this action was empty. This might a bug in the code of the presentational components.');return}var c={instanceId:o,selectedFiles:a,selectedFilesForAction:l,contextMenuTriggerFile:eU(i)};e.sortKeySelector&&n(tu(e.id));var d=e.fileViewConfig;d&&n(tw.setFileViewConfig(d));var u=e.option;u&&n(tw.toggleOption(u.id)),e.selectionTransform&&n(function(t,n){var r=e.selectionTransform;if(r){var i=n(),o=new Set(Object.keys(eO(i))),a=new Set(Object.keys(eD(i))),l=r({prevSelection:o,fileIds:i.cleanFileIds,fileMap:eI(i),hiddenFileIds:a});l&&t(0===l.size?tw.clearSelection():tw.selectFiles({fileIds:Array.from(l),reset:!0}))}});var s=e.effect,f=void 0;if(s)try{f=s({action:e,payload:t,state:c,reduxDispatch:n,getReduxState:r})}catch(t){ep.error("User-defined effect function for action "+e.id+" threw an error: "+t.message)}return Promise.resolve(f).then(function(r){tf(n,{id:e.id,action:e,payload:t,state:c},r)}).catch(function(r){ep.error("User-defined effect function for action "+e.id+" returned a promise that was rejected: "+r.message),tf(n,{id:e.id,action:e,payload:t,state:c},void 0)})}},tf=function(e,t,n){!0!==n&&e(function(e,n){ep.debug("FILE ACTION DISPATCH: ["+t.id+"]","data:",t);var r=n(),i=ev(r)[t.id],o=r.externalFileActionHandler;i?o&&Promise.resolve(o(t)).catch(function(e){return ep.error("User-defined file action handler threw an error: "+e.message)}):ep.warn('Internal components dispatched the "'+t.id+'" file action, but such action was not registered.')})};(i=d||(d={})).List="list",i.Compact="compact",i.Grid="grid",(o=u||(u={})).loading="loading",o.dropdown="dropdown",o.placeholder="placeholder",o.dndDragging="dndDragging",o.dndCanDrop="dndCanDrop",o.dndCannotDrop="dndCannotDrop",o.openFiles="openFiles",o.openParentFolder="openParentFolder",o.copy="copy",o.paste="paste",o.share="share",o.search="search",o.selectAllFiles="selectAllFiles",o.clearSelection="clearSelection",o.sortAsc="sortAsc",o.sortDesc="sortDesc",o.toggleOn="toggleOn",o.toggleOff="toggleOff",o.list="list",o.compact="compact",o.smallThumbnail="smallThumbnail",o.largeThumbnail="largeThumbnail",o.folder="folder",o.folderCreate="folderCreate",o.folderOpen="folderOpen",o.folderChainSeparator="folderChainSeparator",o.download="download",o.upload="upload",o.trash="trash",o.fallbackIcon="fallbackIcon",o.symlink="symlink",o.hidden="hidden",o.file="file",o.license="license",o.code="code",o.config="config",o.model="model",o.database="database",o.text="text",o.archive="archive",o.image="image",o.video="video",o.info="info",o.key="key",o.lock="lock",o.music="music",o.terminal="terminal",o.users="users",o.linux="linux",o.ubuntu="ubuntu",o.windows="windows",o.rust="rust",o.python="python",o.nodejs="nodejs",o.php="php",o.git="git",o.adobe="adobe",o.pdf="pdf",o.excel="excel",o.word="word",o.flash="flash";var tp=function(e,t){if(void 0!==e.__payloadType&&(e.hotkeys||e.button)){var n='Invalid definition was provided for file action "'+e.id+'". Actions that specify hotkeys or buttons cannot define a payload type. If your application requires this functionality, define two actions and chain them using effects.';throw ep.error(n),Error(n)}return e.effect=t,e},tm=function e(t,n){return!t||n(t)?t:t.parentElement?e(t.parentElement,n):null},tg=function(e,t,n){return n?typeof e===n?e:t:void 0!==e?e:t},tb={selectRange:function(e){return function(t,n){var r=n();if(!r.disableSelection){var i=tn.getDisplayFileIds(r).slice(e.rangeStart,e.rangeEnd+1).filter(function(e){return e&&em.isSelectable(r.fileMap[e])});t(tw.selectFiles({fileIds:i,reset:!!e.reset}))}}}},th={MouseClickFile:tp({id:"mouse_click_file",__payloadType:{}},function(e){var t=e.payload,n=e.reduxDispatch,r=e.getReduxState;if("double"===t.clickType)em.isOpenable(t.file)&&n(ts(tC.OpenFiles,{targetFile:t.file,files:[t.file]}));else{var i=r().disableSelection;if(em.isSelectable(t.file)&&!i){if(t.ctrlKey)n(tw.toggleSelection({fileId:t.file.id,exclusive:!1})),n(tw.setLastClickIndex({index:t.fileDisplayIndex,fileId:t.file.id}));else if(t.shiftKey){var o=tn.getLastClickIndex(r());if("number"==typeof o){var a=o,l=t.fileDisplayIndex;if(a>l){var c=[l,a];a=c[0],l=c[1]}n(tb.selectRange({rangeStart:a,rangeEnd:l}))}else n(tw.toggleSelection({fileId:t.file.id,exclusive:!1})),n(tw.setLastClickIndex({index:t.fileDisplayIndex,fileId:t.file.id}))}else n(tw.toggleSelection({fileId:t.file.id,exclusive:!0})),n(tw.setLastClickIndex({index:t.fileDisplayIndex,fileId:t.file.id}))}else t.ctrlKey||i||n(tw.clearSelection()),n(tw.setLastClickIndex({index:t.fileDisplayIndex,fileId:t.file.id}))}}),KeyboardClickFile:tp({id:"keyboard_click_file",__payloadType:{}},function(e){var t=e.payload,n=e.reduxDispatch,r=e.getReduxState;n(tw.setLastClickIndex({index:t.fileDisplayIndex,fileId:t.file.id})),t.enterKey?0===ez(r())&&n(ts(tC.OpenFiles,{targetFile:t.file,files:[t.file]})):t.spaceKey&&em.isSelectable(t.file)&&n(tw.toggleSelection({fileId:t.file.id,exclusive:t.ctrlKey}))}),StartDragNDrop:tp({id:"start_drag_n_drop",__payloadType:{}},function(e){var t=e.payload,n=e.reduxDispatch,r=e.getReduxState,i=t.draggedFile;!tr(r(),i)&&em.isSelectable(i)&&n(tw.selectFiles({fileIds:[i.id],reset:!0}))}),EndDragNDrop:tp({id:"end_drag_n_drop",__payloadType:{}},function(e){var t=e.payload,n=e.reduxDispatch;if(!tr((0,e.getReduxState)(),t.destination)){var r=t.draggedFile,i=t.selectedFiles,o=i.length>0?i:[r];n(ts(tC.MoveFiles,ea({},t,{files:o})))}}),MoveFiles:tp({id:"move_files",__payloadType:{}}),ChangeSelection:tp({id:"change_selection",__payloadType:{}}),OpenFiles:tp({id:"open_files",__payloadType:{}}),OpenParentFolder:tp({id:"open_parent_folder",hotkeys:["backspace"],button:{name:"Go up a directory",toolbar:!0,contextMenu:!1,icon:u.openParentFolder,iconOnly:!0}},function(e){var t=e.reduxDispatch,n=ew((0,e.getReduxState)());em.isOpenable(n)?t(ts(tC.OpenFiles,{targetFile:n,files:[n]})):ep.warn("Open parent folder effect was triggered  even though the parent folder is not openable. This indicates a bug in presentation components.")}),OpenFileContextMenu:tp({id:"open_file_context_menu",__payloadType:{}},function(e){var t,n,r=e.payload,i=e.reduxDispatch,o=e.getReduxState,a=(t=o(),(n=r.triggerFileId)?eI(t)[n]:null);a&&!tr(o(),a)&&i(em.isSelectable(a)?tw.selectFiles({fileIds:[r.triggerFileId],reset:!0}):tw.clearSelection()),i(tw.showContextMenu({triggerFileId:r.triggerFileId,mouseX:r.clientX-2,mouseY:r.clientY-4}))})},tv={OpenSelection:tp({id:"open_selection",hotkeys:["enter"],requiresSelection:!0,fileFilter:em.isOpenable,button:{name:"Open selection",toolbar:!0,contextMenu:!0,group:"Actions",icon:u.openFiles}},function(e){var t=e.state;(0,e.reduxDispatch)(ts(th.OpenFiles,{files:t.selectedFilesForAction}))}),SelectAllFiles:tp({id:"select_all_files",hotkeys:["ctrl+a"],button:{name:"Select all files",toolbar:!0,contextMenu:!0,group:"Actions",icon:u.selectAllFiles},selectionTransform:function(e){var t=e.fileIds,n=e.hiddenFileIds,r=new Set;return t.map(function(e){n.has(e)||r.add(e)}),r}}),ClearSelection:tp({id:"clear_selection",hotkeys:["escape"],button:{name:"Clear selection",toolbar:!0,contextMenu:!0,group:"Actions",icon:u.clearSelection},selectionTransform:function(e){return 0===e.prevSelection.size?null:new Set}}),EnableListView:tp({id:"enable_list_view",fileViewConfig:{mode:d.List,entryHeight:30},button:{name:"Switch to List view",toolbar:!0,icon:u.list,iconOnly:!0}}),EnableCompactView:tp({id:"enable_compact_view",fileViewConfig:{mode:d.Compact,entryHeight:40,entryWidth:220},button:{name:"Switch to Compact view",toolbar:!0,icon:u.compact,iconOnly:!0}}),EnableGridView:tp({id:"enable_grid_view",fileViewConfig:{mode:d.Grid,entryWidth:165,entryHeight:130},button:{name:"Switch to Grid view",toolbar:!0,icon:u.smallThumbnail,iconOnly:!0}}),SortFilesByName:tp({id:"sort_files_by_name",sortKeySelector:function(e){return e?e.name.toLowerCase():void 0},button:{name:"Sort by name",toolbar:!0,group:"Options"}}),SortFilesBySize:tp({id:"sort_files_by_size",sortKeySelector:function(e){return e?e.size:void 0},button:{name:"Sort by size",toolbar:!0,group:"Options"}}),SortFilesByDate:tp({id:"sort_files_by_date",sortKeySelector:function(e){return e?e.modDate:void 0},button:{name:"Sort by date",toolbar:!0,group:"Options"}}),ToggleHiddenFiles:tp({id:"toggle_hidden_files",hotkeys:["ctrl+h"],option:{id:eb.ShowHiddenFiles,defaultValue:!0},button:{name:"Show hidden files",toolbar:!0,group:"Options"}}),ToggleShowFoldersFirst:tp({id:"toggle_show_folders_first",option:{id:eb.ShowFoldersFirst,defaultValue:!0},button:{name:"Show folders first",toolbar:!0,group:"Options"}}),FocusSearchInput:tp({id:"focus_search_input",hotkeys:["ctrl+f"]},function(e){var t=(0,e.getReduxState)().focusSearchInput;t&&t()}),ToggleDarkMode:tp({id:"enable_dark_mode",option:{id:eb.DarkMode,defaultValue:!1},button:{name:"Enable dark mode",toolbar:!0,icon:u.list,iconOnly:!0}})},ty={CopyFiles:tp({id:"copy_files",requiresSelection:!0,hotkeys:["ctrl+c"],button:{name:"Copy selection",toolbar:!0,contextMenu:!0,group:"Actions",icon:u.copy}}),CreateFolder:tp({id:"create_folder",button:{name:"Create folder",toolbar:!0,tooltip:"Create a folder",icon:u.folderCreate}}),UploadFiles:tp({id:"upload_files",button:{name:"Upload files",toolbar:!0,tooltip:"Upload files",icon:u.upload}}),DownloadFiles:tp({id:"download_files",requiresSelection:!0,button:{name:"Download files",toolbar:!0,contextMenu:!0,group:"Actions",icon:u.download}}),DeleteFiles:tp({id:"delete_files",requiresSelection:!0,hotkeys:["delete"],button:{name:"Delete files",toolbar:!0,contextMenu:!0,group:"Actions",icon:u.trash}})},tC=ea({},th,tv,ty),tS=[tC.MouseClickFile,tC.KeyboardClickFile,tC.StartDragNDrop,tC.EndDragNDrop,tC.MoveFiles,tC.ChangeSelection,tC.OpenFiles,tC.OpenParentFolder,tC.OpenFileContextMenu],tx=[tC.OpenSelection,tC.SelectAllFiles,tC.ClearSelection,tC.EnableListView,tC.EnableGridView,tC.SortFilesByName,tC.SortFilesBySize,tC.SortFilesByDate,tC.ToggleHiddenFiles,tC.ToggleShowFoldersFirst,tC.FocusSearchInput],tF={instanceId:"CHONKY_INVALID_ID",externalFileActionHandler:null,rawFileActions:[],fileActionsErrorMessages:[],fileActionMap:{},fileActionIds:[],toolbarItems:[],contextMenuItems:[],rawFolderChain:null,folderChainErrorMessages:[],folderChain:[],rawFiles:[],filesErrorMessages:[],fileMap:{},fileIds:[],cleanFileIds:[],sortedFileIds:[],hiddenFileIdMap:{},focusSearchInput:null,searchString:"",searchMode:"currentFolder",selectionMap:{},disableSelection:!1,fileViewConfig:tC.EnableGridView.fileViewConfig,sortActionId:null,sortOrder:c.ASC,optionMap:{},thumbnailGenerator:null,doubleClickDelay:300,disableDragAndDrop:!1,clearSelectionOnOutsideClick:!0,lastClick:null,contextMenuMounted:!1,contextMenuConfig:null},tE=(0,z.oM)({name:"root",initialState:tF,reducers:{setExternalFileActionHandler:function(e,t){var n;e.externalFileActionHandler=null!=(n=t.payload)?n:null},setRawFileActions:function(e,t){e.rawFileActions=t.payload},setFileActionsErrorMessages:function(e,t){e.fileActionsErrorMessages=t.payload},setFileActions:function(e,t){var n={};t.payload.map(function(e){return n[e.id]=e});var r=t.payload.map(function(e){return e.id});e.fileActionMap=n,e.fileActionIds=r},updateFileActionMenuItems:function(e,t){var n=t.payload;e.toolbarItems=n[0],e.contextMenuItems=n[1]},setRawFolderChain:function(e,t){var n=t.payload,r=eg("folderChain",n),i=r.sanitizedArray,o=r.errorMessages;e.rawFolderChain=n,e.folderChain=i,e.folderChainErrorMessages=o},setRawFiles:function(e,t){var n=t.payload,r=eg("files",n),i=r.sanitizedArray,o=r.errorMessages;e.rawFiles=n,e.filesErrorMessages=o;var a={};i.forEach(function(e){e&&(a[e.id]=e)});var l=i.map(function(e){return e?e.id:null}),c=l.filter(function(e){return!!e});e.fileMap=a,e.fileIds=l,e.cleanFileIds=c;for(var d=0,u=Object.keys(e.selectionMap);d<u.length;d++){var s=u[d];a[s]||delete e.selectionMap[s]}},setSortedFileIds:function(e,t){e.sortedFileIds=t.payload},setHiddenFileIds:function(e,t){e.hiddenFileIdMap=t.payload;for(var n=0,r=Object.keys(e.selectionMap);n<r.length;n++){var i=r[n];e.hiddenFileIdMap[i]&&delete e.selectionMap[i]}},setFocusSearchInput:function(e,t){e.focusSearchInput=t.payload},setSearchString:function(e,t){e.searchString=t.payload},selectAllFiles:function(e){e.fileIds.filter(function(t){return t&&em.isSelectable(e.fileMap[t])}).map(function(t){return t?e.selectionMap[t]=!0:null})},selectFiles:function(e,t){e.disableSelection||(t.payload.reset&&(e.selectionMap={}),t.payload.fileIds.filter(function(t){return t&&em.isSelectable(e.fileMap[t])}).map(function(t){return e.selectionMap[t]=!0}))},toggleSelection:function(e,t){if(!e.disableSelection){var n=!!e.selectionMap[t.payload.fileId];t.payload.exclusive&&(e.selectionMap={}),n?delete e.selectionMap[t.payload.fileId]:em.isSelectable(e.fileMap[t.payload.fileId])&&(e.selectionMap[t.payload.fileId]=!0)}},clearSelection:function(e){e.disableSelection||0===Object.keys(e.selectionMap).length||(e.selectionMap={})},setSelectionDisabled:function(e,t){e.disableSelection=t.payload,0!==Object.keys(e.selectionMap).length&&(e.selectionMap={})},setFileViewConfig:function(e,t){e.fileViewConfig=t.payload},setSort:function(e,t){e.sortActionId=t.payload.actionId,e.sortOrder=t.payload.order},setOptionDefaults:function(e,t){for(var n=0,r=Object.keys(t.payload);n<r.length;n++){var i=r[n];i in e.optionMap||(e.optionMap[i]=t.payload[i])}},toggleOption:function(e,t){e.optionMap[t.payload]=!e.optionMap[t.payload]},setThumbnailGenerator:function(e,t){e.thumbnailGenerator=t.payload},setDoubleClickDelay:function(e,t){e.doubleClickDelay=t.payload},setDisableDragAndDrop:function(e,t){e.disableDragAndDrop=t.payload},setClearSelectionOnOutsideClick:function(e,t){e.clearSelectionOnOutsideClick=t.payload},setLastClickIndex:function(e,t){e.lastClick=t.payload},setContextMenuMounted:function(e,t){e.contextMenuMounted=t.payload},showContextMenu:function(e,t){e.contextMenuConfig=t.payload},hideContextMenu:function(e){e.contextMenuConfig&&(e.contextMenuConfig=null)}}}),tw=tE.actions,tI=tE.reducer,tk=function(e){(0,h.useEffect)(function(){var t=_()(function(){return eO(e.getState())}),n=[e.subscribe(t(function(t,n){if(t!==n){var r=eN(e.getState()),i=new Set(r);e.dispatch(ts(tC.ChangeSelection,{selection:i}))}}))];return function(){for(var e,t=ec(n);!(e=t()).done;)(0,e.value)()}},[e])},tD=function(e){var t=es(function(){var t=ea({},tF,{instanceId:e});return(0,z.xC)({preloadedState:t,reducer:tI,middleware:function(e){return e({serializableCheck:!1})},devTools:{name:"chonky_"+e}})});return tk(t),t},tM=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=(0,h.useCallback)(function(t){return e.apply(void 0,n)(t)},[e].concat(n));return(0,M.v9)(i)},tA=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=(0,M.I0)();(0,h.useEffect)(function(){i(e.apply(void 0,n))},[i,e].concat(n))},tO=function(e,t){var n=(0,M.I0)();(0,h.useEffect)(function(){n(e(t))},[n,e,t])},tN=function(){return h.createElement("span",{title:"No icon component found. Please follow Chonky installation instructions to provide a pre-made icon component (or a custom icon)."},"⚠️")},tz={fileActions:null,onFileAction:null,thumbnailGenerator:null,doubleClickDelay:300,disableSelection:!1,disableDefaultFileActions:!1,disableDragAndDrop:!1,disableDragAndDropProvider:!1,defaultSortActionId:tC.SortFilesByName.id,defaultFileViewActionId:tC.EnableGridView.id,clearSelectionOnOutsideClick:!0,iconComponent:tN,darkMode:!1,i18n:{}},tT=function(e){for(var t=0,n=Object.keys(tz);t<n.length;t++){var r=n[t];r in e&&(tz[r]=e[r])}};(a=s||(s={})).Toolbar="toolbar",a.FileList="fileList",a.FileEntry="fileEntry",a.FileContextMenu="contextMenu",a.FileActions="actions",a.FileActionGroups="actionGroups";var tL=function(e,t){return"chonky."+e+"."+t},tR=function(e,t){return"chonky."+s.FileActions+"."+e+"."+t},t_=function(e){var t=(0,w.Z)();return(0,h.useMemo)(function(){return t.formatMessage({id:tL(s.FileActionGroups,e),defaultMessage:e})},[e,t])},tj=function(e){var t=(0,w.Z)();return(0,h.useMemo)(function(){if(!e)return{buttonName:"",buttonTooltip:void 0};var n,r,i,o=t.formatMessage({id:tR(e.id,"button.name"),defaultMessage:null==(n=e.button)?void 0:n.name}),a=void 0;return null!=(r=e.button)&&r.tooltip&&(a=t.formatMessage({id:tR(e.id,"button.tooltip"),defaultMessage:null==(i=e.button)?void 0:i.tooltip})),{buttonName:o,buttonTooltip:a}},[e,t])},tP=function(e){var t=(0,w.Z)(),n=(0,h.useContext)(tH);return(0,h.useMemo)(function(){return{fileModDateString:n.formatFileModDate(t,e),fileSizeString:n.formatFileSize(t,e)}},[e,n,t])},tK={formatFileModDate:function(e,t){var n=em.getModDate(t);return n?e.formatDate(n,{dateStyle:"medium",timeStyle:"short"}):null},formatFileSize:function(e,t){if(!t||"number"!=typeof t.size)return null;var n=t.size,r=P()(n,{bits:!1,output:"object"});return"B"===r.symbol?Math.round(r.value/10)/100+" KB":"KB"===r.symbol?Math.round(r.value)+" "+r.symbol:r.value+" "+r.symbol}},tH=(0,h.createContext)(tK),tB=(0,h.createContext)(tN),tW=["3g2","3gp","3gpp","asf","asx","avi","dvb","f4v","fli","flv","fvt","h261","h263","h264","jpgm","jpgv","jpm","m1v","m2v","m4u","m4v","mj2","mjp2","mk3d","mks","mkv","mng","mov","movie","mp4","mp4v","mpe","mpeg","mpg","mpg4","mxu","ogv","pyv","qt","smv","ts","uvh","uvm","uvp","uvs","uvu","uvv","uvvh","uvvm","uvvp","uvvs","uvvu","uvvv","viv","vob","webm","wm","wmv","wmx","wvx"],tV=["3ds","apng","azv","bmp","bmp","btif","cgm","cmx","djv","djvu","drle","dwg","dxf","emf","exr","fbs","fh","fh4","fh5","fh7","fhc","fits","fpx","fst","g3","gif","heic","heics","heif","heifs","ico","ico","ief","jls","jng","jp2","jpe","jpeg","jpf","jpg","jpg2","jpm","jpx","jxr","ktx","mdi","mmr","npx","pbm","pct","pcx","pcx","pgm","pic","png","pnm","ppm","psd","pti","ras","rgb","rlc","sgi","sid","sub","svg","svgz","t38","tap","tfx","tga","tif","tiff","uvg","uvi","uvvg","uvvi","vtf","wbmp","wdp","webp","wmf","xbm","xif","xpm","xwd"],tG=["3gpp","aac","adp","aif","aifc","aiff","au","caf","dra","dts","dtshd","ecelp4800","ecelp7470","ecelp9600","eol","flac","kar","lvp","m2a","m3a","m3u","m4a","m4a","mid","midi","mka","mp2","mp2a","mp3","mp3","mp4a","mpga","oga","ogg","pya","ra","ra","ram","rip","rmi","rmp","s3m","sil","snd","spx","uva","uvva","wav","wav","wav","wax","weba","wma","xm"],tZ=["#bbbbbb","#d65c5c","#d6665c","#d6705c","#d67a5c","#d6855c","#d68f5c","#d6995c","#d6a35c","#d6ad5c","#d6b85c","#d6c25c","#d6cc5c","#d6d65c","#ccd65c","#c2d65c","#b8d65c","#add65c","#a3d65c","#99d65c","#8fd65c","#85d65c","#7ad65c","#70d65c","#66d65c","#5cd65c","#5cd666","#5cd670","#5cd67a","#5cd685","#5cd68f","#5cd699","#5cd6a3","#5cd6ad","#5cd6b8","#5cd6c2","#5cd6cc","#5cd6d6","#5cccd6","#5cc2d6","#5cb8d6","#5cadd6","#5ca3d6","#5c99d6","#5c8fd6","#5c85d6","#5c7ad6","#5c70d6","#5c66d6","#5c5cd6","#665cd6","#705cd6","#7a5cd6","#855cd6","#8f5cd6","#995cd6","#a35cd6","#ad5cd6","#b85cd6","#c25cd6","#cc5cd6","#d65cd6","#d65ccc","#d65cc2","#d65cb8","#d65cad","#d65ca3","#d65c99","#d65c8f","#d65c85","#d65c7a","#d65c70","#d65c66"],tU=["#777","#8f3d3d","#8f443d","#8f4b3d","#8f523d","#8f583d","#8f5f3d","#8f663d","#8f6d3d","#8f743d","#8f7a3d","#8f813d","#8f883d","#8f8f3d","#888f3d","#818f3d","#7a8f3d","#748f3d","#6d8f3d","#668f3d","#5f8f3d","#588f3d","#528f3d","#4b8f3d","#448f3d","#3d8f3d","#3d8f44","#3d8f4b","#3d8f52","#3d8f58","#3d8f5f","#3d8f66","#3d8f6d","#3d8f74","#3d8f7a","#3d8f81","#3d8f88","#3d8f8f","#3d888f","#3d818f","#3d7a8f","#3d748f","#3d6d8f","#3d668f","#3d5f8f","#3d588f","#3d528f","#3d4b8f","#3d448f","#3d3d8f","#443d8f","#4b3d8f","#523d8f","#583d8f","#5f3d8f","#663d8f","#6d3d8f","#743d8f","#7a3d8f","#813d8f","#883d8f","#8f3d8f","#8f3d88","#8f3d81","#8f3d7a","#8f3d74","#8f3d6d","#8f3d66","#8f3d5f","#8f3d58","#8f3d52","#8f3d4b","#8f3d44"],tq=function(){for(var e=0,t=[[u.license,["license"]],[u.config,["sfk","ini","yml","toml","iml"]],[u.model,["3ds","obj","ply","fbx"]],[u.database,["csv","json","sql","sqlite","sqlite3","npy","npz","rec","idx","hdf5"]],[u.text,["txt","md","mdx"]],[u.archive,["zip","rar","tar","tar.gz","7z"]],[u.image,tV],[u.video,tW],[u.code,["html","php","css","sass","scss","less","cpp","h","hpp","c","xml"]],[u.info,["bib","readme","nfo"]],[u.key,["pem","pub"]],[u.lock,["lock","lock.json","shrinkwrap.json"]],[u.music,tG],[u.terminal,["run","sh"]],[u.trash,[".Trashes"]],[u.users,["authors","contributors"]],[u.linux,["AppImage"]],[u.ubuntu,["deb"]],[u.windows,["exe"]],[u.rust,["rs","rlib"]],[u.python,["py","ipynb"]],[u.nodejs,["js","jsx","ts","tsx","d.ts"]],[u.php,["php"]],[u.git,[".gitignore"]],[u.adobe,["psd"]],[u.pdf,["pdf"]],[u.excel,["xls","xlsx"]],[u.word,["doc","docx","odt"]],[u.flash,["swf"]]],n=new(H())({ignoreCase:!0}),r=0;r<t.length;r++)for(var i=t[r],o=i[0],a=i[1],l=0;l<a.length;++l){var c={icon:o,colorCode:(e+=5)%(tZ.length-1)+1};n.put(a[l],c,!0)}return n}(),tY={colors:{debugRed:"#fabdbd",debugBlue:"#bdd8fa",debugGreen:"#d2fabd",debugPurple:"#d2bdfa",debugYellow:"#fae9bd",textActive:"#09f"},fontSizes:{rootPrimary:15},margins:{rootLayoutMargin:8},toolbar:{size:30,lineHeight:"30px",fontSize:15,buttonRadius:4},dnd:{canDropColor:"green",cannotDropColor:"red",canDropMask:"rgba(180, 235, 180, 0.75)",cannotDropMask:"rgba(235, 180, 180, 0.75)",fileListCanDropMaskOne:"rgba(180, 235, 180, 0.1)",fileListCanDropMaskTwo:"rgba(180, 235, 180, 0.2)",fileListCannotDropMaskOne:"rgba(235, 180, 180, 0.1)",fileListCannotDropMaskTwo:"rgba(235, 180, 180, 0.2)"},dragLayer:{border:"solid 2px #09f",padding:"7px 10px",borderRadius:2},fileList:{desktopGridGutter:8,mobileGridGutter:5},gridFileEntry:{childrenCountSize:"1.6em",iconColorFocused:"#000",iconSize:"2.4em",iconColor:"#fff",borderRadius:5,fontSize:14,fileColorTint:"rgba(255, 255, 255, 0.4)",folderBackColorTint:"rgba(255, 255, 255, 0.1)",folderFrontColorTint:"rgba(255, 255, 255, 0.4)"},listFileEntry:{propertyFontSize:14,iconFontSize:"1.1em",iconBorderRadius:5,fontSize:14}},tX={gridFileEntry:{fileColorTint:"rgba(50, 50, 50, 0.4)",folderBackColorTint:"rgba(50, 50, 50, 0.4)",folderFrontColorTint:"rgba(50, 50, 50, 0.15)"}},tQ={fontSizes:{rootPrimary:13},margins:{rootLayoutMargin:4},toolbar:{size:28,lineHeight:"28px",fontSize:13},gridFileEntry:{fontSize:13},listFileEntry:{propertyFontSize:12,iconFontSize:"1em",fontSize:13}},t$=function(){return(0,B.Z)("(max-width:480px)")},tJ=function(e,t){return"repeating-linear-gradient(45deg,"+e+","+e+" 10px,"+t+" 0,"+t+" 20px)"},t0=function(e){return(0,k.QM)(e)},t5=function(e){var t={},n=(0,k.QM)(function(n){var r=e(n),i={};return Object.keys(r).map(function(e){var n="chonky-"+e;i["@global ."+n]=r[e],t[e]=n}),i});return function(){var e=n.apply(void 0,arguments),r={};return Object.keys(t).map(function(e){r[e]=t[e]}),ea({},r,e)}},t1=function(e){return[e,"!important"]},t8=V(),t3=function(e){var t=(0,M.oR)(),n=(0,M.I0)();(0,h.useImperativeHandle)(e,function(){return{getFileSelection:function(){var e=eO(t.getState());return new Set(Object.keys(e))},setFileSelection:function(e,t){void 0===t&&(t=!0);var r=Array.from(e);n(tw.selectFiles({fileIds:r,reset:t}))},requestFileAction:function(e,t){return Promise.resolve(n(ts(e,t))).then()}}},[t,n])},t6=h.memo(h.forwardRef(function(e,t){var n;return tO(tw.setRawFiles,null!=(n=e.files)?n:tF.rawFiles),tO(tw.setRawFolderChain,e.folderChain),tA(tl,tg(e.fileActions,tz.fileActions),tg(e.disableDefaultFileActions,tz.disableDefaultFileActions)),tA(tw.setExternalFileActionHandler,tg(e.onFileAction,tz.onFileAction)),tA(tw.setSelectionDisabled,tg(e.disableSelection,tz.disableSelection,"boolean")),tA(tu,tg(e.defaultSortActionId,tz.defaultSortActionId)),tA(td,tg(e.defaultFileViewActionId,tz.defaultFileViewActionId,"string")),tA(tw.setThumbnailGenerator,tg(e.thumbnailGenerator,tz.thumbnailGenerator)),tA(tw.setDoubleClickDelay,tg(e.doubleClickDelay,tz.doubleClickDelay,"number")),tA(tw.setDisableDragAndDrop,tg(e.disableDragAndDrop,tz.disableDragAndDrop,"boolean")),tA(tw.setClearSelectionOnOutsideClick,tg(e.clearSelectionOnOutsideClick,tz.clearSelectionOnOutsideClick,"boolean")),t3(t),null}));t6.displayName="ChonkyBusinessLogicInner";var t2=h.memo(t6);t2.displayName="ChonkyBusinessLogic";var t4=function(){return!!(0,h.useContext)(v.L).dragDropManager},t9=function(){var e=t4(),t=(0,h.useCallback)(function(){return[{},function(){return null},function(){return null}]},[]);return(e?y.c:t).apply(void 0,arguments)},t7=function(){var e=t4(),t=(0,h.useCallback)(function(){return[{},function(){return null}]},[]);return(e?C.L:t).apply(void 0,arguments)},ne=function(e){var t=tm(e,function(e){return e.tagName&&"div"===e.tagName.toLowerCase()&&e.dataset&&e.dataset.chonkyFileId});return t?t.dataset.chonkyFileId:null},nt=function(){var e=(0,M.I0)(),t=ef((0,M.v9)(eG));return(0,h.useCallback)(function(n){if(t.current&&!n.altKey){n.preventDefault();var r=ne(n.target);e(ts(tC.OpenFileContextMenu,{clientX:n.clientX,clientY:n.clientY,triggerFileId:r}))}},[t,e])},nn=function(){var e=(0,M.I0)();return(0,h.useCallback)(function(){return e(tw.hideContextMenu())},[e])},nr="dnd-chonky-file-entry",ni={position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:"100%",height:"100%"},no=function(e,t,n){if(!e||!t||!n)return{display:"none"};var r="translate("+(e.x+(n.x-t.x))+"px, "+(e.y+(n.y-t.y))+"px)";return{transform:r,WebkitTransform:r}},na=function(){var e=nl(),t=(0,S.f)(function(e){return{item:e.getItem(),itemType:e.getItemType(),initialCursorOffset:e.getInitialClientOffset(),initialFileOffset:e.getInitialSourceClientOffset(),currentFileOffset:e.getSourceClientOffset(),isDragging:e.isDragging()}}),n=t.itemType,r=t.item,i=t.initialCursorOffset,o=t.initialFileOffset,a=t.currentFileOffset;if(!t.isDragging||n!==nr||!r.payload)return null;var l=r.payload.selectedFiles.length;return h.createElement("div",{style:ni},h.createElement("div",{style:no(i,o,a)},h.createElement("div",{className:e.fileDragPreview},h.createElement("b",null,r.payload.draggedFile.name),l>1&&h.createElement(h.Fragment,null," and ",h.createElement("strong",null,l-1," other file",l-1!=1?"s":"")))))},nl=t5(function(e){return{fileDragPreview:{boxShadow:"2px 2px 5px "+e.palette.divider,backgroundColor:e.palette.background.default,borderRadius:e.dragLayer.borderRadius,fontSize:e.fontSizes.rootPrimary,color:e.palette.text.primary,padding:e.dragLayer.padding,border:e.dragLayer.border,display:"inline-block"}}}),nc=h.memo(function(e){var t=e.fileActionId,n=(0,M.I0)(),r=tM(eC,t);return(0,h.useEffect)(function(){if(r&&r.hotkeys&&0!==r.hotkeys.length){var e=r.hotkeys.join(","),t=function(e){e.preventDefault(),n(ts(r,void 0))};return(0,U.Z)(e,t),function(){return U.Z.unbind(e,t)}}},[n,r]),null}),nd=function(e){var t=e.children,n=(0,M.I0)(),r=(0,M.v9)(ey),i=(0,M.v9)(eW),o=(0,M.v9)(eV),a=(0,h.useCallback)(function(e){!o||tm(e.target,function(e){return e.tagName&&"button"===e.tagName.toLowerCase()})||n(tw.clearSelection())},[n,o]),l=(0,h.useMemo)(function(){return r.map(function(e){return h.createElement(nc,{key:"file-action-listener-"+e,fileActionId:e})})},[r]),c=t4(),d=nt(),u=nu();return h.createElement(Z.Z,{onClickAway:a},h.createElement(G.Z,{className:u.chonkyRoot,onContextMenu:d},!i&&c&&h.createElement(na,null),l,t||null))},nu=t5(function(e){return{chonkyRoot:{backgroundColor:e.palette.background.paper,border:"solid 1px "+e.palette.divider,padding:e.margins.rootLayoutMargin,fontSize:e.fontSizes.rootPrimary,color:e.palette.text.primary,touchAction:"manipulation",fontFamily:"sans-serif",flexDirection:"column",boxSizing:"border-box",textAlign:"left",borderRadius:4,display:"flex",height:"100%",webkitTouchCallout:"none",webkitUserSelect:"none",mozUserSelect:"none",msUserSelect:"none",userSelect:"none"}}}),ns=h.forwardRef(function(e,t){var n,r=e.instanceId,i=e.iconComponent,o=e.children,a=tg(e.disableDragAndDrop,tz.disableDragAndDrop,"boolean"),l=tg(e.disableDragAndDropProvider,tz.disableDragAndDropProvider,"boolean"),c=tg(e.darkMode,tz.darkMode,"boolean"),d=tg(e.i18n,tz.i18n),u=(0,h.useMemo)(function(){return ea({},tK,null==d?void 0:d.formatters)},[d]),s=tD(es(function(){return null!=r?r:O().generate()})),f=t$(),g=(0,h.useMemo)(function(){var e=(0,p.Z)({palette:{type:c?"dark":"light"}}),t=b()(e,b()(tY,c?tX:{}));return f?b()(t,tQ):t},[c,f]),v=h.createElement(h.Fragment,null,h.createElement(t2,Object.assign({ref:t},e)),h.createElement(nd,null,o));return h.createElement(I.Z,Object.assign({locale:"en",defaultLocale:"en"},d),h.createElement(tH.Provider,{value:u},h.createElement(M.zt,{store:s},h.createElement(D.f6,{theme:g},h.createElement(m.Z,{theme:g},h.createElement(tB.Provider,{value:null!=(n=null!=i?i:tz.iconComponent)?n:tN},a||l?v:h.createElement(x.W,{backend:F.PD},v)))))))});ns.displayName="FileBrowser";var nf=function(){var e=(0,M.v9)(eF),t=(0,M.I0)();return(0,h.useMemo)(function(){var n=[];if(!e)return n;for(var r=0;r<e.length;++r)!function(r){var i=e[r];n.push({file:i,disabled:!i,onClick:em.isOpenable(i)&&r!==e.length-1?function(){return t(ts(tC.OpenFiles,{targetFile:i,files:[i]}))}:void 0})}(r);return n},[t,e])},np=function(e){var t=(0,M.oR)(),n=ef(e),r=(0,h.useCallback)(function(){var e=t.getState();return{sourceInstanceId:eh(e),source:eE(e),draggedFile:n.current,selectedFiles:eL(e)}},[t,n]),i=(0,M.I0)(),o=(0,h.useCallback)(function(){return em.isDraggable(n.current)},[n]),a=(0,h.useCallback)(function(){var e={type:nr,payload:r()};return i(ts(tC.StartDragNDrop,e.payload)),e},[i,r]),l=(0,h.useCallback)(function(e,t){var n=t.getDropResult();em.isDraggable(e.payload.draggedFile)&&n&&n.dropTarget&&i(ts(tC.EndDragNDrop,ea({},e.payload,{destination:n.dropTarget,copy:"copy"===n.dropEffect})))},[i]),c=t9({item:(0,h.useMemo)(function(){return{type:nr,payload:{}}},[]),canDrag:o,begin:a,end:l,collect:(0,h.useCallback)(function(e){return{isDragging:e.isDragging()}},[])}),d=c[0].isDragging,u=c[1],s=c[2];return(0,h.useEffect)(function(){s((0,E.r)(),{captureDraggingState:!0})},[s]),{dndIsDragging:d,drag:u}},nm=function(e){var t=e.file,n=e.forceDisableDrop,r=e.includeChildrenDrops,i=ef((0,M.v9)(eF)),o=t7({accept:nr,drop:(0,h.useCallback)(function(e,n){if(n.canDrop())return{dropTarget:t}},[t]),canDrop:(0,h.useCallback)(function(e,o){if(n||!em.isDroppable(t)||!o.isOver({shallow:!0})&&!r)return!1;var a=e.payload,l=a.source,c=a.draggedFile,d=a.selectedFiles,u=new Set;u.add(t.id),i.current.map(function(e){e&&u.add(e.id)});for(var s,f=[c].concat(d),p=ec(f);!(s=p()).done;){var m=s.value;if(u.has(m.id))return!1}return t.id!==(null==l?void 0:l.id)},[n,t,r,i]),collect:(0,h.useCallback)(function(e){return{isOver:e.isOver(),isOverCurrent:e.isOver({shallow:!0}),canDrop:e.canDrop()}},[])}),a=o[0];return{dndIsOver:a.isOver,dndIsOverCurrent:a.isOverCurrent,dndCanDrop:a.canDrop,drop:o[1]}},ng=function(e){var t=np(e),n=t.dndIsDragging,r=t.drag,i=nm({file:e}),o=i.dndIsOver,a=i.dndCanDrop;return{drop:i.drop,drag:r,dndState:(0,h.useMemo)(function(){return{dndIsDragging:n,dndIsOver:o,dndCanDrop:a}},[a,n,o])}},nb=function(e,t){var n=(0,M.I0)(),r=ef((0,M.v9)(eE));(0,h.useEffect)(function(){var i,o=null;return t.dndIsOver&&em.isDndOpenable(e)&&e.id!==(null==(i=r.current)?void 0:i.id)&&(o=setTimeout(function(){return n(ts(th.OpenFiles,{targetFile:e,files:[e]}))},1500)),function(){o&&clearTimeout(o)}},[n,e,t.dndIsOver,r])},nh=h.memo(function(e){var t=e.minLength,n=e.maxLength,r="&nbsp;".repeat(t+Math.floor(Math.random()*Math.floor(n-t))),i=nv();return h.createElement("span",{className:i.textPlaceholder,dangerouslySetInnerHTML:{__html:r}})}),nv=t0(function(){return{"@keyframes loading-placeholder":{"0%":{opacity:.2},"50%":{opacity:.4},"100%":{opacity:.2}},textPlaceholder:{animationName:"$loading-placeholder",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDuration:"1.5s",backgroundColor:"#ccc",whiteSpace:"nowrap",overflow:"hidden",borderRadius:4,maxWidth:"40%",minWidth:20}}}),ny=function(e){return(0,h.useMemo)(function(){var t={"data-test-id":"file-entry","data-chonky-file-id":e?e.id:void 0};return ea({role:"listitem"},t)},[e])},nC=function(e,t,n){var r=(0,h.useMemo)(function(){return e?!0===e.isDir?{icon:u.folder,colorCode:0}:tq.getWithCheckpoints(e.name,".",!0)||{icon:u.file,colorCode:32}:{icon:u.loading,colorCode:0}},[e]),i=nE(e),o=i.thumbnailUrl,a=i.thumbnailLoading;return(0,h.useMemo)(function(){var i=o?tU[r.colorCode]:tZ[r.colorCode],l=a||!e,c=a?u.loading:r.icon;return{childrenCount:em.getChildrenCount(e),icon:e&&void 0!==e.icon?e.icon:c,iconSpin:l,thumbnailUrl:o,color:e&&void 0!==e.color?e.color:i,selected:t,focused:!!n}},[e,n,r,t,a,o])},nS=function(e){var t=null;return e.dndIsOver?t=e.dndCanDrop?u.dndCanDrop:u.dndCannotDrop:e.dndIsDragging&&(t=u.dndDragging),t},nx=function(e){var t=(0,h.useMemo)(function(){var t=[];return em.isHidden(e)&&t.push(u.hidden),em.isSymlink(e)&&t.push(u.symlink),em.isEncrypted(e)&&t.push(u.lock),t},[e]),n=(0,h.useContext)(tB);return(0,h.useMemo)(function(){return t.map(function(e,t){return h.createElement(n,{key:"file-modifier-"+t,icon:e})})},[n,t])},nF=function(e){var t=e.split(".");return t.length?"."+t[t.length-1]:""},nE=function(e){var t=(0,M.v9)(eH),n=(0,h.useState)(null),r=n[0],i=n[1],o=(0,h.useState)(!1),a=o[0],l=o[1],c=(0,h.useRef)(0);return(0,h.useEffect)(function(){var n=!1;return e&&(t?(0===c.current&&l(!0),c.current++,Promise.resolve().then(function(){return t(e)}).then(function(e){!n&&(l(!1),e&&"string"==typeof e&&i(e))}).catch(function(e){n||l(!1),ep.error('User-defined "thumbnailGenerator" handler threw an error: '+e.message)})):e.thumbnailUrl&&i(e.thumbnailUrl)),function(){n=!0}},[e,i,l,t]),{thumbnailUrl:r,thumbnailLoading:a}},nw=function(e,t){var n=(0,M.I0)(),r=(0,h.useCallback)(function(r,i){e&&n(ts(tC.MouseClickFile,{clickType:i,file:e,fileDisplayIndex:t,altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey}))},[n,e,t]),i=(0,h.useCallback)(function(r){e&&n(ts(tC.KeyboardClickFile,{file:e,fileDisplayIndex:t,enterKey:r.enterKey,spaceKey:r.spaceKey,altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey}))},[n,e,t]);return{onSingleClick:(0,h.useCallback)(function(e){return r(e,"single")},[r]),onDoubleClick:(0,h.useCallback)(function(e){return r(e,"double")},[r]),onKeyboardClick:i}};(l=f||(f={}))[l.Hidden=0]="Hidden",l[l.Disabled=1]="Disabled",l[l.Default=2]="Default",l[l.Active=3]="Active";var nI=function(e){var t=(0,M.I0)(),n=tM(eC,e);return(0,h.useCallback)(function(){return t(ts(n,void 0))},[t,n])},nk=function(e){var t,n=(0,M.v9)(ew),r=(0,M.v9)(e_),i=(0,M.v9)(ej),o=(0,M.v9)(eP),a=tM(eC,e),l=tM(eK,null==a?void 0:null==(t=a.option)?void 0:t.id),d=0===tM(eR,e);return(0,h.useMemo)(function(){if(!a)return{icon:null,active:!1,disabled:!0};var e,t,s=null!=(e=null==(t=a.button)?void 0:t.icon)?e:null;a.sortKeySelector?s=i===a.id?o===c.ASC?u.sortAsc:u.sortDesc:u.placeholder:a.option&&(s=l?u.toggleOn:u.toggleOff);var p=a.id===i,m=a.fileViewConfig===r,g=!!a.option&&!!l,b=!1,h=!1;void 0!==a.customVisibility&&(b=a.customVisibility()===f.Disabled,h=a.customVisibility()===f.Active);var v=p||m||g||h,y=!!a.requiresSelection&&d||b;return a.id===tC.OpenParentFolder.id&&(y=y||!em.isOpenable(n)),{icon:s,active:v,disabled:y}},[n,r,i,o,a,l,d])},nD=h.memo(function(e){var t,n=e.className,r=e.text,i=e.tooltip,o=e.active,a=e.icon,l=e.iconOnly,c=e.onClick,d=e.disabled,s=e.dropdown,f=nM(),p=(0,h.useContext)(tB),m=a||l?h.createElement("div",{className:l?"":f.iconWithText},h.createElement(p,{icon:a||u.fallbackIcon,fixedWidth:!0})):null,g=t8(((t={})[null!=n?n:""]=!0,t[f.baseButton]=!0,t[f.iconOnlyButton]=l,t[f.activeButton]=!!o,t));return h.createElement(Y.Z,{className:g,onClick:c,title:i||r,disabled:d||!c},m,r&&!l&&h.createElement("span",null,r),s&&h.createElement("div",{className:f.iconDropdown},h.createElement(p,{icon:a||u.dropdown,fixedWidth:!0})))}),nM=t5(function(e){return{baseButton:{fontSize:t1(e.toolbar.fontSize),textTransform:t1("none"),letterSpacing:t1(0),minWidth:t1("auto"),lineHeight:e.toolbar.lineHeight,height:e.toolbar.size,paddingBottom:t1(0),paddingTop:t1(0)},iconWithText:{marginRight:8},iconOnlyButton:{width:e.toolbar.size,textAlign:"center"},iconDropdown:{fontSize:"0.7em",marginLeft:2,marginTop:1},activeButton:{color:t1(e.colors.textActive)}}}),nA=h.memo(function(e){var t=e.fileActionId,n=tM(eC,t),r=nI(t),i=nk(t),o=i.icon,a=i.active,l=i.disabled,c=tj(n),d=c.buttonName,u=c.buttonTooltip;if(!n)return null;var s=n.button;return s&&(void 0===n.customVisibility||n.customVisibility()!==f.Hidden)?h.createElement(nD,{text:d,tooltip:u,icon:o,iconOnly:s.iconOnly,active:a,onClick:r,disabled:l}):null}),nO=h.memo(function(e){var t,n=e.first,r=e.current,i=e.item,o=i.file,a=i.disabled,l=i.onClick,c=nm({file:o,forceDisableDrop:!o||r}),d=c.dndIsOver,s=c.dndCanDrop,f=c.drop,p=(0,h.useMemo)(function(){return{dndIsOver:d,dndCanDrop:s,dndIsDragging:!1}},[s,d]);nb(o,p);var m=nS(p),g=(0,h.useContext)(tB),b=nN(p),v=t8(((t={})[b.baseBreadcrumb]=!0,t[b.disabledBreadcrumb]=a,t[b.currentBreadcrumb]=r,t)),y=o?o.name:"Loading...",C=n&&(null==o?void 0:o.folderChainIcon)===void 0?u.folder:null==o?void 0:o.folderChainIcon;return h.createElement("div",{className:b.buttonContainer,ref:o?f:null},o&&m&&h.createElement("div",{className:b.dndIndicator},h.createElement(g,{icon:m,fixedWidth:!0})),h.createElement(nD,{icon:C,className:v,text:y,disabled:a,onClick:l}))}),nN=t0(function(e){return{buttonContainer:{position:"relative"},baseBreadcrumb:{color:function(t){var n=e.palette.text.primary;return t.dndIsOver&&(n=t.dndCanDrop?e.dnd.canDropColor:e.dnd.cannotDropColor),t1(n)}},disabledBreadcrumb:{color:function(){return t1(e.palette.text.disabled)}},currentBreadcrumb:{textDecoration:t1("underline")},dndIndicator:{color:function(t){return t.dndCanDrop?e.dnd.canDropColor:e.dnd.cannotDropColor},backgroundColor:function(t){return t.dndCanDrop?e.dnd.canDropMask:e.dnd.cannotDropMask},lineHeight:"calc("+e.toolbar.lineHeight+" - 6px)",transform:"translateX(-50%) translateY(-50%)",borderRadius:e.toolbar.buttonRadius,height:e.toolbar.size-6,width:e.toolbar.size-6,boxSizing:"border-box",position:"absolute",textAlign:"center",left:"50%",top:"50%",zIndex:5}}}),nz=h.memo(function(){var e=nT(),t=nf(),n=(0,h.useMemo)(function(){for(var e=[],n=0;n<t.length;++n){var r="folder-chain-"+n,i=h.createElement(nO,{key:r,first:0===n,current:n===t.length-1,item:t[n]});e.push(i)}return e},[t]);return h.createElement(G.Z,{className:e.navbarWrapper},h.createElement(G.Z,{className:e.navbarContainer},h.createElement(nA,{fileActionId:tC.OpenParentFolder.id}),h.createElement(q.Z,{className:e.navbarBreadcrumbs,classes:{separator:e.separator}},n)))}),nT=t5(function(e){return{navbarWrapper:{paddingBottom:e.margins.rootLayoutMargin},navbarContainer:{display:"flex"},upDirectoryButton:{fontSize:t1(e.toolbar.fontSize),height:e.toolbar.size,width:e.toolbar.size,padding:"0px !important"},navbarBreadcrumbs:{fontSize:t1(e.toolbar.fontSize),flexGrow:100},separator:{marginRight:t1(4),marginLeft:t1(4)}}}),nL=h.forwardRef(function(e,t){var n,r=e.text,i=e.active,o=e.icon,a=e.onClick,l=e.disabled,c=nR(),d=(0,h.useContext)(tB),u=t8(((n={})[c.baseButton]=!0,n[c.activeButton]=i,n));return h.createElement(J.Z,{ref:t,className:u,onClick:a,disabled:l},o&&h.createElement(Q.Z,{className:c.icon},h.createElement(d,{icon:o,fixedWidth:!0})),h.createElement($.Z,{primaryTypographyProps:{className:c.text}},r))}),nR=t5(function(e){return{baseButton:{lineHeight:t1(e.toolbar.lineHeight),height:t1(e.toolbar.size),minHeight:t1("auto"),minWidth:t1("auto"),padding:t1(20)},icon:{fontSize:t1(e.toolbar.fontSize),minWidth:t1("auto"),color:t1("inherit"),marginRight:8},text:{fontSize:t1(e.toolbar.fontSize)},activeButton:{color:t1(e.colors.textActive)}}}),n_=h.forwardRef(function(e,t){var n=e.fileActionId,r=e.onClickFollowUp,i=tM(eC,n),o=nI(n),a=nk(n),l=a.icon,c=a.active,d=a.disabled,u=tj(i).buttonName,s=(0,h.useCallback)(function(){o(),r&&r()},[r,o]);return i&&i.button&&(void 0===i.customVisibility||i.customVisibility()!==f.Hidden)?h.createElement(nL,{ref:t,text:u,icon:l,onClick:s,active:c,disabled:d}):null}),nj=h.memo(function(e){var t=e.name,n=e.fileActionIds,r=h.useState(null),i=r[0],o=r[1],a=(0,h.useCallback)(function(e){return o(e.currentTarget)},[o]),l=(0,h.useCallback)(function(){return o(null)},[o]),c=(0,h.useMemo)(function(){return n.map(function(e){return h.createElement(n_,{key:"menu-item-"+e,fileActionId:e,onClickFollowUp:l})})},[n,l]),d=t_(t),u=nP();return h.createElement(h.Fragment,null,h.createElement(nD,{text:d,onClick:a,dropdown:!0}),h.createElement(X.Z,{autoFocus:!0,keepMounted:!0,elevation:2,anchorEl:i,onClose:l,open:!!i,transitionDuration:150,classes:{list:u.dropdownList}},c))}),nP=t5(function(){return{dropdownList:{paddingBottom:t1(0),paddingTop:t1(0)}}}),nK=h.memo(function(){var e=nH(),t=(0,M.v9)(tn.getDisplayFileIds),n=(0,M.v9)(ez),r=(0,M.v9)(eM),i=(0,w.Z)(),o=i.formatMessage({id:tL(s.Toolbar,"visibleFileCount"),defaultMessage:"{fileCount, plural,\n                =0 {# items}\n                one {# item}\n                other {# items}\n            }"},{fileCount:t.length}),a=i.formatMessage({id:tL(s.Toolbar,"selectedFileCount"),defaultMessage:"{fileCount, plural,\n                =0 {}\n                other {# selected}\n            }"},{fileCount:n}),l=i.formatMessage({id:tL(s.Toolbar,"hiddenFileCount"),defaultMessage:"{fileCount, plural,\n                =0 {}\n                other {# hidden}\n            }"},{fileCount:r});return h.createElement("div",{className:e.infoContainer},h.createElement(ee.Z,{className:e.infoText,variant:"body1"},o,(a||l)&&h.createElement("span",{className:e.extraInfoSpan},"(",h.createElement("span",{className:e.selectionSizeText},a),a&&l&&", ",h.createElement("span",{className:e.hiddenCountText},l),")")))}),nH=t5(function(e){return{infoContainer:{height:e.toolbar.size,display:"flex"},infoText:{lineHeight:t1(e.toolbar.lineHeight),fontSize:t1(e.toolbar.fontSize),marginLeft:t1(12),height:e.toolbar.size},extraInfoSpan:{marginRight:t1(8),marginLeft:t1(8),opacity:.8},selectionSizeText:{color:e.colors.textActive},hiddenCountText:{}}}),nB=h.memo(function(){var e=(0,w.Z)().formatMessage({id:tL(s.Toolbar,"searchPlaceholder"),defaultMessage:"Search"}),t=nW(),n=(0,h.useContext)(tB),r=(0,h.useRef)(),i=(0,M.I0)(),o=(0,M.v9)(eA),a=(0,h.useState)(o),l=a[0],c=a[1],d=ed(l,300)[0],f=(0,h.useState)(!1),p=f[0],m=f[1];(0,h.useEffect)(function(){return i(tw.setFocusSearchInput(function(){r.current&&r.current.focus()})),function(){i(tw.setFocusSearchInput(null))}},[i]),(0,h.useEffect)(function(){m(!1),i(tw.setSearchString(d))},[d,i]);var g=(0,h.useCallback)(function(e){m(!0),c(e.currentTarget.value)},[]),b=(0,h.useCallback)(function(e){"Escape"===e.key&&(c(""),i(tw.setSearchString("")),r.current&&r.current.blur())},[i]);return h.createElement(en.Z,{className:t.searchFieldContainer,size:"small",variant:"outlined",value:l,placeholder:e,onChange:g,inputRef:r,InputProps:{onKeyUp:b,startAdornment:h.createElement(et.Z,{className:t.searchIcon,position:"start"},h.createElement(n,{icon:p?u.loading:u.search,spin:p})),className:t.searchFieldInput},inputProps:{className:t.searchFieldInputInner}})}),nW=t5(function(e){return{searchFieldContainer:{height:e.toolbar.size,width:150},searchIcon:{fontSize:"0.9em",opacity:.75},searchFieldInput:{lineHeight:t1(0),padding:t1(0),margin:t1(0),fontSize:t1(e.toolbar.fontSize),borderRadius:e.toolbar.buttonRadius,height:e.toolbar.size-4,paddingLeft:t1(8),marginTop:2},searchFieldInputInner:{lineHeight:t1(e.toolbar.size-4+"px"),fontSize:t1(e.toolbar.fontSize),height:t1(e.toolbar.size-4),padding:t1([0,8,0,0]),margin:t1(0),"-webkit-appearance":"none"}}}),nV=h.memo(function(){var e=nG(),t=(0,M.v9)(eS),n=(0,h.useMemo)(function(){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="toolbar-item-"+("string"==typeof r?r:r.name),o="string"==typeof r?h.createElement(nA,{key:i,fileActionId:r}):h.createElement(nj,{key:i,name:r.name,fileActionIds:r.fileActionIds});e.push(o)}return e},[t]);return h.createElement("div",{className:e.toolbarWrapper},h.createElement("div",{className:e.toolbarContainer},h.createElement("div",{className:e.toolbarLeft},h.createElement(nB,null),h.createElement(nK,null)),h.createElement("div",{className:e.toolbarRight},n)))}),nG=t5(function(e){return{toolbarWrapper:{},toolbarContainer:{flexWrap:"wrap-reverse",display:"flex"},toolbarLeft:{paddingBottom:e.margins.rootLayoutMargin,flexWrap:"nowrap",flexGrow:1e4,display:"flex"},toolbarLeftFiller:{flexGrow:1e4},toolbarRight:{paddingBottom:e.margins.rootLayoutMargin,flexWrap:"nowrap",display:"flex"}}}),nZ=function(e){var t=e.width,n=e.height,r=nU(),i=(0,h.useContext)(tB),o=(0,w.Z)().formatMessage({id:tL(s.FileList,"nothingToShow"),defaultMessage:"Nothing to show"});return h.createElement("div",{className:r.fileListEmpty,style:{width:t,height:n}},h.createElement("div",{className:r.fileListEmptyContent},h.createElement(i,{icon:u.folderOpen}),"\xa0 ",o))},nU=t5(function(e){return{fileListEmpty:{color:e.palette.text.disabled,position:"relative",textAlign:"center",fontSize:"1.2em"},fileListEmptyContent:{transform:"translateX(-50%) translateY(-50%)",position:"absolute",left:"50%",top:"50%"}}}),nq=function(e,t){var n=(0,M.v9)(eB),r=(0,h.useRef)({clickCount:0,clickTimeout:null});return(0,h.useCallback)(function(i){var o={altKey:i.altKey,ctrlKey:i.ctrlKey||i.metaKey,shiftKey:i.shiftKey};r.current.clickCount++,1===r.current.clickCount?(e&&(i.preventDefault(),e(o)),r.current.clickCount=1,r.current.clickTimeout=setTimeout(function(){return r.current.clickCount=0},n)):2===r.current.clickCount&&(t&&(i.preventDefault(),t(o)),"number"==typeof r.current.clickTimeout&&(clearTimeout(r.current.clickTimeout),r.current.clickTimeout=null,r.current.clickCount=0))},[n,e,t,r])},nY=function(e){var t=e.children,n=e.wrapperTag,r=e.passthroughProps,i=e.onSingleClick,o=e.onDoubleClick,a=e.onKeyboardClick,l=e.setFocused,c=nq(i,o),d=(0,h.useCallback)(function(e){if(a){var t={enterKey:"Enter"===e.nativeEvent.code,spaceKey:"Space"===e.nativeEvent.code,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey};(t.spaceKey||t.enterKey)&&(e.preventDefault(),e.stopPropagation(),a(t))}},[a]),u={onFocus:(0,h.useCallback)(function(){return l&&l(!0)},[l]),onBlur:(0,h.useCallback)(function(){return l&&l(!1)},[l])};(i||o||a)&&(u.onClick=c,u.onKeyDown=d,u.tabIndex=0);var s=ea({},u,r);return h.createElement(n,Object.assign({},s),t)},nX=h.memo(function(e){var t=e.file,n=e.className,r=nx(t),i=(0,h.useMemo)(function(){if(!t)return h.createElement(nh,{minLength:15,maxLength:20});var e,n,r=null;return em.isDirectory(t)?e=t.name:(r=null!=(n=t.ext)?n:nF(t.name),e=t.name.substr(0,t.name.length-r.length)),h.createElement(h.Fragment,null,e,r&&h.createElement("span",{className:"chonky-file-entry-description-title-extension"},r))},[t]),o=nQ();return h.createElement("span",{className:n,title:t?t.name:void 0},r.length>0&&h.createElement("span",{className:o.modifierIcons},r),i)});nX.displayName="FileEntryName";var nQ=t0(function(e){return{modifierIcons:{color:e.palette.text.hint,position:"relative",fontSize:"0.775em",paddingRight:5}}}),n$=h.memo(function(e){var t=e.file,n=nC(t,e.selected,e.focused),r=tP(t),i=r.fileModDateString,o=r.fileSizeString,a=nJ(n),l=(0,h.useContext)(tB),c=ny(t);return h.createElement("div",Object.assign({className:a.listFileEntry},c),h.createElement("div",{className:a.listFileEntryIcon},h.createElement(l,{icon:n.icon,spin:n.iconSpin,fixedWidth:!0})),h.createElement("div",{className:a.listFileEntryDescription},h.createElement("div",{className:a.listFileEntryName,title:t?t.name:void 0},h.createElement(nX,{file:t})),h.createElement("div",{className:a.listFileEntryProperties},h.createElement("div",{className:a.listFileEntryProperty},t?null!=i?i:h.createElement("span",null,"—"):h.createElement(nh,{minLength:5,maxLength:15})),h.createElement("div",{className:a.listFileEntryProperty},t?null!=o?o:h.createElement("span",null,"—"):h.createElement(nh,{minLength:10,maxLength:20})))),h.createElement("div",{className:"chonky-file-entry-outline"}),h.createElement("div",{className:"chonky-file-entry-selection"}))}),nJ=t0(function(e){return{listFileEntry:{fontSize:e.listFileEntry.fontSize,alignItems:"center",position:"relative",display:"flex",height:"100%"},listFileEntryIcon:{backgroundColor:function(e){return e.color},boxShadow:"inset rgba(255, 255, 255, 0.5) 0 0 0 999px",borderRadius:e.listFileEntry.iconBorderRadius,fontSize:e.listFileEntry.iconFontSize,color:"#fff",padding:8},listFileEntryDescription:{flexDirection:"column",display:"flex",flexGrow:1},listFileEntryName:{padding:[0,8,4,8]},listFileEntryProperties:{fontSize:e.listFileEntry.propertyFontSize,flexDirection:"row",display:"flex"},listFileEntryProperty:{padding:[0,8],opacity:.4}}}),n0=h.memo(function(e){var t=e.file,n=e.children,r=ng(t),i=r.drop,o=r.drag,a=r.dndState;nb(t,a);var l=n5();return h.createElement("div",{ref:i,className:l.fillParent},h.createElement("div",{ref:em.isDraggable(t)?o:null,className:l.fillParent},n(a)))}),n5=t0(function(){return{fillParent:{height:"100%"}}}),n1=h.memo(function(e){var t=e.className,n=e.thumbnailUrl,r=n8();return h.createElement("div",{className:V()([t,r.fileThumbnail]),style:n?{backgroundImage:"url('"+n+"')"}:{}})});n1.displayName="FileThumbnail";var n8=t5(function(){return{fileThumbnail:{backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"contain"}}}),n3=h.memo(function(e){var t,n=e.className,r=e.dndState,i=nS(r),o=n6(r),a=(0,h.useContext)(tB);if(!i)return null;var l=t8(((t={})[o.dndIndicator]=!0,t[n]=!0,t));return h.createElement("div",{className:l},h.createElement(a,{icon:i}))}),n6=t0(function(e){return{dndIndicator:{color:function(t){return t.dndIsOver?t.dndCanDrop?e.dnd.canDropColor:e.dnd.cannotDropColor:"#000"},boxSizing:"border-box",position:"absolute",fontSize:"1.2em",opacity:.6,padding:6,"&:before":{borderBottom:"50px solid transparent",borderLeft:"50px solid #fff",position:"absolute",content:'""',zIndex:-1,left:0,top:0}}}}),n2=h.memo(function(e){var t,n=e.className,r=e.entryState,i=e.dndState,o=n4(r),a=n7(r),l=re(r),c=t8(((t={})[o.previewFile]=!0,t[n||""]=!!n,t));return h.createElement("div",{className:c},h.createElement("div",{className:o.folderBackSideMid},h.createElement("div",{className:o.folderBackSideTop}),h.createElement("div",{className:o.folderFrontSide},h.createElement(n3,{className:a.dndIndicator,dndState:i}),h.createElement("div",{className:t8([a.fileIcon,o.fileIcon])},r.childrenCount),h.createElement("div",{className:l.selectionIndicator}),h.createElement(n1,{className:a.thumbnail,thumbnailUrl:r.thumbnailUrl}))))});n2.displayName="GridEntryPreviewFolder";var n4=t0(function(e){return{previewFile:{borderRadius:e.gridFileEntry.borderRadius,position:"relative",overflow:"hidden"},folderBackSideTop:{backgroundColor:function(e){return e.color},boxShadow:function(t){var n=e.gridFileEntry.folderBackColorTint;return t.focused?n="rgba(0, 0, 0, 0.3)":t.selected&&(n="rgba(0, 153, 255, .4)"),"inset "+n+" 0 0 0 999px"},borderTopLeftRadius:e.gridFileEntry.borderRadius,borderTopRightRadius:10,position:"absolute",right:"60%",height:13,top:-10,left:0,"&:after":{borderRightColor:e.palette.background.paper,borderTopColor:e.palette.background.paper,borderBottomColor:"transparent",borderLeftColor:"transparent",borderWidth:[0,15,10,0],borderStyle:"solid",position:"absolute",display:"block",content:'""',right:0,top:0}},folderBackSideMid:{backgroundColor:function(e){return e.color},boxShadow:function(t){var n=e.gridFileEntry.folderBackColorTint;return t.focused?n="rgba(0, 0, 0, 0.3)":t.selected&&(n="rgba(0, 153, 255, .4)"),"inset "+n+" 0 0 0 999px"},borderTopRightRadius:e.gridFileEntry.borderRadius,position:"absolute",bottom:0,right:0,left:0,top:10},folderFrontSide:{boxShadow:function(t){var n=[];return t.focused&&n.push("inset rgba(0, 0, 0, 1) 0 0 0 3px"),t.selected&&n.push("inset rgba(0, 153, 255, .65) 0 0 0 3px"),n.push("inset "+e.gridFileEntry.folderFrontColorTint+" 0 0 0 999px"),n.join(", ")},backgroundColor:function(e){return e.color},borderRadius:e.gridFileEntry.borderRadius,position:"absolute",overflow:"hidden",bottom:0,right:0,left:0,top:10},fileIcon:{fontSize:t1(e.gridFileEntry.childrenCountSize)}}}),n9=h.memo(function(e){var t,n=e.className,r=e.entryState,i=e.dndState,o=n7(r),a=re(r),l=(0,h.useContext)(tB),c=t8(((t={})[o.previewFile]=!0,t[n||""]=!!n,t));return h.createElement("div",{className:c},h.createElement(n3,{className:o.dndIndicator,dndState:i}),h.createElement("div",{className:o.fileIcon},h.createElement(l,{icon:r.icon,spin:r.iconSpin})),h.createElement("div",{className:a.selectionIndicator}),h.createElement(n1,{className:o.thumbnail,thumbnailUrl:r.thumbnailUrl}))});n9.displayName="GridEntryPreviewFile";var n7=t0(function(e){return{previewFile:{boxShadow:function(t){var n=[];return t.selected&&n.push("inset rgba(0,153,255, .65) 0 0 0 3px"),t.focused&&n.push("inset rgba(0, 0, 0, 1) 0 0 0 3px"),n.push("inset "+e.gridFileEntry.fileColorTint+" 0 0 0 999px"),n.join(", ")},backgroundColor:function(e){return e.color},borderRadius:e.gridFileEntry.borderRadius,position:"relative",overflow:"hidden"},dndIndicator:{zIndex:14},fileIcon:{transform:"translateX(-50%) translateY(-50%)",fontSize:e.gridFileEntry.iconSize,opacity:function(e){return e.thumbnailUrl&&!e.focused?0:1},color:function(t){return t.focused?e.gridFileEntry.iconColorFocused:e.gridFileEntry.iconColor},position:"absolute",left:"50%",zIndex:12,top:"50%"},thumbnail:{borderRadius:e.gridFileEntry.borderRadius,position:"absolute",zIndex:6,bottom:5,right:5,left:5,top:5}}}),re=t0(function(){return{selectionIndicator:{display:function(e){return e.selected?"block":"none"},background:"repeating-linear-gradient(45deg,rgba(0,153,255,.14),rgba(0,153,255,.14) 10px,rgba(0,153,255,.25) 0,rgba(0,153,255,.25) 20px)",backgroundColor:"rgba(0, 153, 255, .14)",position:"absolute",height:"100%",width:"100%",zIndex:10},focusIndicator:{display:function(e){return e.focused?"block":"none"},boxShadow:"inset rgba(0, 0, 0, 1) 0 0 0 2px",position:"absolute",height:"100%",width:"100%",zIndex:11}}}),rt=h.memo(function(e){var t,n=e.file,r=e.selected,i=e.focused,o=e.dndState,a=em.isDirectory(n),l=nC(n,r,i),c=rn(l),d=ny(n),u=t8(((t={})[c.gridFileEntry]=!0,t));return h.createElement("div",Object.assign({className:u},d),a?h.createElement(n2,{className:c.gridFileEntryPreview,entryState:l,dndState:o}):h.createElement(n9,{className:c.gridFileEntryPreview,entryState:l,dndState:o}),h.createElement("div",{className:c.gridFileEntryNameContainer},h.createElement(nX,{className:c.gridFileEntryName,file:n})))});rt.displayName="GridEntry";var rn=t0(function(e){return{gridFileEntry:{flexDirection:"column",display:"flex",height:"100%"},gridFileEntryPreview:{flexGrow:1},gridFileEntryNameContainer:{fontSize:e.gridFileEntry.fontSize,wordBreak:"break-word",textAlign:"center",paddingTop:5},gridFileEntryName:{backgroundColor:function(e){return e.selected?"rgba(0,153,255, .25)":"transparent"},textDecoration:function(e){return e.focused?"underline":"none"},borderRadius:3,padding:[2,4]}}}),rr=h.memo(function(e){var t=e.file,n=e.selected,r=e.focused,i=e.dndState,o=nC(t,n,r),a=nS(i),l=tP(t),c=l.fileModDateString,d=l.fileSizeString,u=ri((0,h.useMemo)(function(){return{entryState:o,dndState:i}},[i,o])),s=re(o),f=(0,h.useContext)(tB),p=ny(t);return h.createElement("div",Object.assign({className:u.listFileEntry},p),h.createElement("div",{className:s.focusIndicator}),h.createElement("div",{className:t8([s.selectionIndicator,u.listFileEntrySelection])}),h.createElement("div",{className:u.listFileEntryIcon},h.createElement(f,{icon:null!=a?a:o.icon,spin:!a&&o.iconSpin,fixedWidth:!0})),h.createElement("div",{className:u.listFileEntryName,title:t?t.name:void 0},h.createElement(nX,{file:t})),h.createElement("div",{className:u.listFileEntryProperty},t?null!=c?c:h.createElement("span",null,"—"):h.createElement(nh,{minLength:5,maxLength:15})),h.createElement("div",{className:u.listFileEntryProperty},t?null!=d?d:h.createElement("span",null,"—"):h.createElement(nh,{minLength:10,maxLength:20})))}),ri=t0(function(e){return{listFileEntry:{boxShadow:"inset "+e.palette.divider+" 0 -1px 0",fontSize:e.listFileEntry.fontSize,color:function(t){var n=t.dndState;return n.dndIsOver?n.dndCanDrop?e.dnd.canDropColor:e.dnd.cannotDropColor:"inherit"},alignItems:"center",position:"relative",display:"flex",height:"100%"},listFileEntrySelection:{opacity:.6},listFileEntryIcon:{color:function(t){var n=t.entryState,r=t.dndState;return r.dndIsOver?r.dndCanDrop?e.dnd.canDropColor:e.dnd.cannotDropColor:n.color},fontSize:e.listFileEntry.iconFontSize,boxSizing:"border-box",padding:[2,4],zIndex:20},listFileEntryName:{textOverflow:"ellipsis",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",flex:"1 1 300px",paddingLeft:8,zIndex:20},listFileEntryProperty:{fontSize:e.listFileEntry.propertyFontSize,boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",flex:"0 1 150px",padding:[2,8],zIndex:20}}}),ro={dndIsDragging:!1,dndIsOver:!1,dndCanDrop:!1},ra=h.memo(function(e){var t,n=e.fileId,r=e.displayIndex,i=e.fileViewMode,o=rl(),a=tM(ek,n),l=tM(eT,n),c=(0,M.v9)(eW),u=nw(a,r),s=(0,h.useState)(!1),f=s[0],p=s[1],m=ea({wrapperTag:"div",passthroughProps:{className:o.fileEntryClickableWrapper}},em.isClickable(a)?u:void 0,{setFocused:p}),g={file:a,selected:l,focused:f};return t=i===d.List?rr:i===d.Compact?n$:rt,c?h.createElement(nY,Object.assign({},m),h.createElement(t,Object.assign({},g,{dndState:ro}))):h.createElement(n0,{file:a},function(e){return h.createElement(nY,Object.assign({},m),h.createElement(t,Object.assign({},g,{dndState:e})))})});ra.displayName="SmartFileEntry";var rl=t5(function(){return{fileEntryClickableWrapper:{outline:"none !important",position:"relative",height:"100%"}}}),rc=function(e,t,n,r){var i,o,a=r?5:8,l=void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")?0:18;return r?o=(e-a-l)/(i=2):i=Math.max(1,Math.floor((e-l)/((o=n.entryWidth)+a))),{rowCount:Math.ceil(t/i),columnCount:i,gutter:a,rowHeight:n.entryHeight,columnWidth:o}},rd=h.memo(function(e){var t=e.width,n=e.height,r=(0,M.v9)(e_),i=(0,M.v9)(tn.getDisplayFileIds),o=(0,h.useMemo)(function(){return i.length},[i]),a=(0,h.useRef)(),l=t$(),c=(0,h.useState)(rc(t,o,r,l)),d=c[0],u=c[1],s=(0,h.useRef)(d);(0,h.useEffect)(function(){var e=s.current,n=rc(t,o,r,l);s.current=n,a.current&&(e.rowCount!==n.rowCount&&a.current.resetAfterRowIndex(Math.min(e.rowCount,n.rowCount)-1),e.columnCount!==n.columnCount&&a.current.resetAfterColumnIndex(Math.min(e.columnCount,n.rowCount)-1),e.columnWidth!==n.columnWidth&&a.current.resetAfterIndices({columnIndex:0,rowIndex:0})),u(n)},[u,s,l,t,r,o]);var f=(0,h.useMemo)(function(){return{getColumnWidth:function(e){return s.current.columnWidth+(e===s.current.columnCount-1?0:s.current.gutter)},getRowHeight:function(e){return s.current.rowHeight+(e===s.current.rowCount-1?0:s.current.gutter)}}},[s]),p=ef((0,M.v9)(tn.getDisplayFileIds)),m=(0,h.useCallback)(function(e){var t,n=e.rowIndex*s.current.columnCount+e.columnIndex;return null!=(t=p.current[n])?t:"loading-file-"+n},[s,p]),g=(0,h.useCallback)(function(e){var t=e.rowIndex*s.current.columnCount+e.columnIndex,n=i[t];if(void 0===i[t])return null;var o=ea({},e.style,{paddingRight:e.columnIndex===s.current.columnCount-1?0:s.current.gutter,paddingBottom:e.rowIndex===s.current.rowCount-1?0:s.current.gutter,boxSizing:"border-box"});return h.createElement("div",{style:o},h.createElement(ra,{fileId:null!=n?n:null,displayIndex:t,fileViewMode:r.mode}))},[i,r.mode]),b=ru();return(0,h.useMemo)(function(){return h.createElement(ei.cd,{ref:a,className:b.gridContainer,estimatedRowHeight:d.rowHeight+d.gutter,rowHeight:f.getRowHeight,estimatedColumnWidth:d.columnWidth+d.gutter,columnWidth:f.getColumnWidth,columnCount:d.columnCount,height:n,rowCount:d.rowCount,width:t,itemKey:m},g)},[b.gridContainer,d.rowHeight,d.gutter,d.columnWidth,d.columnCount,d.rowCount,f.getRowHeight,f.getColumnWidth,n,t,m,g])}),ru=t5(function(){return{gridContainer:{}}}),rs=h.memo(function(e){var t=e.width,n=e.height,r=(0,M.v9)(e_),i=(0,h.useRef)(),o=(0,M.v9)(tn.getDisplayFileIds),a=ef(o),l=(0,h.useCallback)(function(e){var t;return null!=(t=a.current[e])?t:"loading-file-"+e},[a]),c=rf();return(0,h.useMemo)(function(){return h.createElement(ei.t7,{ref:i,className:c.listContainer,itemSize:r.entryHeight,height:n,itemCount:o.length,width:t,itemKey:l},function(e){var t;return h.createElement("div",{style:e.style},h.createElement(ra,{fileId:null!=(t=o[e.index])?t:null,displayIndex:e.index,fileViewMode:d.List}))})},[c.listContainer,r.entryHeight,n,o,t,l])}),rf=t0(function(e){return{listContainer:{borderTop:"solid 1px "+e.palette.divider}}}),rp=h.memo(function(e){var t=(0,M.v9)(tn.getDisplayFileIds),n=(0,M.v9)(e_),r=nm({file:(0,M.v9)(eE)}),i=r.drop,o=r.dndCanDrop,a=r.dndIsOverCurrent,l=rm((0,h.useMemo)(function(){return{dndCanDrop:o,dndIsOverCurrent:a}},[o,a])),c=rg(n),s=e.onScroll,f=(0,h.useCallback)(function(e){var r=e.width,i=e.height;return 0===t.length?h.createElement(nZ,{width:r,height:n.entryHeight}):n.mode===d.List?h.createElement(rs,{width:r,height:i}):h.createElement(rd,{width:r,height:i})},[t,n]),p=(0,h.useContext)(tB);return h.createElement("div",{onScroll:s,ref:i,className:t8([c.fileListWrapper,l.fileListWrapper]),role:"list"},h.createElement("div",{className:l.dndDropZone},h.createElement("div",{className:l.dndDropZoneIcon},h.createElement(p,{icon:o?u.dndCanDrop:u.dndCannotDrop}))),h.createElement(er.ZP,{disableHeight:!1},f))});rp.displayName="FileList";var rm=t0(function(e){return{fileListWrapper:{minHeight:tC.EnableGridView.fileViewConfig.entryHeight+2,background:function(t){return t.dndIsOverCurrent&&t.dndCanDrop?t.dndCanDrop?tJ(e.dnd.fileListCanDropMaskOne,e.dnd.fileListCanDropMaskTwo):tJ(e.dnd.fileListCannotDropMaskOne,e.dnd.fileListCannotDropMaskTwo):"none"}},dndDropZone:{display:function(e){return e.dndIsOverCurrent&&e.dndCanDrop?"block":"none"},borderRadius:e.gridFileEntry.borderRadius,pointerEvents:"none",position:"absolute",height:"100%",width:"100%",zIndex:2},dndDropZoneIcon:{backgroundColor:function(t){return t.dndCanDrop?e.dnd.canDropMask:e.dnd.cannotDropMask},color:function(t){return t.dndCanDrop?e.dnd.canDropColor:e.dnd.cannotDropColor},borderRadius:e.gridFileEntry.borderRadius,transform:"translateX(-50%) translateY(-50%)",position:"absolute",textAlign:"center",lineHeight:"60px",fontSize:"2em",left:"50%",height:60,top:"50%",width:60}}}),rg=t5(function(){return{fileListWrapper:{height:"100%",maxHeight:"100%"}}}),rb=h.memo(function(){var e=(0,M.I0)();(0,h.useEffect)(function(){return e(tw.setContextMenuMounted(!0)),function(){e(tw.setContextMenuMounted(!1))}},[e]);var t=(0,w.Z)().formatMessage({id:tL(s.FileContextMenu,"browserMenuShortcut"),defaultMessage:"Browser menu: {shortcut}"},{shortcut:h.createElement("strong",null,"Alt + Right Click")}),n=(0,M.v9)(eZ),r=(0,M.v9)(ex),i=nn(),o=(0,h.useMemo)(function(){for(var e=[],t=0;t<r.length;++t)!function(t){var n=r[t];"string"==typeof n?e.push(h.createElement(n_,{key:"context-menu-item-"+n,fileActionId:n,onClickFollowUp:i})):n.fileActionIds.map(function(t){return e.push(h.createElement(n_,{key:"context-menu-item-"+n.name+"-"+t,fileActionId:t,onClickFollowUp:i}))})}(t);return e},[r,i]),a=(0,h.useMemo)(function(){return n?{top:n.mouseY,left:n.mouseX}:void 0},[n]),l=rh();return h.createElement(X.Z,{elevation:2,disablePortal:!0,onClose:i,transitionDuration:150,open:!!n,anchorPosition:a,anchorReference:"anchorPosition",classes:{list:l.contextMenuList}},o,h.createElement(eo.Z,{component:"div",className:l.browserMenuTooltip},t))}),rh=t5(function(){return{contextMenuList:{paddingBottom:t1(0),paddingTop:t1(0)},browserMenuTooltip:{lineHeight:t1("30px"),fontSize:t1("0.7em")}}});h.memo(h.forwardRef(function(e,t){var n=e.onScroll;return h.createElement(ns,Object.assign({ref:t},e),h.createElement(nz,null),h.createElement(nV,null),h.createElement(rp,{onScroll:n}),h.createElement(rb,null))})).displayName="FullFileBrowser"}}]);